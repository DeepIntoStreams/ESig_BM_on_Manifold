Notebook[{Cell[
CellGroupData[{Cell[
TextData[{"A Guide to ",StyleBox["ItosLemma",
FontFamily -> "Courier New"]}],"Title",ExpressionUUID -> "cad2f570-2ead-4ed7-8d4e-3897b5750535"],Cell[
TextData[
{"A ",StyleBox["Mathematica",FontSlant -> "Italic"]," package that implements Ito's Lemma for stochastic calculus"}],
"Subtitle",ExpressionUUID -> "673bf8b3-2de9-4c9c-a0b1-df9fcec6715a"],Cell[
"\<by Mark Fisher\>",
"Subtitle",ExpressionUUID -> "4792ae78-8ecb-4fa6-b9ff-f981da29c17c"],Cell[
"\<Revised April 2003\>",
"Subsubtitle",ExpressionUUID -> "c0787445-71d5-4c1a-83d4-5227b00bc596"],Cell[
"\<Financial Economist and Associate Policy Advisor
Research Department
Federal Reserve Bank of Atlanta
1000 Peachtree Street, N.E.
Atlanta, GA 30309-4470

mark@markfisher.net

http://www.markfisher.net/~mefisher/\>",
"Subsubtitle",ExpressionUUID -> "250664d6-5095-442e-9ad3-e936166b3a2d"],Cell[
CellGroupData[
{Cell[
"\<What is Ito's lemma?\>","Section",ExpressionUUID -> "f0f583da-02cd-4b14-bdec-a49f9fe776fe"],Cell[
TextData[
{"An Ito process can be thought of as a stochastic differential equation (SDE). Ito's lemma provides the rules for computing the Ito process of a function of Ito processes. In other words, it is the formula for computing stochastic derivatives. For example, given the stochastic differential equation ",Cell[
BoxData[
FormBox[RowBox[{RowBox[{"d","\[InvisibleSpace]","x"}]," ","="," ",RowBox[{RowBox[
{"\[Mu]"," ","d","\[InvisibleSpace]","t"}]," ","+"," ",RowBox[{"\[Sigma]"," ","d","\[InvisibleSpace]","B"}]}]}],
TraditionalForm]],ExpressionUUID -> "b54db42e-f6e5-4aaa-bd98-5410425c3f5f"]," and the (suitably smooth) function ",Cell[
BoxData[
FormBox[RowBox[{"f","(",RowBox[{"x",",","t"}],")"}],TraditionalForm]],ExpressionUUID -> "c9fd0a54-f463-4dc2-8ad1-8bae0029cf30"],", the SDE for ",Cell[
BoxData[
FormBox[RowBox[{RowBox[{"y","(","t",")"}]," ","=",RowBox[{"f","(",RowBox[{RowBox[
{"x","(","t",")"}],",","t"}],")"}]}],TraditionalForm]],ExpressionUUID -> "90cac7ba-582d-4b87-b3ed-0776ae40d39b"]," is ",Cell[
BoxData[
FormBox[RowBox[{RowBox[{"d","\[InvisibleSpace]","y"}]," ","="," ",RowBox[{RowBox[
{RowBox[{"(",RowBox[{RowBox[{SubscriptBox["f","t"],"(",RowBox[{"x",",","t"}],")"}]," ","+"," ",RowBox[
{RowBox[{SubscriptBox["f","x"],"(",RowBox[{"x",",","t"}],")"}],"\[Mu]"}]," ","+",RowBox[
{RowBox[{SubscriptBox["f",RowBox[{"x","\[InvisibleSpace]","x"}]],"(",RowBox[{"x",",","t"}],")"}]," ",FractionBox[
"1","2"],SuperscriptBox["\[Sigma]","2"]}]}],")"}],"d","\[InvisibleSpace]","t"}]," ","+"," ",RowBox[
{RowBox[{SubscriptBox["f","x"],"(",RowBox[{"x",",","t"}],")"}],"\[Sigma]"," ","d","\[InvisibleSpace]","B"}]}]}],
TraditionalForm]],TextAlignment -> Left,TextJustification -> 0,ExpressionUUID -> "3427663d-7dc4-45d1-bee7-ed43b61c32ff"],". \nThis package will compute Ito's formula for arbitrary functions of an arbitrary number of Ito processes with an arbitrary number of Brownians. The Brownians may have an arbitrary correlation matrix.\n\nFor a reasonably accessible introduction to SDEs, see Bernt \[CapitalOSlash]ksendal, ",StyleBox[
"Stochastic Differential Equations: An Introduction with Applications",FontSlant -> "Italic"],", Springer-Verlag (currently in its 5th edition). The latest edition of \[CapitalOSlash]ksendal has a chapter of applications to finance. See also Darrell Duffie, ",StyleBox[
"Dynamic Asset Pricing Theory",FontSlant -> "Italic"],", Princeton University Press (currently in its 3rd edition) for many applications of Ito's lemma to finance."}],
"Text",ExpressionUUID -> "b0c882b4-b558-4dbc-b082-eae787ff86f8"],Cell[
CellGroupData[
{Cell[
"\<A brief explanation of the code. (You don't need to read this.)\>","Subsection",
ExpressionUUID -> "b184dda8-38cb-481a-90a6-ffb92f8a08c7"],Cell[
TextData[{"Ito's lemma itself (as a mathematical formula) is quite simple. The main programming challenge is to identify the Ito processes in the given expression and determine their drifts and diffusions. Below, I discuss two possible paradigms. The code in the package ",StyleBox[
"ItosLemma.m",FontFamily -> "Courier New",FontWeight -> "Bold"]," follows the second paradigm."}],
"Text",ExpressionUUID -> "bdec6012-abee-4c6f-98ea-e7b329727fb2"],Cell[
CellGroupData[
{Cell[
"\<First paradigm\>","Subsubsection",ExpressionUUID -> "3fb2e1b6-44eb-4b9f-8750-1989a8ab1f91"],Cell[

"\<Ideally, the syntax for an Ito derivative would parallel that for an ordinary derivative. For example,\>",
"Text",ExpressionUUID -> "7193733f-4de0-4825-bcdc-5b2f04f75503"],Cell[
BoxData[RowBox[
{"ItoD","[",RowBox[{"expression",","," ","arguments"}],"]"}]],"Input",Evaluatable -> False,
ExpressionUUID -> "6f72b4dc-b608-4d28-81c2-e717eac2a1e4"],Cell[
"\<where the expression is to be \"differentiated\" with respect to the arguments. In principle, the arguments would be the Ito processes (including the time argument). However, the drifts and diffusions would still need to be specified. It would be possible to use the following syntax:\>",
"Text",ExpressionUUID -> "33445a33-52c0-48bd-8540-4f6f2326f62a"],Cell[
BoxData[RowBox[
{RowBox[{"ItoD","[",RowBox[{RowBox[{"f","[",RowBox[{"x",",","t"}],"]"}],","," ",RowBox[
{"ItoProcess","[",RowBox[{"x",",",SubscriptBox["\[Mu]","x"],",",SubscriptBox["\[Sigma]",
"x"]}],"]"}],","," ",RowBox[{"ItoProcess","[",RowBox[{"t",",","1",",","0"}],"]"}]}],"]"}]," "}]],
"Input",Evaluatable -> False,ExpressionUUID -> "d128b067-e06b-4978-8eaf-d439f0fa3ce8"],Cell[
TextData[
{"where ItoProcess[x,\[Mu],\[Sigma]] specifies that ",Cell[
BoxData[FormBox["x",TraditionalForm]],
ExpressionUUID -> "5ca4cc0b-2b13-4ab2-83b6-db76c81f7cd3"]," is an Ito process with drift ",Cell[
BoxData[
FormBox["\[Mu]",TraditionalForm]],ExpressionUUID -> "55b8ef9c-810e-42f0-abc0-74922ff4e3d6"]," and diffusion ",Cell[
BoxData[
FormBox["\[Sigma]",TraditionalForm]],ExpressionUUID -> "1f9a7182-d4f8-47c1-8951-21a782b3f1ca"]," and ItoProcess[t,1,0] specifies that ",Cell[
BoxData[
FormBox["t",TraditionalForm]],ExpressionUUID -> "6c3859bf-ff12-4671-bffb-9fa1094e9288"]," is Ito process with drift 1 and diffusion 0  (i.e., ",Cell[
BoxData[
FormBox["t",TraditionalForm]],ExpressionUUID -> "56acf04b-24df-46a0-9317-858d60bf2229"]," is time). ItoD could return an ''anonymous'' Ito process such as"}],
"Text",ExpressionUUID -> "c1c47ee4-92f1-4d91-a83a-7eeb0438360e"],Cell[
BoxData[RowBox[
{"ItoProcess","[",RowBox[{RowBox[{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[
{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","t"}],"]"}],"+",RowBox[
{SubscriptBox["\[Mu]","x"]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[
{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","t"}],"]"}]}],"+",RowBox[
{FractionBox["1","2"]," ",SubsuperscriptBox["\[Sigma]","x","2"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}]}],",",RowBox[{SubscriptBox["\[Sigma]","x"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}]}],"]"}]],"Input",Evaluatable -> False,ExpressionUUID -> "da71b22e-36fd-4ddb-ae73-efbb5c5afee5"],Cell[

"\<The third argument in ItoProcess could be a vector. In addition, an option to ItoD could control how the correlations among the Brownian motions are treated.\>",
"Text",ExpressionUUID -> "f0498595-11d5-42e4-ac3a-7d4be04ec58c"]},Open],ExpressionUUID -> "a5bcca9e-ff74-4897-a556-1fc7dbb60fea"],Cell[
CellGroupData[
{Cell[
"\<Second paradigm\>","Subsubsection",ExpressionUUID -> "9aa99202-eb85-48dd-a093-ea9f3408431b"],Cell[
TextData[
{"\tThe code in ",StyleBox["ItosLemma.m",FontFamily -> "Courier New",FontWeight -> "Bold"]," takes a different route. Instead of passing an ItoProcess object as an argument to ItoD, one declares in advance that ",Cell[
BoxData[
FormBox["x",TraditionalForm]],ExpressionUUID -> "e0cef371-4e0f-4f47-9429-d8dfc685af72"]," is an Ito process with given drift and diffusion. In addition, global variables are used to identify time and other things. The three central global variables are TimeSymbol, TimeIncrement, and BrownianIncrement. Ordinarily, one would define convenient abbreviations using symbols that are not otherwise in use, such as t, dt, and dB. "}],
"Text",ExpressionUUID -> "f7c0a2bc-585f-44f1-bd23-f0965535eb45"],Cell[
TextData[{"\tTo declare ",Cell[
BoxData[
FormBox["x",TraditionalForm]],ExpressionUUID -> "92e65f11-d37b-4901-9a60-a7d3c6ceac8d"]," to be an Ito process with drift ",Cell[
BoxData[
FormBox["\[Mu]",TraditionalForm]],ExpressionUUID -> "995c42c8-6bda-4609-bac8-30c8b321965d"]," and diffusion ",Cell[
BoxData[
FormBox["\[Sigma]",TraditionalForm]],ExpressionUUID -> "f3087224-eb7e-45f3-8442-76d85e67aa83"],", use"}],
"Text",ExpressionUUID -> "dcbd9b30-5a75-45dd-91d8-ff05f3b61346"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoMake","[",RowBox[{RowBox[{"x","[","t","]"}],",","\[Mu]",",","\[Sigma]"}],"]"}]],
"Input",CellLabel -> "In[29]:= ",ExpressionUUID -> "ae50402f-bb5f-4be2-9f45-14e6f91d2fd9"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ","\[Mu]"}],"+",RowBox[{"\[Sigma]"," ",SubscriptBox["dB","1"]}]}],
StandardForm],"Output",CellLabel -> "Out[29]= ",ExpressionUUID -> "857a385e-2dff-4006-bb3f-9546fd9e63e9"]},
Open],ExpressionUUID -> "b4036361-d5dc-4430-a2ac-cf863420d5e1"],Cell[
"\<which stores the following rule:\>",
"Text",ExpressionUUID -> "2926dc7e-cf03-4e43-bc9c-e36e21083a0d"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"x","[",RowBox[{"t","+","dt"}],"]"}]," ","="," ",RowBox[
{RowBox[{"x","[","t","]"}]," ","+"," ",RowBox[{"\[Mu]"," ","dt"}]," ","+"," ",RowBox[
{"\[Sigma]"," ",SubscriptBox["dB","1"]}]}]}]],"Input",CellLabel -> "In[31]:= ",ExpressionUUID -> "adb1436b-1597-4dac-808b-3f9497958728"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ","\[Mu]"}],"+",RowBox[{"\[Sigma]"," ",SubscriptBox["dB","1"]}],"+",RowBox[
{"x","[","t","]"}]}],StandardForm],"Output",CellLabel -> "Out[31]= ",ExpressionUUID -> "4fc23993-9e10-4783-8cb9-9a69e572bf2e"]},
Open],ExpressionUUID -> "d3aca12b-4272-4be5-9bd2-8480f840d90e"],Cell[
TextData[{"Note the rule will only match ",Cell[
BoxData[
FormBox[RowBox[{"x","[",RowBox[{"t","+","dt"}],"]"}],TraditionalForm]],ExpressionUUID -> "f76696dd-f4fe-42fa-8dc9-90dc8594bee3"]," and nothing else; there are no underscores on the left-hand side. "}],
"Text",ExpressionUUID -> "1af00f0c-2e49-4bc9-9845-77c46b21665b"],Cell[
TextData[{"\tProgramming note: ItoMake allows the user to redeclare ",Cell[
BoxData[
FormBox["x",TraditionalForm]],ExpressionUUID -> "c44901dc-cfe7-433a-8fba-049fc2a2db9a"]," as an Ito process without clearing the previous definition by constructing and executing the following:"}],
"Text",ExpressionUUID -> "3101c8d5-942b-4b79-953f-73901ac290c1"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Set"," ","@@"," ",RowBox[{"Hold","[",RowBox[{RowBox[{"x","[",RowBox[
{"t","+","dt"}],"]"}],","," ",RowBox[{RowBox[{"x","[","t","]"}]," ","+"," ",RowBox[
{"\[Mu]"," ","dt"}]," ","+"," ",RowBox[{"\[Sigma]"," ",SubscriptBox["dB","1"]}]}]}],"]"}]}]],
"Input",CellLabel -> "In[32]:= ",ExpressionUUID -> "616b7393-a51b-4941-93fc-679b2f63d884"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ","\[Mu]"}],"+",RowBox[{"\[Sigma]"," ",SubscriptBox["dB","1"]}],"+",RowBox[
{"x","[","t","]"}]}],StandardForm],"Output",CellLabel -> "Out[33]= ",ExpressionUUID -> "972dbdd2-2cb0-47e0-95c7-63f5d43f22a9"]},
Open],ExpressionUUID -> "b625cbeb-d37b-41e8-9f0e-738cb96f3d1b"],Cell[
TextData[{"\tHaving declared that ",Cell[
BoxData[
FormBox["x",TraditionalForm]],ExpressionUUID -> "b962e535-d47b-4795-b730-56f97a0d4351"]," is an Ito process via this route, we are free to use ItoD on any expression containing ",Cell[
BoxData[
FormBox["x",TraditionalForm]],ExpressionUUID -> "96e7fcac-117f-4e30-96ce-bd53e1ae2fe2"],". "}],
"Text",ExpressionUUID -> "ab772681-93f5-4b27-8fcb-fb008a79a9d6"],Cell[
"\<To see how ItoD works, consider the following expression:\>",
"Text",ExpressionUUID -> "c5ed1321-745b-47c2-b362-99322b77a998"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"expr"," ","="," ",RowBox[{"f","[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}]],
"Input",CellLabel -> "In[34]:= ",ExpressionUUID -> "ed493166-f443-444b-b811-7c51f1fb899a"],Cell[
BoxData[
RowBox[{"f","[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}],StandardForm],"Output",
CellLabel -> "Out[35]= ",ExpressionUUID -> "95fa4fa7-4c52-4274-a9e0-4a3ad32e10ca"]},
Open],ExpressionUUID -> "b67568ec-c4b8-4749-9049-6ccb21cf2129"],Cell[
"\<To identify the Ito processes in the expression, substitute t+dt for t:\>",
"Text",ExpressionUUID -> "178c182d-5d81-40b3-8a7b-74a97b87aa1c"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dtexpr"," ","="," ",RowBox[{"expr"," ","/."," ",RowBox[{"t","\[Rule]",RowBox[
{"t","+","dt"}]}]}]}]],"Input",CellLabel -> "In[36]:= ",ExpressionUUID -> "dba0c53b-16ec-4d02-be62-41d2fc164f45"],Cell[
BoxData[
RowBox[{"f","[",RowBox[{RowBox[{RowBox[{"dt"," ","\[Mu]"}],"+",RowBox[{"\[Sigma]"," ",SubscriptBox[
"dB","1"]}],"+",RowBox[{"x","[","t","]"}]}],",",RowBox[{"dt","+","t"}]}],"]"}],StandardForm],
"Output",CellLabel -> "Out[36]= ",ExpressionUUID -> "bc120690-44d7-47a5-a1f6-3d1db48ce221"]},
Open],ExpressionUUID -> "a52c3be4-9345-4346-9825-2c47f4b05d12"],Cell[
"\<The rule matches for those symbols (and only those symbols) that have previously been declared Ito processes (including time, which has been declared implicitly). \>",
"Text",ExpressionUUID -> "4a8f0f4e-3c55-4a85-98d6-1993b4d344c4"],Cell[
"\<Now we can compute the Ito-Taylor series for the expression. We need the first derivative with respect to the time increment and the first two derivatives with respect to the Brownian increment:\>",
"Text",ExpressionUUID -> "d4f7c4e4-5335-45e6-8a75-bb7556b024dd"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"derivatives","=",RowBox[{RowBox[{"(",RowBox[{RowBox[{RowBox[
{"D","[",RowBox[{"dtexpr",","," ","#"}],"]"}],"&"}],"/@",RowBox[{"{",RowBox[{"dt",","," ",SubscriptBox[
"dB","1"],","," ",RowBox[{"{",RowBox[{SubscriptBox["dB","1"],",","2"}],"}"}]}],"}"}]}],")"}]," ","/."," ",RowBox[
{RowBox[{SubscriptBox["dB","1"],"|","dt"}]," ","\[Rule]"," ","0"}]}]}]],"Input",CellLabel -> "In[37]:= ",
ExpressionUUID -> "1df70d21-ccb7-4dbf-ac59-e30c9050b8fe"],Cell[
BoxData[RowBox[{"{",RowBox[
{RowBox[{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}],"+",RowBox[
{"\[Mu]"," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}]}],",",RowBox[
{"\[Sigma]"," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}],",",RowBox[
{SuperscriptBox["\[Sigma]","2"]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[
{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}]}],"}"}],
StandardForm],"Output",CellLabel -> "Out[37]= ",ExpressionUUID -> "83334d5b-0465-4e74-a1a2-a78374755635"]},
Open],ExpressionUUID -> "888a4a3c-b5e6-45cf-94c9-f245d114e2cf"],Cell[
TextData[{"With these derivatives, we construct the series using the Ito \"multiplication rule\" ",Cell[
BoxData[
FormBox[RowBox[{SubsuperscriptBox["dB","1","2"],"\[Rule]","dt"}],TraditionalForm]],
ExpressionUUID -> "65075c0c-9b32-4d56-a5d3-cf163dedb1ac"],":"}],"Text",ExpressionUUID -> "b8f2fd3a-0c41-4198-ac03-446e05199530"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Collect","[",RowBox[{RowBox[{RowBox[{"derivatives",".",RowBox[
{"{",RowBox[{"dt",","," ",SubscriptBox["dB","1"],",",RowBox[{FractionBox["1","2"]," ",SubsuperscriptBox[
"dB","1","2"]}]}],"}"}]}]," ","/."," ",RowBox[{SubsuperscriptBox["dB","1","2"],"\[Rule]","dt"}]}],","," ","dt"}],"]"}]],
"Input",CellLabel -> "In[38]:= ",ExpressionUUID -> "a2ab8b1c-2883-4d4c-8109-6bf53e81508b"],Cell[
BoxData[
RowBox[{RowBox[{"\[Sigma]"," ",SubscriptBox["dB","1"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[
{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],
MultilineFunction -> None],"[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}],"+",RowBox[
{"\[Mu]"," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[
{FractionBox["1","2"]," ",SuperscriptBox["\[Sigma]","2"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}]}],")"}]}]}],StandardForm],"Output",CellLabel -> "Out[38]= ",
ExpressionUUID -> "c7a15913-c786-4a18-8635-1d4f16c98a66"]},Open],ExpressionUUID -> "1e89816e-98e4-454e-8492-7efa6c75f3b4"]},
Open],ExpressionUUID -> "ba7e0f76-f1ce-41f3-a932-ddfd48c68332"]},Open],ExpressionUUID -> "6cced3c6-51d7-4963-a3e3-f9b585d52e38"]},
Open],ExpressionUUID -> "e1b45d7b-799d-4f8a-8e40-4a527e4b59d2"],Cell[
CellGroupData[
{Cell[
"\<Load the package\>","Section",ExpressionUUID -> "e98f331f-5c87-43ad-84c2-9b78572f0e9d"],Cell[
TextData[
{"You should put ",StyleBox["ItosLemma.m",FontFamily -> "Courier New",FontWeight -> "Bold"]," in a directory in the ",StyleBox[
"$Path",FontFamily -> "Courier New",FontWeight -> "Bold"]," (or add the directory where ",StyleBox[
"ItosLemma.m",FontFamily -> "Courier New",FontWeight -> "Bold"]," is located to the ",StyleBox[
"$Path",FontFamily -> "Courier New",FontWeight -> "Bold"],")."}],"Text",ExpressionUUID -> "065f044b-c252-4bb3-bf29-e7ee2179e475"],Cell[
BoxData[
RowBox[{"<<","ItosLemma`"}]],"Input",CellLabel -> "In[39]:= ",ExpressionUUID -> "0bacb1dc-6020-44c9-9c72-47c768d58bec"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"?","ItosLemma"}]],"Input",CellLabel -> "In[40]:= ",ExpressionUUID -> "6363f331-6539-4889-9fcc-ac2975ab5c94"],Cell[
BoxData[
InterpretationBox[StyleBox[FrameBox[DynamicModuleBox[{Set[System`InformationDump`open$$,
False],Set[System`InformationDump`mouseOver$$,False]},PaneSelectorBox[{True -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",BaseStyle -> None,
StripOnInput -> False],FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"ItosLemma.m is a package that implements Ito's Lemma.\\nThe package uses six global symbols: TimeSymbol, TimeIncrement,\\nBrownianIncrement, CorrelationSymbol, DriftSymbol, and DiffusionSymbol.\\nThey can be defined in terms of more convenient symbols.\\n\\nExample:\\n\\nClear[t, dt, dB, \[Rho], \[Mu], \[Sigma]];\\n\\n{TimeSymbol, TimeIncrement, BrownianIncrement, CorrelationSymbol,\\n\\tDriftSymbol, DiffusionSymbol} = {t, dt, dB, \[Rho], \[Mu], \[Sigma]}\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{PaneBox[
GridBox[{{DynamicModuleBox[{Set[System`InformationDump`open$$,{False,False,False,False,False,False}]},
StyleBox[GridBox[{{TagBox[TooltipBox[StyleBox["\" Full Name\"","InformationRowLabel",
StripOnInput -> False],"\"FullName\"",TooltipStyle -> "TextStyling"],Function[Annotation[
Slot[1],"FullName","Tooltip"]]],"\"ItosLemma`ItosLemma\""}},AutoDelete -> False,GridBoxItemSize -> {"Columns" -> {Automatic,Automatic}},
GridBoxAlignment -> {"Columns" -> {Right,Left}},RowSpacings -> 2,GridBoxDividers -> None],
"DialogStyle",StripOnInput -> False],RuleDelayed[DynamicModuleValues,{}]]}},GridBoxAlignment -> {"Columns" -> {{Left}}},
DefaultBaseStyle -> "Column",GridBoxDividers -> {"Columns" -> {{False}},"Rows" -> {{False}}},
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},RowSpacings -> 9],
FrameMargins -> {{6,6},{6,3}}],""},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","UpPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,False]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"],False -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",StripOnInput -> False],
FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"ItosLemma.m is a package that implements Ito's Lemma.\\nThe package uses six global symbols: TimeSymbol, TimeIncrement,\\nBrownianIncrement, CorrelationSymbol, DriftSymbol, and DiffusionSymbol.\\nThey can be defined in terms of more convenient symbols.\\n\\nExample:\\n\\nClear[t, dt, dB, \[Rho], \[Mu], \[Sigma]];\\n\\n{TimeSymbol, TimeIncrement, BrownianIncrement, CorrelationSymbol,\\n\\tDriftSymbol, DiffusionSymbol} = {t, dt, dB, \[Rho], \[Mu], \[Sigma]}\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{ItemBox[
TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","DownPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps",
"DownPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],RuleDelayed[
ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,True]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"]},Dynamic[System`InformationDump`open$$],
ImageSize -> Automatic,FrameMargins -> 0,BaselinePosition -> Baseline],RuleDelayed[
DynamicModuleValues,{}],ExpressionUUID -> "230d1e96-596c-4fa9-ac9c-8936dae453ab"],
BaseStyle -> "InformationGridFrame",StripOnInput -> False],"InformationGridPlain",
StripOnInput -> False],InformationData[Association["ObjectType" -> "Symbol","Usage" -> "ItosLemma.m is a package that implements Ito's Lemma.\nThe package uses six global symbols: TimeSymbol, TimeIncrement,\nBrownianIncrement, CorrelationSymbol, DriftSymbol, and DiffusionSymbol.\nThey can be defined in terms of more convenient symbols.\n\nExample:\n\nClear[t, dt, dB, \[Rho], \[Mu], \[Sigma]];\n\n{TimeSymbol, TimeIncrement, BrownianIncrement, CorrelationSymbol,\n\tDriftSymbol, DiffusionSymbol} = {t, dt, dB, \[Rho], \[Mu], \[Sigma]}",
"Documentation" -> None,"OwnValues" -> None,"UpValues" -> None,"DownValues" -> None,
"SubValues" -> None,"DefaultValues" -> None,"NValues" -> None,"FormatValues" -> None,
"Options" -> None,"Attributes" -> {},"FullName" -> "ItosLemma`ItosLemma"],False]],
StandardForm],"Output",CellLabel -> "Out[40]= ",ExpressionUUID -> "977b078f-c66e-4875-9486-75cd9b5f28c5"]},
Open],ExpressionUUID -> "674bab50-8ff1-4bb8-bedb-4ec2244bbfc8"],Cell[
"\<Set the global symbols to convenient symbols:\>",
"Text",ExpressionUUID -> "34376a43-357f-4e86-8d0c-db431e749579"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"{",RowBox[{"TimeSymbol",",","TimeIncrement",",","BrownianIncrement",",","CorrelationSymbol",",","DriftSymbol",",","DiffusionSymbol"}],"}"}],"=",RowBox[
{"{",RowBox[{"t",",","dt",",","dB",",","\[Rho]",",","\[Mu]",",","\[Sigma]"}],"}"}]}]],
"Input",CellLabel -> "In[41]:= ",ExpressionUUID -> "9e159cea-79aa-418a-bfa7-5cac3ed509b1"],Cell[
BoxData[
RowBox[{"{",RowBox[{"t",",","dt",",","dB",",","\[Rho]",",","\[Mu]",",","\[Sigma]"}],"}"}],
StandardForm],"Output",CellLabel -> "Out[41]= ",ExpressionUUID -> "9f674cb8-2159-4d26-8d98-751abdc2494d"]},
Open],ExpressionUUID -> "7ac850a9-1769-408f-9282-46766734b0f6"],Cell[
TextData[{"List"," ","of"," ","all"," ","of"," ","the"," ","symbols"," ","defined"," ","in"," ","the"," ","package",":"}],
"Text",ExpressionUUID -> "66176eb8-2ffa-40c7-b0fa-7653d52cc202"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Names","[","\"ItosLemma`*\"","]"}]],"Input",CellLabel -> "In[42]:= ",
ExpressionUUID -> "378816b4-7b63-4db3-a94a-8d3ece1129bf"],Cell[
BoxData[RowBox[{"{",RowBox[
{"\"BrownianIncrement\"",",","\"BrownianList\"",",","\"CorrelationSymbol\"",",","\"Diffusion\"",",","\"DiffusionSymbol\"",",","\"Drift\"",",","\"DriftSymbol\"",",","\"ExponentialItoMake\"",",","\"ExponentialItoMakeFromItoD\"",",","\"IncludeArguments\"",",","\"ItoD\"",",","\"ItoMake\"",",","\"ItoMakeFromItoD\"",",","\"ItosLemma\"",",","\"OrthogonalBrownians\"",",","\"RelativeItoD\"",",","\"RelativeItoMake\"",",","\"RelativeItoMakeFromItoD\"",",","\"Scalarize\"",",","\"SuppressTime\"",",","\"TimeIncrement\"",",","\"TimeSymbol\"",",","\"VectorItoMake\""}],"}"}],
StandardForm],"Output",CellLabel -> "Out[42]= ",ExpressionUUID -> "dfda1a40-6f03-4884-8716-2125be1a3498"]},
Open],ExpressionUUID -> "cd9c8f66-d4e2-4dd6-885a-b8bb2570e509"],Cell[
"\<Some usage statements\>",
"Text",ExpressionUUID -> "f59e3968-3a82-427c-85cf-b6eae7d3e529"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"?","ItoMake"}]],"Input",CellLabel -> "In[43]:= ",ExpressionUUID -> "8acb105d-5970-44c8-b5fd-ce1166548b05"],Cell[
BoxData[
InterpretationBox[StyleBox[FrameBox[DynamicModuleBox[{Set[System`InformationDump`open$$,
False],Set[System`InformationDump`mouseOver$$,False]},PaneSelectorBox[{True -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",BaseStyle -> None,
StripOnInput -> False],FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"ItoMake[x[args], mu, sigma] associates a rule with the\\n(ultimate) head of the x[args]. The TimeSymbol should be one of the\\narguments; for example, ItoMake[x[t], \[Mu], \[Sigma]]. For multiple\\nBrownians, sigma may be a list.\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{PaneBox[
TagBox[GridBox[{{StyleBox[TagBox[TooltipBox[StyleBox["\" Definitions\"","InformationRowLabel",
StripOnInput -> False],"\"Definitions\"",TooltipStyle -> "TextStyling"],Function[
Annotation[Slot[1],"Definitions","Tooltip"]]],"DialogStyle",StripOnInput -> False]},{TemplateBox[
{"\"\[ThinSpace]\"",GridBox[{{RowBox[{RowBox[{"ItoMake","[",RowBox[{RowBox[{"ItosLemma`Private`x_","[","ItosLemma`Private`args__","]"}],",","ItosLemma`Private`mu_",",","ItosLemma`Private`sig_"}],"]"}],":=",RowBox[
{"Module","[",RowBox[{RowBox[{"{",RowBox[{"ItosLemma`Private`t",",","ItosLemma`Private`dt",",","ItosLemma`Private`dB",",","ItosLemma`Private`diffusion",",","ItosLemma`Private`head",",","ItosLemma`Private`lhs"}],"}"}],",",RowBox[
{RowBox[{RowBox[{"{",RowBox[{"ItosLemma`Private`t",",","ItosLemma`Private`dt",",","ItosLemma`Private`dB"}],"}"}],"=",RowBox[
{"{",RowBox[{"TimeSymbol",",","TimeIncrement",",","BrownianIncrement"}],"}"}]}],";",RowBox[
{"If","[",RowBox[{RowBox[{"FreeQ","[",RowBox[{RowBox[{"{","ItosLemma`Private`args","}"}],",","ItosLemma`Private`t"}],"]"}],",",RowBox[
{RowBox[{"Message","[",RowBox[{StyleBox[RowBox[{"ItoMake","::","notime"}],"MessageName"],",","ItosLemma`Private`t",",",RowBox[
{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}]}],"]"}],";",RowBox[{"Return","[","$Failed","]"}]}]}],"]"}],";",RowBox[
{"If","[",RowBox[{RowBox[{"MatchQ","[",RowBox[{"ItosLemma`Private`x",",",RowBox[{"ItosLemma`Private`t","|","ItosLemma`Private`dt","|","ItosLemma`Private`dB"}]}],"]"}],",",RowBox[
{RowBox[{"Message","[",RowBox[{StyleBox[RowBox[{"ItoMake","::","badhead"}],"MessageName"],",",RowBox[
{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}],",","ItosLemma`Private`t",",","ItosLemma`Private`dt",",","ItosLemma`Private`dB"}],"]"}],";",RowBox[
{"Return","[","$Failed","]"}]}]}],"]"}],";",RowBox[{"If","[",RowBox[{RowBox[{"MemberQ","[",RowBox[
{RowBox[{"{","ItosLemma`Private`args","}"}],",",RowBox[{"ItosLemma`Private`dt","|","ItosLemma`Private`dB"}],",","\[Infinity]"}],"]"}],",",RowBox[
{RowBox[{"Message","[",RowBox[{StyleBox[RowBox[{"ItoMake","::","badarg"}],"MessageName"],",",RowBox[
{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}],",","ItosLemma`Private`dt",",","ItosLemma`Private`dB"}],"]"}],";",RowBox[
{"Return","[","$Failed","]"}]}]}],"]"}],";",RowBox[{"ItosLemma`Private`diffusion","=",RowBox[
{"Switch","[",RowBox[{"ItosLemma`Private`sig",",","_List",",",RowBox[{"ItosLemma`Private`sig",".",RowBox[
{"Array","[",RowBox[{RowBox[{SubscriptBox["ItosLemma`Private`dB","#1"],"&"}],",",RowBox[
{"Length","[","ItosLemma`Private`sig","]"}]}],"]"}]}],",","_",",",RowBox[{"ItosLemma`Private`sig"," ",SubscriptBox[
"ItosLemma`Private`dB","1"]}]}],"]"}]}],";",RowBox[{"ItosLemma`Private`head","=",RowBox[
{RowBox[{"FixedPointList","[",RowBox[{"Head",",","ItosLemma`Private`x"}],"]"}],"\[LeftDoubleBracket]",RowBox[
{"-","3"}],"\[RightDoubleBracket]"}]}],";",RowBox[{"ItosLemma`Private`lhs","=",RowBox[
{"Block","[",RowBox[{RowBox[{"Evaluate","[",RowBox[{"{","ItosLemma`Private`head","}"}],"]"}],",",RowBox[
{"Hold","[",RowBox[{"Evaluate","[",RowBox[{RowBox[{"(",RowBox[{RowBox[{"If","[",RowBox[
{RowBox[{"#1","===","ItosLemma`Private`t"}],",",RowBox[{"#1","+","ItosLemma`Private`dt"}],",",RowBox[
{"Pattern","[",RowBox[{"#1",",","_"}],"]"}]}],"]"}],"&"}],")"}],"/@",RowBox[{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}]}],"]"}],"]"}]}],"]"}]}],";",RowBox[
{RowBox[{"Set","@@",RowBox[{"Append","[",RowBox[{"ItosLemma`Private`lhs",",",RowBox[
{RowBox[{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}],"+",RowBox[{"ItosLemma`Private`mu"," ","ItosLemma`Private`dt"}],"+","ItosLemma`Private`diffusion"}]}],"]"}]}],"-",RowBox[
{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}]}]}]}],"]"}]}]},{" "},{RowBox[
{RowBox[{"ItoMake","[",RowBox[{RowBox[{"ItosLemma`Private`x_","[","ItosLemma`Private`args__","]"}],",","ItosLemma`Private`mu_",",","ItosLemma`Private`sig_",",","ItosLemma`Private`n_Integer",",",RowBox[
{"ItosLemma`Private`opts___","?","OptionQ"}]}],"]"}],":=",RowBox[{RowBox[{"(",RowBox[
{RowBox[{"ItoMake","[",RowBox[{RowBox[{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}],",","##1"}],"]"}],"&"}],")"}],"@@",RowBox[
{"ItosLemma`Private`makeargs","[",RowBox[{RowBox[{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}],",","ItosLemma`Private`mu",",","ItosLemma`Private`sig",",","ItosLemma`Private`n",",","ItosLemma`Private`opts"}],"]"}]}]}]},{" "},{RowBox[
{RowBox[{"ItoMake","[",RowBox[{"ItosLemma`Private`x_","[","ItosLemma`Private`args__","]"}],"]"}],":=",RowBox[
{"ItoMake","[",RowBox[{RowBox[{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}],",",SubscriptBox[
"DriftSymbol","ItosLemma`Private`x"],",",SubscriptBox["DiffusionSymbol","ItosLemma`Private`x"]}],"]"}]}]},{" "},{RowBox[
{RowBox[{"ItoMake","[",RowBox[{RowBox[{"ItosLemma`Private`x_","[","ItosLemma`Private`args__","]"}],",","ItosLemma`Private`n_Integer",",",RowBox[
{"ItosLemma`Private`opts___","?","OptionQ"}]}],"]"}],":=",RowBox[{"ItoMake","[",RowBox[
{RowBox[{"ItosLemma`Private`x","[","ItosLemma`Private`args","]"}],",","DriftSymbol",",","DiffusionSymbol",",","ItosLemma`Private`n",",","ItosLemma`Private`opts"}],"]"}]}]},{" "}},
GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}]},
"RowDefault"]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}],"Column"],
FrameMargins -> {{6,0},{3,6}}],"\"\""},{PaneBox[GridBox[{{DynamicModuleBox[{Set[System`InformationDump`open$$,
{False,False,False,False,False,False}]},StyleBox[GridBox[{{TagBox[TooltipBox[StyleBox[
"\" Options\"","InformationRowLabel",StripOnInput -> False],"\"Options\"",TooltipStyle -> "TextStyling"],
Function[Annotation[Slot[1],"Options","Tooltip"]]],RowBox[{"IncludeArguments","\[Rule]","False"}]},{TagBox[
TooltipBox[StyleBox["\" Full Name\"","InformationRowLabel",StripOnInput -> False],
"\"FullName\"",TooltipStyle -> "TextStyling"],Function[Annotation[Slot[1],"FullName",
"Tooltip"]]],"\"ItosLemma`ItoMake\""}},AutoDelete -> False,GridBoxItemSize -> {"Columns" -> {Automatic,Automatic}},
GridBoxAlignment -> {"Columns" -> {Right,Left}},RowSpacings -> 2,GridBoxDividers -> None],
"DialogStyle",StripOnInput -> False],RuleDelayed[DynamicModuleValues,{}],ExpressionUUID -> "ba92dd38-4754-4f7d-acc2-1f09a8f17e5d"]}},
GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",GridBoxDividers -> {"Columns" -> {{False}},"Rows" -> {{False}}},
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},RowSpacings -> 9],
FrameMargins -> {{6,6},{6,3}}],""},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","UpPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,False]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"],False -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",StripOnInput -> False],
FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"ItoMake[x[args], mu, sigma] associates a rule with the\\n(ultimate) head of the x[args]. The TimeSymbol should be one of the\\narguments; for example, ItoMake[x[t], \[Mu], \[Sigma]]. For multiple\\nBrownians, sigma may be a list.\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{ItemBox[
TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","DownPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps",
"DownPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],RuleDelayed[
ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,True]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"]},Dynamic[System`InformationDump`open$$],
ImageSize -> Automatic,FrameMargins -> 0,BaselinePosition -> Baseline],ExpressionUUID -> "83cec318-c2b1-469c-a6fc-4123a3c900a8"],
BaseStyle -> "InformationGridFrame",StripOnInput -> False],"InformationGridPlain",
StripOnInput -> False],InformationData[Association["ObjectType" -> "Symbol","Usage" -> "ItoMake[x[args], mu, sigma] associates a rule with the\n(ultimate) head of the x[args]. The TimeSymbol should be one of the\narguments; for example, ItoMake[x[t], \[Mu], \[Sigma]]. For multiple\nBrownians, sigma may be a list.",
"Documentation" -> None,"OwnValues" -> None,"UpValues" -> None,"DownValues" -> Information`InformationValueForm[
DownValues,ItoMake,{RuleDelayed[ItoMake[Pattern[ItosLemma`Private`x,Blank[]][Pattern[
ItosLemma`Private`args,BlankSequence[]]],Pattern[ItosLemma`Private`mu,Blank[]],Pattern[
ItosLemma`Private`sig,Blank[]]],Module[{ItosLemma`Private`t,ItosLemma`Private`dt,ItosLemma`Private`dB,ItosLemma`Private`diffusion,ItosLemma`Private`head,ItosLemma`Private`lhs},
CompoundExpression[Set[{ItosLemma`Private`t,ItosLemma`Private`dt,ItosLemma`Private`dB},
{TimeSymbol,TimeIncrement,BrownianIncrement}],If[FreeQ[{ItosLemma`Private`args},ItosLemma`Private`t],
CompoundExpression[Message[MessageName[ItoMake,"notime"],ItosLemma`Private`t,ItosLemma`Private`x[
ItosLemma`Private`args]],Return[$Failed]]],If[MatchQ[ItosLemma`Private`x,Alternatives[
ItosLemma`Private`t,ItosLemma`Private`dt,ItosLemma`Private`dB]],CompoundExpression[
Message[MessageName[ItoMake,"badhead"],ItosLemma`Private`x[ItosLemma`Private`args],
ItosLemma`Private`t,ItosLemma`Private`dt,ItosLemma`Private`dB],Return[$Failed]]],
If[MemberQ[{ItosLemma`Private`args},Alternatives[ItosLemma`Private`dt,ItosLemma`Private`dB],
Infinity],CompoundExpression[Message[MessageName[ItoMake,"badarg"],ItosLemma`Private`x[
ItosLemma`Private`args],ItosLemma`Private`dt,ItosLemma`Private`dB],Return[$Failed]]],
Set[ItosLemma`Private`diffusion,Switch[ItosLemma`Private`sig,Blank[List],Dot[ItosLemma`Private`sig,
Array[Function[Subscript[ItosLemma`Private`dB,Slot[1]]],Length[ItosLemma`Private`sig]]],
Blank[],Times[ItosLemma`Private`sig,Subscript[ItosLemma`Private`dB,1]]]],Set[ItosLemma`Private`head,
Part[FixedPointList[Head,ItosLemma`Private`x],-3]],Set[ItosLemma`Private`lhs,Block[
Evaluate[{ItosLemma`Private`head}],Hold[Evaluate[Map[Function[If[SameQ[Slot[1],ItosLemma`Private`t],
Plus[Slot[1],ItosLemma`Private`dt],Pattern[Slot[1],Blank[]]]],ItosLemma`Private`x[
ItosLemma`Private`args]]]]]],Plus[Apply[Set,Append[ItosLemma`Private`lhs,Plus[ItosLemma`Private`x[
ItosLemma`Private`args],Times[ItosLemma`Private`mu,ItosLemma`Private`dt],ItosLemma`Private`diffusion]]],
Times[-1,ItosLemma`Private`x[ItosLemma`Private`args]]]]]],RuleDelayed[ItoMake[Pattern[
ItosLemma`Private`x,Blank[]][Pattern[ItosLemma`Private`args,BlankSequence[]]],Pattern[
ItosLemma`Private`mu,Blank[]],Pattern[ItosLemma`Private`sig,Blank[]],Pattern[ItosLemma`Private`n,
Blank[Integer]],PatternTest[Pattern[ItosLemma`Private`opts,BlankNullSequence[]],OptionQ]],
Apply[Function[ItoMake[ItosLemma`Private`x[ItosLemma`Private`args],SlotSequence[1]]],
ItosLemma`Private`makeargs[ItosLemma`Private`x[ItosLemma`Private`args],ItosLemma`Private`mu,
ItosLemma`Private`sig,ItosLemma`Private`n,ItosLemma`Private`opts]]],RuleDelayed[ItoMake[
Pattern[ItosLemma`Private`x,Blank[]][Pattern[ItosLemma`Private`args,BlankSequence[]]]],
ItoMake[ItosLemma`Private`x[ItosLemma`Private`args],Subscript[DriftSymbol,ItosLemma`Private`x],
Subscript[DiffusionSymbol,ItosLemma`Private`x]]],RuleDelayed[ItoMake[Pattern[ItosLemma`Private`x,
Blank[]][Pattern[ItosLemma`Private`args,BlankSequence[]]],Pattern[ItosLemma`Private`n,
Blank[Integer]],PatternTest[Pattern[ItosLemma`Private`opts,BlankNullSequence[]],OptionQ]],
ItoMake[ItosLemma`Private`x[ItosLemma`Private`args],DriftSymbol,DiffusionSymbol,ItosLemma`Private`n,
ItosLemma`Private`opts]]}],"SubValues" -> None,"DefaultValues" -> None,"NValues" -> None,
"FormatValues" -> None,"Options" -> {IncludeArguments -> False},"Attributes" -> {},
"FullName" -> "ItosLemma`ItoMake"],False]]],"Output",CellLabel -> "Out[43]= ",ExpressionUUID -> "e3f8f6ea-c66c-47ed-8cf9-4ce008ba1f8f"]},
Open],ExpressionUUID -> "7f26f866-2ab0-49e8-9c15-c488a6b615e8"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"?","ItoD"}]],"Input",CellLabel -> "In[44]:= ",ExpressionUUID -> "a7474be7-5913-4a2b-a582-e01dbf3f9d49"],Cell[
BoxData[
InterpretationBox[StyleBox[FrameBox[DynamicModuleBox[{Set[System`InformationDump`open$$,
False],Set[System`InformationDump`mouseOver$$,False]},PaneSelectorBox[{True -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",BaseStyle -> None,
StripOnInput -> False],FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"ItoD[expr] applies Ito's lemma to expr. ItoD takes the\\noption OrthogonalBrownians.\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{PaneBox[
TagBox[GridBox[{{StyleBox[TagBox[TooltipBox[StyleBox["\" Definitions\"","InformationRowLabel",
StripOnInput -> False],"\"Definitions\"",TooltipStyle -> "TextStyling"],Function[
Annotation[Slot[1],"Definitions","Tooltip"]]],"DialogStyle",StripOnInput -> False]},{TemplateBox[
{"\"\[ThinSpace]\"",GridBox[{{RowBox[{RowBox[{"ItoD","[",RowBox[{"ItosLemma`Private`expr_",",",RowBox[
{"ItosLemma`Private`opts___","?","OptionQ"}]}],"]"}],":=",RowBox[{"Module","[",RowBox[
{RowBox[{"{",RowBox[{"ItosLemma`Private`t",",","ItosLemma`Private`dt",",","ItosLemma`Private`dB",",","ItosLemma`Private`rho",",","ItosLemma`Private`suppress",",","ItosLemma`Private`ortho",",","ItosLemma`Private`zerorule",",","ItosLemma`Private`dtexpr",",","ItosLemma`Private`brownians",",","ItosLemma`Private`dtime",",","ItosLemma`Private`dbrown",",","ItosLemma`Private`d2brown",",","ItosLemma`Private`timedrift",",","ItosLemma`Private`diffusion",",","ItosLemma`Private`jensen"}],"}"}],",",RowBox[
{RowBox[{RowBox[{"{",RowBox[{"ItosLemma`Private`t",",","ItosLemma`Private`dt",",","ItosLemma`Private`dB",",","ItosLemma`Private`rho"}],"}"}],"=",RowBox[
{"{",RowBox[{"TimeSymbol",",","TimeIncrement",",","BrownianIncrement",",","CorrelationSymbol"}],"}"}]}],";",RowBox[
{RowBox[{"{",RowBox[{"ItosLemma`Private`suppress",",","ItosLemma`Private`ortho"}],"}"}],"=",RowBox[
{RowBox[{RowBox[{"{",RowBox[{"SuppressTime",",","OrthogonalBrownians"}],"}"}],"/.","\[VeryThinSpace]",RowBox[
{"{","ItosLemma`Private`opts","}"}]}],"/.","\[VeryThinSpace]",RowBox[{"Options","[","ItoD","]"}]}]}],";",RowBox[
{"ItosLemma`Private`zerorule","=",RowBox[{RowBox[{SubscriptBox["ItosLemma`Private`dB",
"_"],"|","ItosLemma`Private`dt"}],"\[Rule]","0"}]}],";",RowBox[{"ItosLemma`Private`dtexpr","=",RowBox[
{"ItosLemma`Private`expr","/.","\[VeryThinSpace]",RowBox[{"ItosLemma`Private`t","\[Rule]",RowBox[
{"ItosLemma`Private`t","+","ItosLemma`Private`dt"}]}]}]}],";",RowBox[{"ItosLemma`Private`brownians","=",RowBox[
{"Union","[",RowBox[{"Cases","[",RowBox[{"ItosLemma`Private`dtexpr",",",SubscriptBox[
"ItosLemma`Private`dB","_"],",",RowBox[{"{",RowBox[{"0",",","\[Infinity]"}],"}"}]}],"]"}],"]"}]}],";",RowBox[
{"If","[",RowBox[{RowBox[{"ItosLemma`Private`brownians","===",RowBox[{"{","}"}]}],",",RowBox[
{"ItosLemma`Private`brownians","=",RowBox[{"{",SubscriptBox["ItosLemma`Private`dB",
"1"],"}"}]}]}],"]"}],";",RowBox[{"ItosLemma`Private`dtime","=",RowBox[{SubscriptBox[
"\[PartialD]",RowBox[{"ItosLemma`Private`dt"}]],"ItosLemma`Private`dtexpr"}]}],";",RowBox[
{"ItosLemma`Private`dbrown","=",RowBox[{RowBox[{"(",RowBox[{RowBox[{SubscriptBox[
"\[PartialD]",RowBox[{"#1"}]],"ItosLemma`Private`dtexpr"}],"&"}],")"}],"/@","ItosLemma`Private`brownians"}]}],";",RowBox[
{"ItosLemma`Private`d2brown","=",RowBox[{RowBox[{"(",RowBox[{RowBox[{SubscriptBox[
"\[PartialD]",RowBox[{"#1"}]],"ItosLemma`Private`dbrown"}],"&"}],")"}],"/@","ItosLemma`Private`brownians"}]}],";",RowBox[
{"ItosLemma`Private`timedrift","=",RowBox[{RowBox[{"(",RowBox[{"ItosLemma`Private`dtime","/.","\[VeryThinSpace]","ItosLemma`Private`zerorule"}],")"}]," ","ItosLemma`Private`dt"}]}],";",RowBox[
{"ItosLemma`Private`diffusion","=",RowBox[{RowBox[{"(",RowBox[{"ItosLemma`Private`dbrown","/.","\[VeryThinSpace]","ItosLemma`Private`zerorule"}],")"}],".","ItosLemma`Private`brownians"}]}],";",RowBox[
{"ItosLemma`Private`jensen","=",RowBox[{RowBox[{FractionBox["1","2"]," ",RowBox[{"Expand","[",RowBox[
{"ItosLemma`Private`brownians",".",RowBox[{"(",RowBox[{"ItosLemma`Private`d2brown","/.","\[VeryThinSpace]","ItosLemma`Private`zerorule"}],")"}],".","ItosLemma`Private`brownians"}],"]"}]}],"/.","\[VeryThinSpace]",RowBox[
{"{",RowBox[{RowBox[{SubsuperscriptBox["ItosLemma`Private`dB","_","2"],"\[Rule]","ItosLemma`Private`dt"}],",",RowBox[
{RowBox[{SubscriptBox["ItosLemma`Private`dB","ItosLemma`Private`i_"]," ",SubscriptBox[
"ItosLemma`Private`dB","ItosLemma`Private`j_"]}],"\[Rule]",RowBox[{"If","[",RowBox[
{RowBox[{"TrueQ","[","ItosLemma`Private`ortho","]"}],",","0",",",RowBox[{SubscriptBox[
"ItosLemma`Private`rho",RowBox[{"ItosLemma`Private`i",",","ItosLemma`Private`j"}]]," ","ItosLemma`Private`dt"}]}],"]"}]}]}],"}"}]}]}],";",RowBox[
{RowBox[{"ItosLemma`Private`diffusion","+",RowBox[{"Collect","[",RowBox[{RowBox[{"ItosLemma`Private`timedrift","+","ItosLemma`Private`jensen"}],",","ItosLemma`Private`dt"}],"]"}]}],"/.","\[VeryThinSpace]",RowBox[
{"If","[",RowBox[{RowBox[{"TrueQ","[","ItosLemma`Private`suppress","]"}],",",RowBox[
{RowBox[{"ItosLemma`Private`f_","[","ItosLemma`Private`t","]"}],"\[Rule]","ItosLemma`Private`f"}],",",RowBox[
{"{","}"}]}],"]"}]}]}]}],"]"}]}]},{" "}},GridBoxAlignment -> {"Columns" -> {{Left}}},
DefaultBaseStyle -> "Column",GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}]},
"RowDefault"]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}],"Column"],
FrameMargins -> {{6,0},{3,6}}],"\"\""},{PaneBox[GridBox[{{DynamicModuleBox[{Set[System`InformationDump`open$$,
{False,False,False,False,False,False}]},StyleBox[GridBox[{{TagBox[TooltipBox[StyleBox[
"\" Options\"","InformationRowLabel",StripOnInput -> False],"\"Options\"",TooltipStyle -> "TextStyling"],
Function[Annotation[Slot[1],"Options","Tooltip"]]],RowBox[{"{",RowBox[{RowBox[{"OrthogonalBrownians","\[Rule]","True"}],",",RowBox[
{"SuppressTime","\[Rule]","True"}]}],"}"}]},{TagBox[TooltipBox[StyleBox["\" Attributes\"",
"InformationRowLabel",StripOnInput -> False],"\"Attributes\"",TooltipStyle -> "TextStyling"],
Function[Annotation[Slot[1],"Attributes","Tooltip"]]],RowBox[{"{","Listable","}"}]},{TagBox[
TooltipBox[StyleBox["\" Full Name\"","InformationRowLabel",StripOnInput -> False],
"\"FullName\"",TooltipStyle -> "TextStyling"],Function[Annotation[Slot[1],"FullName",
"Tooltip"]]],"\"ItosLemma`ItoD\""}},AutoDelete -> False,GridBoxItemSize -> {"Columns" -> {Automatic,Automatic}},
GridBoxAlignment -> {"Columns" -> {Right,Left}},RowSpacings -> 2,GridBoxDividers -> None],
"DialogStyle",StripOnInput -> False],RuleDelayed[DynamicModuleValues,{}]]}},GridBoxAlignment -> {"Columns" -> {{Left}}},
DefaultBaseStyle -> "Column",GridBoxDividers -> {"Columns" -> {{False}},"Rows" -> {{False}}},
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},RowSpacings -> 9],
FrameMargins -> {{6,6},{6,3}}],""},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","UpPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,False]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"],False -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",StripOnInput -> False],
FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"ItoD[expr] applies Ito's lemma to expr. ItoD takes the\\noption OrthogonalBrownians.\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{ItemBox[
TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","DownPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps",
"DownPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],RuleDelayed[
ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,True]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"]},Dynamic[System`InformationDump`open$$],
ImageSize -> Automatic,FrameMargins -> 0,BaselinePosition -> Baseline],RuleDelayed[
DynamicModuleValues,{}],ExpressionUUID -> "e940d361-a64d-411f-868c-0a130ea99812"],
BaseStyle -> "InformationGridFrame",StripOnInput -> False],"InformationGridPlain",
StripOnInput -> False],InformationData[Association["ObjectType" -> "Symbol","Usage" -> "ItoD[expr] applies Ito's lemma to expr. ItoD takes the\noption OrthogonalBrownians.",
"Documentation" -> None,"OwnValues" -> None,"UpValues" -> None,"DownValues" -> Information`InformationValueForm[
DownValues,ItoD,{RuleDelayed[ItoD[Pattern[ItosLemma`Private`expr,Blank[]],PatternTest[
Pattern[ItosLemma`Private`opts,BlankNullSequence[]],OptionQ]],Module[{ItosLemma`Private`t,ItosLemma`Private`dt,ItosLemma`Private`dB,ItosLemma`Private`rho,ItosLemma`Private`suppress,ItosLemma`Private`ortho,ItosLemma`Private`zerorule,ItosLemma`Private`dtexpr,ItosLemma`Private`brownians,ItosLemma`Private`dtime,ItosLemma`Private`dbrown,ItosLemma`Private`d2brown,ItosLemma`Private`timedrift,ItosLemma`Private`diffusion,ItosLemma`Private`jensen},
CompoundExpression[Set[{ItosLemma`Private`t,ItosLemma`Private`dt,ItosLemma`Private`dB,ItosLemma`Private`rho},
{TimeSymbol,TimeIncrement,BrownianIncrement,CorrelationSymbol}],Set[{ItosLemma`Private`suppress,ItosLemma`Private`ortho},
ReplaceAll[ReplaceAll[{SuppressTime,OrthogonalBrownians},{ItosLemma`Private`opts}],
Options[ItoD]]],Set[ItosLemma`Private`zerorule,Alternatives[Subscript[ItosLemma`Private`dB,
Blank[]],ItosLemma`Private`dt] -> 0],Set[ItosLemma`Private`dtexpr,ReplaceAll[ItosLemma`Private`expr,
ItosLemma`Private`t -> Plus[ItosLemma`Private`t,ItosLemma`Private`dt]]],Set[ItosLemma`Private`brownians,
Union[Cases[ItosLemma`Private`dtexpr,Subscript[ItosLemma`Private`dB,Blank[]],{0,Infinity}]]],
If[SameQ[ItosLemma`Private`brownians,{}],Set[ItosLemma`Private`brownians,{Subscript[
ItosLemma`Private`dB,1]}]],Set[ItosLemma`Private`dtime,D[ItosLemma`Private`dtexpr,
ItosLemma`Private`dt]],Set[ItosLemma`Private`dbrown,Map[Function[D[ItosLemma`Private`dtexpr,
Slot[1]]],ItosLemma`Private`brownians]],Set[ItosLemma`Private`d2brown,Map[Function[
D[ItosLemma`Private`dbrown,Slot[1]]],ItosLemma`Private`brownians]],Set[ItosLemma`Private`timedrift,
Times[ReplaceAll[ItosLemma`Private`dtime,ItosLemma`Private`zerorule],ItosLemma`Private`dt]],
Set[ItosLemma`Private`diffusion,Dot[ReplaceAll[ItosLemma`Private`dbrown,ItosLemma`Private`zerorule],
ItosLemma`Private`brownians]],Set[ItosLemma`Private`jensen,ReplaceAll[Times[Times[
1,Power[2,-1]],Expand[Dot[ItosLemma`Private`brownians,ReplaceAll[ItosLemma`Private`d2brown,
ItosLemma`Private`zerorule],ItosLemma`Private`brownians]]],{Power[Subscript[ItosLemma`Private`dB,
Blank[]],2] -> ItosLemma`Private`dt,Times[Subscript[ItosLemma`Private`dB,Pattern[
ItosLemma`Private`i,Blank[]]],Subscript[ItosLemma`Private`dB,Pattern[ItosLemma`Private`j,
Blank[]]]] -> If[TrueQ[ItosLemma`Private`ortho],0,Times[Subscript[ItosLemma`Private`rho,
ItosLemma`Private`i,ItosLemma`Private`j],ItosLemma`Private`dt]]}]],ReplaceAll[Plus[
ItosLemma`Private`diffusion,Collect[Plus[ItosLemma`Private`timedrift,ItosLemma`Private`jensen],
ItosLemma`Private`dt]],If[TrueQ[ItosLemma`Private`suppress],Pattern[ItosLemma`Private`f,
Blank[]][ItosLemma`Private`t] -> ItosLemma`Private`f,{}]]]]]}],"SubValues" -> None,
"DefaultValues" -> None,"NValues" -> None,"FormatValues" -> None,"Options" -> {OrthogonalBrownians -> True,SuppressTime -> True},
"Attributes" -> {Listable},"FullName" -> "ItosLemma`ItoD"],False]],StandardForm],
"Output",CellLabel -> "Out[44]= ",ExpressionUUID -> "79ebdf41-44e9-496f-bfa6-b239c20c9442"]},
Open],ExpressionUUID -> "e9f42655-f0ca-42eb-aef1-4341a1d457da"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"?","Drift"}]],"Input",CellLabel -> "In[45]:= ",ExpressionUUID -> "4d70610a-b9df-4787-963d-f039cef34434"],Cell[
BoxData[
InterpretationBox[StyleBox[FrameBox[DynamicModuleBox[{Set[System`InformationDump`open$$,
False],Set[System`InformationDump`mouseOver$$,False]},PaneSelectorBox[{True -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",BaseStyle -> None,
StripOnInput -> False],FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"Drift[expr] returns the drift of an Ito process.\"","InformationUsageText",
LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{PaneBox[
TagBox[GridBox[{{StyleBox[TagBox[TooltipBox[StyleBox["\" Definitions\"","InformationRowLabel",
StripOnInput -> False],"\"Definitions\"",TooltipStyle -> "TextStyling"],Function[
Annotation[Slot[1],"Definitions","Tooltip"]]],"DialogStyle",StripOnInput -> False]},{TemplateBox[
{"\"\[ThinSpace]\"",GridBox[{{RowBox[{RowBox[{"Drift","[","ItosLemma`Private`expr_","]"}],":=",RowBox[
{"Coefficient","[",RowBox[{"ItosLemma`Private`expr",",","TimeIncrement"}],"]"}]}]},{" "}},
GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}]},
"RowDefault"]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}],"Column"],
FrameMargins -> {{6,0},{3,6}}],"\"\""},{PaneBox[GridBox[{{DynamicModuleBox[{Set[System`InformationDump`open$$,
{False,False,False,False,False,False}]},StyleBox[GridBox[{{TagBox[TooltipBox[StyleBox[
"\" Full Name\"","InformationRowLabel",StripOnInput -> False],"\"FullName\"",TooltipStyle -> "TextStyling"],
Function[Annotation[Slot[1],"FullName","Tooltip"]]],"\"ItosLemma`Drift\""}},AutoDelete -> False,
GridBoxItemSize -> {"Columns" -> {Automatic,Automatic}},GridBoxAlignment -> {"Columns" -> {Right,Left}},
RowSpacings -> 2,GridBoxDividers -> None],"DialogStyle",StripOnInput -> False],RuleDelayed[
DynamicModuleValues,{}]]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxDividers -> {"Columns" -> {{False}},"Rows" -> {{False}}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
RowSpacings -> 9],FrameMargins -> {{6,6},{6,3}}],""},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[
{False -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpener"]],True -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,False]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"],False -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",StripOnInput -> False],
FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"Drift[expr] returns the drift of an Ito process.\"","InformationUsageText",
LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{ItemBox[
TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","DownPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps",
"DownPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],RuleDelayed[
ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,True]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"]},Dynamic[System`InformationDump`open$$],
ImageSize -> Automatic,FrameMargins -> 0,BaselinePosition -> Baseline],RuleDelayed[
DynamicModuleValues,{}],ExpressionUUID -> "995ef18d-87af-4353-bc14-b8f6464f6a7e"],
BaseStyle -> "InformationGridFrame",StripOnInput -> False],"InformationGridPlain",
StripOnInput -> False],InformationData[Association["ObjectType" -> "Symbol","Usage" -> "Drift[expr] returns the drift of an Ito process.",
"Documentation" -> None,"OwnValues" -> None,"UpValues" -> None,"DownValues" -> Information`InformationValueForm[
DownValues,Drift,{RuleDelayed[Drift[Pattern[ItosLemma`Private`expr,Blank[]]],Coefficient[
ItosLemma`Private`expr,TimeIncrement]]}],"SubValues" -> None,"DefaultValues" -> None,
"NValues" -> None,"FormatValues" -> None,"Options" -> None,"Attributes" -> {},"FullName" -> "ItosLemma`Drift"],
False]],StandardForm],"Output",CellLabel -> "Out[45]= ",ExpressionUUID -> "eadb67a0-67eb-4b86-80e6-0fa63257750c"]},
Open],ExpressionUUID -> "d20b9c98-4148-40d0-9807-54854e231b7c"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"?","Diffusion"}]],"Input",CellLabel -> "In[46]:= ",ExpressionUUID -> "2fb4fa0b-6559-444d-8370-e6fe996e20ee"],Cell[
BoxData[
InterpretationBox[StyleBox[FrameBox[DynamicModuleBox[{Set[System`InformationDump`open$$,
False],Set[System`InformationDump`mouseOver$$,False]},PaneSelectorBox[{True -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",BaseStyle -> None,
StripOnInput -> False],FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"Diffusion[expr] returns the diffusion of an Ito\\nprocess. Diffusion takes the options BrownianList and Scalarize.\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{PaneBox[
TagBox[GridBox[{{StyleBox[TagBox[TooltipBox[StyleBox["\" Definitions\"","InformationRowLabel",
StripOnInput -> False],"\"Definitions\"",TooltipStyle -> "TextStyling"],Function[
Annotation[Slot[1],"Definitions","Tooltip"]]],"DialogStyle",StripOnInput -> False]},{TemplateBox[
{"\"\[ThinSpace]\"",GridBox[{{RowBox[{RowBox[{"Diffusion","[",RowBox[{"ItosLemma`Private`expr_",",",RowBox[
{"ItosLemma`Private`opts___","?","OptionQ"}]}],"]"}],":=",RowBox[{"Module","[",RowBox[
{RowBox[{"{",RowBox[{"ItosLemma`Private`dB",",","ItosLemma`Private`blist",",","ItosLemma`Private`scalar",",","ItosLemma`Private`found",",","ItosLemma`Private`brownians",",","ItosLemma`Private`lost"}],"}"}],",",RowBox[
{RowBox[{"ItosLemma`Private`dB","=","BrownianIncrement"}],";",RowBox[{RowBox[{"{",RowBox[
{"ItosLemma`Private`blist",",","ItosLemma`Private`scalar"}],"}"}],"=",RowBox[{RowBox[
{RowBox[{"{",RowBox[{"BrownianList",",","Scalarize"}],"}"}],"/.","\[VeryThinSpace]",RowBox[
{"{","ItosLemma`Private`opts","}"}]}],"/.","\[VeryThinSpace]",RowBox[{"Options","[","Diffusion","]"}]}]}],";",RowBox[
{"ItosLemma`Private`found","=",RowBox[{"Union","[",RowBox[{"Cases","[",RowBox[{"ItosLemma`Private`expr",",",SubscriptBox[
"ItosLemma`Private`dB","_"],",",RowBox[{"{",RowBox[{"0",",","\[Infinity]"}],"}"}]}],"]"}],"]"}]}],";",RowBox[
{"If","[",RowBox[{RowBox[{"TrueQ","[",RowBox[{"ItosLemma`Private`blist","===","Automatic"}],"]"}],",",RowBox[
{"ItosLemma`Private`brownians","=","ItosLemma`Private`found"}],",",RowBox[{RowBox[
{"ItosLemma`Private`brownians","=","ItosLemma`Private`blist"}],";",RowBox[{"ItosLemma`Private`lost","=",RowBox[
{"Complement","[",RowBox[{"ItosLemma`Private`found",",","ItosLemma`Private`blist"}],"]"}]}],";",RowBox[
{"If","[",RowBox[{RowBox[{"ItosLemma`Private`lost","=!=",RowBox[{"{","}"}]}],",",RowBox[
{"Message","[",RowBox[{StyleBox[RowBox[{"Diffusion","::","lost"}],"MessageName"],",","ItosLemma`Private`lost"}],"]"}]}],"]"}]}]}],"]"}],";",RowBox[
{"If","[",RowBox[{RowBox[{RowBox[{"TrueQ","[","ItosLemma`Private`scalar","]"}],"&&",RowBox[
{RowBox[{"Length","[","ItosLemma`Private`brownians","]"}],"===","1"}]}],",",RowBox[
{"Coefficient","[",RowBox[{"ItosLemma`Private`expr",",",RowBox[{"First","[","ItosLemma`Private`brownians","]"}]}],"]"}],",",RowBox[
{RowBox[{"(",RowBox[{RowBox[{"Coefficient","[",RowBox[{"ItosLemma`Private`expr",",","#1"}],"]"}],"&"}],")"}],"/@","ItosLemma`Private`brownians"}]}],"]"}]}]}],"]"}]}]},{" "}},
GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}]},
"RowDefault"]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}],"Column"],
FrameMargins -> {{6,0},{3,6}}],"\"\""},{PaneBox[GridBox[{{DynamicModuleBox[{Set[System`InformationDump`open$$,
{False,False,False,False,False,False}]},StyleBox[GridBox[{{TagBox[TooltipBox[StyleBox[
"\" Options\"","InformationRowLabel",StripOnInput -> False],"\"Options\"",TooltipStyle -> "TextStyling"],
Function[Annotation[Slot[1],"Options","Tooltip"]]],RowBox[{"{",RowBox[{RowBox[{"BrownianList","\[Rule]","Automatic"}],",",RowBox[
{"Scalarize","\[Rule]","True"}]}],"}"}]},{TagBox[TooltipBox[StyleBox["\" Full Name\"",
"InformationRowLabel",StripOnInput -> False],"\"FullName\"",TooltipStyle -> "TextStyling"],
Function[Annotation[Slot[1],"FullName","Tooltip"]]],"\"ItosLemma`Diffusion\""}},AutoDelete -> False,
GridBoxItemSize -> {"Columns" -> {Automatic,Automatic}},GridBoxAlignment -> {"Columns" -> {Right,Left}},
RowSpacings -> 2,GridBoxDividers -> None],"DialogStyle",StripOnInput -> False],RuleDelayed[
DynamicModuleValues,{}]]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxDividers -> {"Columns" -> {{False}},"Rows" -> {{False}}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
RowSpacings -> 9],FrameMargins -> {{6,6},{6,3}}],""},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[
{False -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpener"]],True -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,False]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"],False -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",StripOnInput -> False],
FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"Diffusion[expr] returns the diffusion of an Ito\\nprocess. Diffusion takes the options BrownianList and Scalarize.\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{ItemBox[
TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","DownPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps",
"DownPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],RuleDelayed[
ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,True]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"]},Dynamic[System`InformationDump`open$$],
ImageSize -> Automatic,FrameMargins -> 0,BaselinePosition -> Baseline],RuleDelayed[
DynamicModuleValues,{}],ExpressionUUID -> "24238bad-5638-4e45-9c72-d23d1ded1812"],
BaseStyle -> "InformationGridFrame",StripOnInput -> False],"InformationGridPlain",
StripOnInput -> False],InformationData[Association["ObjectType" -> "Symbol","Usage" -> "Diffusion[expr] returns the diffusion of an Ito\nprocess. Diffusion takes the options BrownianList and Scalarize.",
"Documentation" -> None,"OwnValues" -> None,"UpValues" -> None,"DownValues" -> Information`InformationValueForm[
DownValues,Diffusion,{RuleDelayed[Diffusion[Pattern[ItosLemma`Private`expr,Blank[]],
PatternTest[Pattern[ItosLemma`Private`opts,BlankNullSequence[]],OptionQ]],Module[
{ItosLemma`Private`dB,ItosLemma`Private`blist,ItosLemma`Private`scalar,ItosLemma`Private`found,ItosLemma`Private`brownians,ItosLemma`Private`lost},
CompoundExpression[Set[ItosLemma`Private`dB,BrownianIncrement],Set[{ItosLemma`Private`blist,ItosLemma`Private`scalar},
ReplaceAll[ReplaceAll[{BrownianList,Scalarize},{ItosLemma`Private`opts}],Options[
Diffusion]]],Set[ItosLemma`Private`found,Union[Cases[ItosLemma`Private`expr,Subscript[
ItosLemma`Private`dB,Blank[]],{0,Infinity}]]],If[TrueQ[SameQ[ItosLemma`Private`blist,
Automatic]],Set[ItosLemma`Private`brownians,ItosLemma`Private`found],CompoundExpression[
Set[ItosLemma`Private`brownians,ItosLemma`Private`blist],Set[ItosLemma`Private`lost,
Complement[ItosLemma`Private`found,ItosLemma`Private`blist]],If[UnsameQ[ItosLemma`Private`lost,
{}],Message[MessageName[Diffusion,"lost"],ItosLemma`Private`lost]]]],If[And[TrueQ[
ItosLemma`Private`scalar],SameQ[Length[ItosLemma`Private`brownians],1]],Coefficient[
ItosLemma`Private`expr,First[ItosLemma`Private`brownians]],Map[Function[Coefficient[
ItosLemma`Private`expr,Slot[1]]],ItosLemma`Private`brownians]]]]]}],"SubValues" -> None,
"DefaultValues" -> None,"NValues" -> None,"FormatValues" -> None,"Options" -> {BrownianList -> Automatic,Scalarize -> True},
"Attributes" -> {},"FullName" -> "ItosLemma`Diffusion"],False]],StandardForm],"Output",
CellLabel -> "Out[46]= ",ExpressionUUID -> "42628fb7-fd8e-4423-9093-630f966dedbc"]},
Open],ExpressionUUID -> "19f3f1cc-520c-403c-ab57-0fe58ee1ea57"]},Open],ExpressionUUID -> "9d058f2a-28e4-42da-933f-b5ca2e976644"],Cell[
CellGroupData[
{Cell[
"\<Introductory examples\>","Section",CellDingbat -> "\[FilledSquare]",ShowGroupOpener -> False,
ExpressionUUID -> "bb29e4c0-53dd-4ff9-b451-31d441730cf5"],Cell[
CellGroupData[{Cell[

"\<Getting started\>","Subsection",ExpressionUUID -> "f2d2c5db-e3ff-4462-b244-05424409ae9c"],Cell[
CellGroupData[
{Cell[
TextData[{"The canonical example: Find ",Cell[
BoxData[FormBox[RowBox[{"d","\[InvisibleSpace]","y"}],
TraditionalForm]],ExpressionUUID -> "fdb69176-cfe2-4530-95c6-a86e63800322"]," where ",Cell[
BoxData[
FormBox[RowBox[{"y"," ","="," ",RowBox[{"f","(",RowBox[{"x",",","t"}],")"}]}],TraditionalForm]],
ExpressionUUID -> "97c143c9-4e35-4023-a899-39632e407778"]," and ",Cell[
BoxData[FormBox[
RowBox[{RowBox[{"d","\[InvisibleSpace]","x"}]," ","="," ",RowBox[{RowBox[{"\[Mu]"," ","d","\[InvisibleSpace]","t"}]," ","+"," ",RowBox[
{"\[Sigma]"," ","d","\[InvisibleSpace]","W"}]}]}],TraditionalForm]],ExpressionUUID -> "0a749ba5-87b1-4859-aced-acd5c0c0d38f"],"."}],
"Subsubsection",ExpressionUUID -> "3d069466-ae34-4ede-80da-f61040250855"],Cell[
CellGroupData[
{Cell[
BoxData[{RowBox[{"Clear","[",RowBox[{"x",",","y",",","f"}],"]"}],"\n",RowBox[
{"dx"," ","="," ",RowBox[{"ItoMake","[",RowBox[{RowBox[{"x","[","t","]"}],","," ","\[Mu]",","," ","\[Sigma]"}],"]"}]}]}],
"Input",CellLabel -> "In[47]:= ",ExpressionUUID -> "e18fa666-bb8d-43bd-a973-832741da681b"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ","\[Mu]"}],"+",RowBox[{"\[Sigma]"," ",SubscriptBox["dB","1"]}]}],
StandardForm],"Output",CellLabel -> "Out[48]= ",ExpressionUUID -> "a0ff1ceb-9df6-4327-a0f4-7930193bff95"]},
Open],ExpressionUUID -> "8978d149-2baa-4d8e-8582-23c8e4dc8ea0"],Cell[
TextData[{"In this case, ",StyleBox[
"ItoMake",FontFamily -> "Courier New",FontWeight -> "Bold"]," stores a rule with ",Cell[
BoxData[
FormBox["x",TraditionalForm]],ExpressionUUID -> "bcd6cbbe-6439-4778-9040-f60aad9f0b85"],":"}],
"Text",ExpressionUUID -> "729ae621-ef82-43ca-a76e-81cf7326e385"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"?","x"}]],"Input",CellLabel -> "In[49]:= ",ExpressionUUID -> "d27af3dc-5281-4f5d-91ed-ba09d79798b3"],Cell[
BoxData[
InterpretationBox[StyleBox[FrameBox[DynamicModuleBox[{Set[System`InformationDump`open$$,
True],Set[System`InformationDump`mouseOver$$,False]},PaneSelectorBox[{True -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",BaseStyle -> None,
StripOnInput -> False],FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"Global`x\"","InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},
StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],BaseStyle -> "InformationUsageSubtitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationUsageSubtitleBackground",
StripOnInput -> False]},{PaneBox[TagBox[GridBox[{{StyleBox[TagBox[TooltipBox[StyleBox[
"\" Definitions\"","InformationRowLabel",StripOnInput -> False],"\"Definitions\"",
TooltipStyle -> "TextStyling"],Function[Annotation[Slot[1],"Definitions","Tooltip"]]],
"DialogStyle",StripOnInput -> False]},{TemplateBox[{"\"\[ThinSpace]\"",GridBox[{{RowBox[
{RowBox[{"x","[",RowBox[{"dt","+","t"}],"]"}],"=",RowBox[{RowBox[{"dt"," ","\[Mu]"}],"+",RowBox[
{"\[Sigma]"," ",SubscriptBox["dB","1"]}],"+",RowBox[{"x","[","t","]"}]}]}]},{" "}},
GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}]},
"RowDefault"]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}],"Column"],
FrameMargins -> {{6,0},{3,6}}],"\"\""},{PaneBox[GridBox[{{DynamicModuleBox[{Set[System`InformationDump`open$$,
{False,False,False,False,False,False}]},StyleBox[GridBox[{{TagBox[TooltipBox[StyleBox[
"\" Full Name\"","InformationRowLabel",StripOnInput -> False],"\"FullName\"",TooltipStyle -> "TextStyling"],
Function[Annotation[Slot[1],"FullName","Tooltip"]]],"\"Global`x\""}},AutoDelete -> False,
GridBoxItemSize -> {"Columns" -> {Automatic,Automatic}},GridBoxAlignment -> {"Columns" -> {Right,Left}},
RowSpacings -> 2,GridBoxDividers -> None],"DialogStyle",StripOnInput -> False],RuleDelayed[
DynamicModuleValues,{}]]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxDividers -> {"Columns" -> {{False}},"Rows" -> {{False}}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
RowSpacings -> 9],FrameMargins -> {{6,6},{6,3}}],""},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[
{False -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpener"]],True -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,False]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"],False -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",StripOnInput -> False],
FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"Global`x\"","InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},
StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],BaseStyle -> "InformationUsageSubtitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationUsageSubtitleBackground",
StripOnInput -> False]},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","DownPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","DownPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,True]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"]},Dynamic[System`InformationDump`open$$],
ImageSize -> Automatic,FrameMargins -> 0,BaselinePosition -> Baseline],RuleDelayed[
DynamicModuleValues,{}],ExpressionUUID -> "bb38bd58-c4cd-4070-995c-7389b9b3afdc"],
BaseStyle -> "InformationGridFrame",StripOnInput -> False],"InformationGridPlain",
StripOnInput -> False],InformationData[Association["ObjectType" -> "Symbol","Usage" -> "Global`x",
"Documentation" -> None,"OwnValues" -> None,"UpValues" -> None,"DownValues" -> Information`InformationValueForm[
DownValues,x,{x[Plus[dt,t]] -> Plus[Times[dt,\[Mu]],Times[\[Sigma],Subscript[dB,1]],
x[t]]}],"SubValues" -> None,"DefaultValues" -> None,"NValues" -> None,"FormatValues" -> None,
"Options" -> None,"Attributes" -> {},"FullName" -> "Global`x"],False]],StandardForm],
"Output",CellLabel -> "Out[49]= ",ExpressionUUID -> "000f557a-caa5-418f-b0f9-ad92656052f7"]},
Open],ExpressionUUID -> "90f367e5-6cfe-4a6b-8034-45ddc97d8208"],Cell[
TextData[{"The drift and diffusion can be extracted from ",Cell[
BoxData[
FormBox[RowBox[{"d","\[InvisibleSpace]","x"}],TraditionalForm]],ExpressionUUID -> "18b2a48a-c249-493d-9ccf-3cd4f0b76d48"],":"}],
"Text",ExpressionUUID -> "64df105f-f914-4402-b22a-e6dae7e565a1"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Drift","[","dx","]"}]],"Input",CellLabel -> "In[50]:= ",ExpressionUUID -> "31675a6e-d8b6-43ea-8e65-3645c982e0d9"],Cell[
BoxData[
"\[Mu]",StandardForm],"Output",CellLabel -> "Out[50]= ",ExpressionUUID -> "36db3553-68f0-4ced-baa4-6a42f4dab1de"]},
Open],ExpressionUUID -> "b62cd77b-13b6-4c16-aad1-2f96f5d7dcc4"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Diffusion","[","dx","]"}]],"Input",CellLabel -> "In[51]:= ",
ExpressionUUID -> "bc744d78-c9d8-43c9-89be-4b6cc47dff3c"],Cell[
BoxData["\[Sigma]",
StandardForm],"Output",CellLabel -> "Out[51]= ",ExpressionUUID -> "c3983aa8-3139-45ba-8b8d-74ecdffec244"]},
Open],ExpressionUUID -> "d2663da8-a458-473f-a23b-25104984263c"],Cell[
"\<Now let's compute the stochastic derivative:\>",
"Text",ExpressionUUID -> "7228ff4b-ddd3-4bec-9e1d-d357313abb86"],Cell[
CellGroupData[
{Cell[
BoxData[{RowBox[{"y"," ","="," ",RowBox[{"f","[",RowBox[{RowBox[{"x","[","t","]"}],","," ","t"}],"]"}]}],"\n",RowBox[
{"ItoD","[","y","]"}]}],"Input",CellLabel -> "In[52]:= ",ExpressionUUID -> "6e777a2b-e3b8-4155-9116-2604ff8b3602"],Cell[
BoxData[
RowBox[{"f","[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}],StandardForm],"Output",
CellLabel -> "Out[52]= ",ExpressionUUID -> "f2fff67b-22ab-490b-843b-0d9b4c050cb2"],Cell[
BoxData[
RowBox[{RowBox[{"\[Sigma]"," ",SubscriptBox["dB","1"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[{RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}],"+",RowBox[{"\[Mu]"," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[
{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}],"+",RowBox[{FractionBox["1","2"]," ",SuperscriptBox["\[Sigma]",
"2"]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","t"}],"]"}]}]}],")"}]}]}],
StandardForm],"Output",CellLabel -> "Out[53]= ",ExpressionUUID -> "d4c88495-b8dc-4b47-a576-8bdcb58fe901"]},
Open],ExpressionUUID -> "a69f59cf-895d-4077-96f7-8b5a320aa474"],Cell[
TextData[{"By default, ",StyleBox[
"ItoD",FontFamily -> "Courier New",FontWeight -> "Bold"]," removes the dependence of ",Cell[
BoxData[
FormBox["x",TraditionalForm]],ExpressionUUID -> "7f2c14f0-4957-43fd-a5f0-1bbf4fe0a5fb"]," on ",Cell[
BoxData[
FormBox["t",TraditionalForm]],ExpressionUUID -> "52602247-9c0e-4979-92f1-86c36295dc5f"]," in the output. This behavior can be over-ridden with the option ",StyleBox[
"SuppressTime",FontFamily -> "Courier New",FontWeight -> "Bold"]}],"Text",ExpressionUUID -> "96d3b4fe-c21d-4625-be7b-9901fa8d2a84"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Options","[","ItoD","]"}]],"Input",CellLabel -> "In[54]:= ",
ExpressionUUID -> "c7f25fbd-b455-478d-b7e9-094af30bac8a"],Cell[
BoxData[RowBox[{"{",RowBox[
{RowBox[{"OrthogonalBrownians","\[Rule]","True"}],",",RowBox[{"SuppressTime","\[Rule]","True"}]}],"}"}],
StandardForm],"Output",CellLabel -> "Out[54]= ",ExpressionUUID -> "d271cfd4-4403-44f2-b93f-63a5689d56aa"]},
Open],ExpressionUUID -> "832ebb66-51b9-4ebe-8f6d-722ea387d8e8"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dy"," ","="," ",RowBox[{"ItoD","[",RowBox[{"y",","," ",RowBox[
{"SuppressTime","->","False"}]}],"]"}]}]],"Input",CellLabel -> "In[55]:= ",ExpressionUUID -> "0268b4ec-9177-4a5b-8049-89f00344fa50"],Cell[
BoxData[
RowBox[{RowBox[{"\[Sigma]"," ",SubscriptBox["dB","1"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[
{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],
MultilineFunction -> None],"[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}],"+",RowBox[
{"\[Mu]"," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[
{FractionBox["1","2"]," ",SuperscriptBox["\[Sigma]","2"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"x","[","t","]"}],",","t"}],"]"}]}]}],")"}]}]}],StandardForm],"Output",CellLabel -> "Out[55]= ",
ExpressionUUID -> "ae17cdb5-fe84-4b58-9485-713ccdfbbf15"]},Open],ExpressionUUID -> "b1129d99-a1fe-4a8a-bda5-ab41feaceeea"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"?","y"}]],"Input",CellLabel -> "In[196]:= ",ExpressionUUID -> "2cf2a5e8-31cb-4421-87ac-48c8b208878b"],Cell[
BoxData[
InterpretationBox[StyleBox[FrameBox[DynamicModuleBox[{Set[System`InformationDump`open$$,
True],Set[System`InformationDump`mouseOver$$,False]},PaneSelectorBox[{True -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",BaseStyle -> None,
StripOnInput -> False],FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"Global`y\"","InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},
StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],BaseStyle -> "InformationUsageSubtitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationUsageSubtitleBackground",
StripOnInput -> False]},{PaneBox[GridBox[{{DynamicModuleBox[{Set[System`InformationDump`open$$,
{False,False,False,False,False,False}]},StyleBox[GridBox[{{TagBox[TooltipBox[StyleBox[
"\" Full Name\"","InformationRowLabel",StripOnInput -> False],"\"FullName\"",TooltipStyle -> "TextStyling"],
Function[Annotation[Slot[1],"FullName","Tooltip"]]],"\"Global`y\""}},AutoDelete -> False,
GridBoxItemSize -> {"Columns" -> {Automatic,Automatic}},GridBoxAlignment -> {"Columns" -> {Right,Left}},
RowSpacings -> 2,GridBoxDividers -> None],"DialogStyle",StripOnInput -> False],RuleDelayed[
DynamicModuleValues,{}]]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxDividers -> {"Columns" -> {{False}},"Rows" -> {{False}}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
RowSpacings -> 9],FrameMargins -> {{6,6},{6,3}}],""},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[
{False -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpener"]],True -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,False]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"],False -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",StripOnInput -> False],
FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"Global`y\"","InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},
StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],BaseStyle -> "InformationUsageSubtitleBackground",
StripOnInput -> False],ItemBox["\"\"",BaseStyle -> "InformationUsageSubtitleBackground",
StripOnInput -> False]},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","DownPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","DownPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,True]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"]},Dynamic[System`InformationDump`open$$],
ImageSize -> Automatic,FrameMargins -> 0,BaselinePosition -> Baseline],RuleDelayed[
DynamicModuleValues,{}],ExpressionUUID -> "beadece7-098c-4011-938e-fc91460bdd6c"],
BaseStyle -> "InformationGridFrame",StripOnInput -> False],"InformationGridPlain",
StripOnInput -> False],InformationData[Association["ObjectType" -> "Symbol","Usage" -> "Global`y",
"Documentation" -> None,"OwnValues" -> None,"UpValues" -> None,"DownValues" -> None,
"SubValues" -> None,"DefaultValues" -> None,"NValues" -> None,"FormatValues" -> None,
"Options" -> None,"Attributes" -> {},"FullName" -> "Global`y"],False]],StandardForm],
"Output",CellLabel -> "Out[196]= ",ExpressionUUID -> "4bbd5928-4260-470b-becb-0d864d22b1b2"]},
Open],ExpressionUUID -> "559f15a4-ce7a-45e4-adf5-8a9fb951d8e0"],Cell[
TextData[{"Here's what happens if ",Cell[
BoxData[
FormBox["x",TraditionalForm]],ExpressionUUID -> "a70a4f48-6c51-4739-bf28-164a3c13629f"]," isn't an Ito process:"}],
"Text",ExpressionUUID -> "6233b423-7719-4daa-859d-43dee2f58876"],Cell[
CellGroupData[
{Cell[
BoxData[{RowBox[{"Clear","[","x","]"}],"\n",RowBox[{"ItoD","[",RowBox[{RowBox[
{"x","[","t","]"}],","," ",RowBox[{"SuppressTime"," ","->"," ","False"}]}],"]"}]}],
"Input",CellLabel -> "In[57]:= ",ExpressionUUID -> "61b2c469-2fe4-42e2-adca-a35023f4719a"],Cell[
BoxData[
RowBox[{"dt"," ",RowBox[{SuperscriptBox["x","\[Prime]",MultilineFunction -> None],"[","t","]"}]}],
StandardForm],"Output",CellLabel -> "Out[58]= ",ExpressionUUID -> "5a826dcd-6af8-481d-852d-29eeb61e785d"]},
Open],ExpressionUUID -> "76d27aa4-b800-443f-856a-068d5a26bd8f"]},Open],ExpressionUUID -> "b644f375-6581-43c1-82ed-6d518370edae"],Cell[
CellGroupData[
{Cell[
"\<Other examples\>","Subsubsection",ExpressionUUID -> "d6fee12c-f594-4011-841f-147de5c1770e"],Cell[

"\<Time itself:\>","Text",ExpressionUUID -> "e7b26c7b-3d5b-4ad8-90fb-74cc097549cb"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoD","[","t","]"}]],"Input",CellDingbat -> None,ShowGroupOpener -> False,
CellLabel -> "In[59]:= ",ExpressionUUID -> "9232f76e-3e4d-4421-a141-7785e625856d"],Cell[
BoxData[
"dt",StandardForm],"Output",CellLabel -> "Out[59]= ",ExpressionUUID -> "32812713-db2f-4a18-8aeb-f58698805e9b"]},
Open],ExpressionUUID -> "6bcdc389-c2dc-40fa-81f4-03eda500e12d"],Cell[
"\<Brownian motion. (Note: Do not make any assignments to dB, the BrownianIncrement symbol.)\>",
"Text",ExpressionUUID -> "67717b41-8772-4b6a-9007-848afc72bf54"],Cell[
BoxData[RowBox[
{"Clear","[","b","]"}]],"Input",CellLabel -> "In[60]:= ",ExpressionUUID -> "773db464-5e97-4970-a64b-f3ddf2663807"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"db"," ","="," ",RowBox[{"ItoMake","[",RowBox[{RowBox[{"B","[","t","]"}],",","0",",","1"}],"]"}]}]],
"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[61]:= ",ExpressionUUID -> "386df18d-a7cc-463e-b009-5559f55dd294"],Cell[
BoxData[
SubscriptBox["dB","1"],StandardForm],"Output",CellLabel -> "Out[61]= ",ExpressionUUID -> "745f713d-5aa1-40c7-9cea-fdee08e56387"]},
Open],ExpressionUUID -> "7cc30d9f-e04e-401e-8885-41eef4b4ffeb"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoD","[",FractionBox[SuperscriptBox[RowBox[{"B","[","t","]"}],
"2"],"2"],"]"}]],"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[62]:= ",
ExpressionUUID -> "40e65d1c-fdf5-4a8d-a0fa-796508f8f0ac"],Cell[
BoxData[RowBox[{FractionBox[
"dt","2"],"+",RowBox[{"B"," ",SubscriptBox["dB","1"]}]}],StandardForm],"Output",CellLabel -> "Out[62]= ",
ExpressionUUID -> "26b27bbf-b66c-4303-868c-302a49736750"]},Open],ExpressionUUID -> "6ae31a59-3748-4e43-a193-976653a420f5"],Cell[
TextData[
{"Declare ",Cell[
BoxData[FormBox["x",TraditionalForm]],ExpressionUUID -> "55e28abb-922d-45c4-975a-76f0998ddc6f"]," again:"}],
"Text",ExpressionUUID -> "3a0902ba-51fc-4fbe-a94b-c34d759b117d"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoMake","[",RowBox[{RowBox[{"x","[","t","]"}],","," ","\[Mu]",","," ","\[Sigma]"}],"]"}]],
"Input",CellLabel -> "In[63]:= ",ExpressionUUID -> "b07e0f02-940a-42eb-a5b4-02f3a9b1ca64"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ","\[Mu]"}],"+",RowBox[{"\[Sigma]"," ",SubscriptBox["dB","1"]}]}],
StandardForm],"Output",CellLabel -> "Out[63]= ",ExpressionUUID -> "985b9f47-4df2-4dea-9da4-3df5664eebfa"]},
Open],ExpressionUUID -> "5f595fed-6fb9-46c1-b00c-0d2bc4eb5934"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoD","[",RowBox[{RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{"x","[","s","]"}],RowBox[{"\[DifferentialD]","s"}]}]}],",",RowBox[
{"SuppressTime","->","False"}]}],"]"}]],"Input",CellDingbat -> None,ShowGroupOpener -> False,
CellLabel -> "In[64]:= ",ExpressionUUID -> "327a3ea5-dbf3-4e78-a21e-912a6b5acaf5"],Cell[
BoxData[
RowBox[{RowBox[{"-","dt"}]," ",RowBox[{"x","[","t","]"}]}],StandardForm],"Output",
CellLabel -> "Out[64]= ",ExpressionUUID -> "0e95df88-12e8-4469-8136-93763d482e93"]},
Open],ExpressionUUID -> "f1aa8d62-cd15-497e-98f3-bb1993a885bb"],Cell[
TextData[{"Make ",Cell[
BoxData[
FormBox[RowBox[{"y","[","t","]"}],TraditionalForm]],ExpressionUUID -> "4fb87661-2328-490d-b5b3-2a091a40fec7"]," an Ito process with two Brownians"}],
"Text",ExpressionUUID -> "37d38715-d126-428d-9b47-5606060c8dcb"],Cell[
BoxData[RowBox[
{"Clear","[",RowBox[{"y",",","g"}],"]"}]],"Input",CellLabel -> "In[65]:= ",ExpressionUUID -> "739de9a5-dde1-4692-b5f2-9106ab6f1dc3"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoMake","[",RowBox[{RowBox[{"y","[","t","]"}],","," \[VeryThinSpace]",SubscriptBox[
"\[Mu]","y"],","," ",RowBox[{"{",RowBox[{SubscriptBox["\[Sigma]",SubscriptBox["y",
"1"]],","," ",SubscriptBox["\[Sigma]",SubscriptBox["y","2"]]}],"}"}]}],"]"}]],"Input",
CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[66]:= ",ExpressionUUID -> "e7255f1f-b7e8-46ef-b254-208002a2b806"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",SubscriptBox["\[Mu]","y"]}],"+",RowBox[{SubscriptBox["dB",
"1"]," ",SubscriptBox["\[Sigma]",SubscriptBox["y","1"]]}],"+",RowBox[{SubscriptBox[
"dB","2"]," ",SubscriptBox["\[Sigma]",SubscriptBox["y","2"]]}]}],StandardForm],"Output",
CellLabel -> "Out[66]= ",ExpressionUUID -> "7569f693-1e83-47cf-8aa0-e7d3a5bdd677"]},
Open],ExpressionUUID -> "460d34cc-98a8-4a04-a903-25cf0a03060d"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoD","[",RowBox[{"y","[","t","]"}],"]"}]],"Input",CellDingbat -> None,
ShowGroupOpener -> False,CellLabel -> "In[67]:= ",ExpressionUUID -> "e1964727-0d8f-48fc-a79f-bf4bfb33b760"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",SubscriptBox["\[Mu]","y"]}],"+",RowBox[{SubscriptBox["dB",
"1"]," ",SubscriptBox["\[Sigma]",SubscriptBox["y","1"]]}],"+",RowBox[{SubscriptBox[
"dB","2"]," ",SubscriptBox["\[Sigma]",SubscriptBox["y","2"]]}]}],StandardForm],"Output",
CellLabel -> "Out[67]= ",ExpressionUUID -> "ad564c25-adc3-4b0b-b8b4-2baacccf22a6"]},
Open],ExpressionUUID -> "e519c9fe-130f-4bb9-8223-8f6bd1679cfe"],Cell[
"\<Here the Brownians are uncorrelated...\>",
"Text",ExpressionUUID -> "9bcda31c-e57d-4ea3-a1e1-e297c82ce2d0"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"z","=",RowBox[{"g","[",RowBox[{"t",",",RowBox[{"y","[","t","]"}]}],"]"}]}]],
"Input",CellLabel -> "In[68]:= ",ExpressionUUID -> "556cb7c5-5cd4-4233-8033-40123508fc83"],Cell[
BoxData[
RowBox[{"g","[",RowBox[{"t",",",RowBox[{"y","[","t","]"}]}],"]"}],StandardForm],"Output",
CellLabel -> "Out[68]= ",ExpressionUUID -> "3781369c-f16b-48ca-8ee2-1982e995366c"]},
Open],ExpressionUUID -> "1b9f1bea-6c1b-4959-9e8d-8a765427b2cd"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dz1","=",RowBox[{"ItoD","[","z","]"}]}]],"Input",CellDingbat -> None,
ShowGroupOpener -> False,CellLabel -> "In[69]:= ",ExpressionUUID -> "ba2d4dd3-288b-4ef8-9f96-7ddf561d6c9f"],Cell[
BoxData[
RowBox[{RowBox[{SubscriptBox["dB","1"]," ",SubscriptBox["\[Sigma]",SubscriptBox["y",
"1"]]," ",RowBox[{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","y"}],"]"}]}],"+",RowBox[
{SubscriptBox["dB","2"]," ",SubscriptBox["\[Sigma]",SubscriptBox["y","2"]]," ",RowBox[
{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","y"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[{RowBox[{SubscriptBox[
"\[Mu]","y"]," ",RowBox[{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","y"}],"]"}]}],"+",RowBox[
{FractionBox["1","2"]," ",SubsuperscriptBox["\[Sigma]",SubscriptBox["y","1"],"2"]," ",RowBox[
{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"0",",","2"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","y"}],"]"}]}],"+",RowBox[{FractionBox["1","2"]," ",SubsuperscriptBox["\[Sigma]",
SubscriptBox["y","2"],"2"]," ",RowBox[{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[
{"0",",","2"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","y"}],"]"}]}],"+",RowBox[
{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","y"}],"]"}]}],")"}]}]}],StandardForm],"Output",CellLabel -> "Out[69]= ",
ExpressionUUID -> "d4d22d30-4467-46c8-a152-db671d1e7ebe"]},Open],ExpressionUUID -> "af25ae2e-b325-4826-9f4a-656118b7f14d"],Cell[

"\<While here they are correlated:\>","Text",ExpressionUUID -> "be19e27d-3023-40a6-bb11-309a64a19f77"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dz2","=",RowBox[{"ItoD","[",RowBox[{"z",",",RowBox[{"OrthogonalBrownians","->","False"}]}],"]"}]}]],
"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[70]:= ",ExpressionUUID -> "b1e81db8-4db7-4ccb-8edc-a6b6e225099f"],Cell[
BoxData[
RowBox[{RowBox[{SubscriptBox["dB","1"]," ",SubscriptBox["\[Sigma]",SubscriptBox["y",
"1"]]," ",RowBox[{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","y"}],"]"}]}],"+",RowBox[
{SubscriptBox["dB","2"]," ",SubscriptBox["\[Sigma]",SubscriptBox["y","2"]]," ",RowBox[
{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","y"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[{RowBox[{SubscriptBox[
"\[Mu]","y"]," ",RowBox[{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","y"}],"]"}]}],"+",RowBox[
{FractionBox["1","2"]," ",SubsuperscriptBox["\[Sigma]",SubscriptBox["y","1"],"2"]," ",RowBox[
{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"0",",","2"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","y"}],"]"}]}],"+",RowBox[{FractionBox["1","2"]," ",SubsuperscriptBox["\[Sigma]",
SubscriptBox["y","2"],"2"]," ",RowBox[{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[
{"0",",","2"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","y"}],"]"}]}],"+",RowBox[
{SubscriptBox["\[Sigma]",SubscriptBox["y","1"]]," ",SubscriptBox["\[Sigma]",SubscriptBox[
"y","2"]]," ",SubscriptBox["\[Rho]",RowBox[{"1",",","2"}]]," ",RowBox[{SuperscriptBox[
"g",TagBox[RowBox[{"(",RowBox[{"0",",","2"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","y"}],"]"}]}],"+",RowBox[{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","y"}],"]"}]}],")"}]}]}],
StandardForm],"Output",CellLabel -> "Out[70]= ",ExpressionUUID -> "c3d20c4c-3159-49cb-85f6-623310f8028e"]},
Open],ExpressionUUID -> "e2947cb6-251d-4d28-9202-6e2faf41d44c"],Cell[
"\<Here is the extra term:\>",
"Text",ExpressionUUID -> "ad0ba946-42f0-4f0e-a3ad-df7018dd626a"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"dz2","-","dz1"}],"//","Simplify"}]],"Input",CellLabel -> "In[71]:= ",
ExpressionUUID -> "7f87d861-992d-4273-947f-8b5cf46525bc"],Cell[
BoxData[RowBox[{"dt"," ",SubscriptBox[
"\[Sigma]",SubscriptBox["y","1"]]," ",SubscriptBox["\[Sigma]",SubscriptBox["y","2"]]," ",SubscriptBox[
"\[Rho]",RowBox[{"1",",","2"}]]," ",RowBox[{SuperscriptBox["g",TagBox[RowBox[{"(",RowBox[
{"0",",","2"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","y"}],"]"}]}],
StandardForm],"Output",CellLabel -> "Out[71]= ",ExpressionUUID -> "141cf7a4-6c14-44af-92c2-66fd6b0af572"]},
Open],ExpressionUUID -> "fc3a2a0d-d5d4-4511-a99f-c26884394f15"],Cell[
TextData[{"We can mix ",Cell[
BoxData[
FormBox["x",TraditionalForm]],ExpressionUUID -> "a9a6b059-378d-40f4-a66c-8ef8031e70a9"]," and ",Cell[
BoxData[
FormBox["y",TraditionalForm]],ExpressionUUID -> "4a2c2125-0bf8-4a61-b6d4-bd62bae36a4d"]}],
"Text",ExpressionUUID -> "bcb96f8d-7f17-4bd3-ae1c-6187a26130b4"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"ItoD","[",RowBox[{"f","[",RowBox[{RowBox[{"x","[","t","]"}],",",RowBox[
{"y","[","t","]"}]}],"]"}],"]"}]," "}]],"Input",CellLabel -> "In[72]:= ",ExpressionUUID -> "32aecacf-aff3-4668-8120-1a7adec7cb1d"],Cell[
BoxData[
RowBox[{RowBox[{SubscriptBox["dB","2"]," ",SubscriptBox["\[Sigma]",SubscriptBox["y",
"2"]]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","y"}],"]"}]}],"+",RowBox[
{SubscriptBox["dB","1"]," ",RowBox[{"(",RowBox[{RowBox[{SubscriptBox["\[Sigma]",SubscriptBox[
"y","1"]]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","y"}],"]"}]}],"+",RowBox[
{"\[Sigma]"," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","y"}],"]"}]}]}],")"}]}],"+",RowBox[
{"dt"," ",RowBox[{"(",RowBox[{RowBox[{SubscriptBox["\[Mu]","y"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","y"}],"]"}]}],"+",RowBox[{FractionBox["1","2"]," ",SubsuperscriptBox["\[Sigma]",
SubscriptBox["y","1"],"2"]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[
{"0",",","2"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","y"}],"]"}]}],"+",RowBox[
{FractionBox["1","2"]," ",SubsuperscriptBox["\[Sigma]",SubscriptBox["y","2"],"2"]," ",RowBox[
{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","2"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","y"}],"]"}]}],"+",RowBox[{"\[Mu]"," ",RowBox[{SuperscriptBox["f",TagBox[
RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","y"}],"]"}]}],"+",RowBox[{"\[Sigma]"," ",SubscriptBox["\[Sigma]",SubscriptBox[
"y","1"]]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","y"}],"]"}]}],"+",RowBox[
{FractionBox["1","2"]," ",SuperscriptBox["\[Sigma]","2"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","y"}],"]"}]}]}],")"}]}]}],StandardForm],"Output",CellLabel -> "Out[72]= ",
ExpressionUUID -> "b0371a90-76b5-47b7-b829-9b8f7c0d2e43"]},Open],ExpressionUUID -> "11373de0-37cb-4a3d-9757-82deac4021ef"],Cell[
TextData[
{"To compute the instantaneous covariance between ",Cell[
BoxData[FormBox["x",TraditionalForm]],
ExpressionUUID -> "5422543b-1f77-46bd-a51e-d484070e241f"]," and ",Cell[
BoxData[FormBox[
"y",TraditionalForm]],ExpressionUUID -> "47f8bb74-7385-4714-b4ba-cb415d7166fe"],", we can take the dot product of their diffusions"}],
"Text",ExpressionUUID -> "b397e925-edfc-4835-ae47-14173e51ed0a"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"sigY"," ","="," ",RowBox[{"Diffusion","[",RowBox[{"ItoD","[",RowBox[
{"y","[","t","]"}],"]"}],"]"}]}]],"Input",CellLabel -> "In[73]:= ",ExpressionUUID -> "ba702c75-0240-43d5-991d-a3a83d067a2a"],Cell[
BoxData[
RowBox[{"{",RowBox[{SubscriptBox["\[Sigma]",SubscriptBox["y","1"]],",",SubscriptBox[
"\[Sigma]",SubscriptBox["y","2"]]}],"}"}],StandardForm],"Output",CellLabel -> "Out[73]= ",
ExpressionUUID -> "b475b352-2b1e-480e-bd4e-e7c79661f3c4"]},Open],ExpressionUUID -> "9bd7e040-e081-4919-b9db-7d86988b9503"],Cell[
TextData[
{"But the diffusion for ",Cell[
BoxData[FormBox["x",TraditionalForm]],ExpressionUUID -> "32c199cf-f825-4a6f-a968-bc016ae8d7ba"]," only has one Brownian"}],
"Text",ExpressionUUID -> "ed5c2013-d1f1-47a1-9d13-02d57ba1f23b"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"sigX"," ","="," ",RowBox[{"Diffusion","[",RowBox[{"ItoD","[",RowBox[
{"x","[","t","]"}],"]"}],"]"}]}]],"Input",CellLabel -> "In[74]:= ",ExpressionUUID -> "c69917e4-e35e-4014-8e35-a2dc8e2482a4"],Cell[
BoxData[
"\[Sigma]",StandardForm],"Output",CellLabel -> "Out[74]= ",ExpressionUUID -> "89bbea7d-5a1d-4647-a71c-5be5a7078c47"]},
Open],ExpressionUUID -> "12d9bd9b-9fb9-4b9d-812e-26e932f953f7"],Cell[
"\<To fix that, use the option BrownianList\>",
"Text",ExpressionUUID -> "91cfdb23-e6dd-4536-8f90-37ae52adbc2a"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"blist","=",RowBox[{"Cases","[",RowBox[{RowBox[{"ItoD","[",RowBox[
{"y","[","t","]"}],"]"}],","," ",RowBox[{"Subscript","[",RowBox[{"BrownianIncrement",",","_"}],"]"}],",","\[Infinity]"}],"]"}]}]],
"Input",CellLabel -> "In[75]:= ",ExpressionUUID -> "36391797-3e00-4044-b4e8-05c17f4ab4da"],Cell[
BoxData[
RowBox[{"{",RowBox[{SubscriptBox["dB","1"],",",SubscriptBox["dB","2"]}],"}"}],StandardForm],
"Output",CellLabel -> "Out[75]= ",ExpressionUUID -> "0be4145c-336b-4816-8fcf-10eb91c3a8eb"]},
Open],ExpressionUUID -> "9a7e703f-8b69-4dc6-98f4-d86ad31ad366"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"sigX"," ","="," ",RowBox[{"Diffusion","[",RowBox[{RowBox[
{"ItoD","[",RowBox[{"x","[","t","]"}],"]"}],",",RowBox[{"BrownianList"," ","->"," ","blist"}]}],"]"}]}]],
"Input",CellLabel -> "In[76]:= ",ExpressionUUID -> "db58352c-94cd-4a1c-8a94-c57a2d421e10"],Cell[
BoxData[
RowBox[{"{",RowBox[{"\[Sigma]",",","0"}],"}"}],StandardForm],"Output",CellLabel -> "Out[76]= ",
ExpressionUUID -> "22dfbb14-4a5c-425b-8560-dff1fc9a28f8"]},Open],ExpressionUUID -> "cb2b873a-a0da-498b-b63f-63ecf7c0f62d"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"sigX",".","sigY"}]],"Input",CellLabel -> "In[77]:= ",ExpressionUUID -> "9fcf3bb9-b4fd-44ce-baaa-2d7ed15963ef"],Cell[
BoxData[
RowBox[{"\[Sigma]"," ",SubscriptBox["\[Sigma]",SubscriptBox["y","1"]]}],StandardForm],
"Output",CellLabel -> "Out[77]= ",ExpressionUUID -> "855f6405-a159-4f98-812c-8e5b83fb6177"]},
Open],ExpressionUUID -> "026b06f7-5169-4141-bf0d-96128c3b1025"]},Open],ExpressionUUID -> "1728801c-eb01-4111-81e7-fc09fa98da0f"]},
Open],ExpressionUUID -> "a96c08f1-83d0-4c05-83ed-ce67b1fbe748"],Cell[
CellGroupData[
{Cell[
"\<Two variables, each with two shocks\>","Subsection",ExpressionUUID -> "70600da3-f5c7-47bd-a753-a8f23e5aeb64"],Cell[
BoxData[
RowBox[{"Clear","[",RowBox[{"Subscript",",","f"}],"]"}]],"Input",CellLabel -> "In[78]:= ",
ExpressionUUID -> "d5b7d334-daa0-437f-8f99-e8e61f6904b7"],Cell[
CellGroupData[{Cell[
BoxData[
RowBox[{"ItoMake","[",RowBox[{RowBox[{SubscriptBox["x","1"],"[","t","]"}],","," ",SubscriptBox[
"\[Mu]","1"],","," ",RowBox[{"{",RowBox[{SubscriptBox["\[Sigma]","11"],","," ",SubscriptBox[
"\[Sigma]","12"]}],"}"}]}],"]"}]],"Input",CellLabel -> "In[79]:= ",ExpressionUUID -> "7895474b-8f26-4c0e-8a91-cbd4fefeb531"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",SubscriptBox["\[Mu]","1"]}],"+",RowBox[{SubscriptBox["dB",
"1"]," ",SubscriptBox["\[Sigma]","11"]}],"+",RowBox[{SubscriptBox["dB","2"]," ",SubscriptBox[
"\[Sigma]","12"]}]}],StandardForm],"Output",CellLabel -> "Out[79]= ",ExpressionUUID -> "277cc386-3939-4755-bf07-4b541b7b33fc"]},
Open],ExpressionUUID -> "2160149a-b8c4-478f-a56b-4bc1e88b650d"],Cell[
TextData[{"In this case, the rule is associated with ",StyleBox[
"Subscript",FontFamily -> "Courier New",FontWeight -> "Bold"]," (which is the Head of ",Cell[
BoxData[
FormBox[SubscriptBox["x","1"],TraditionalForm]],ExpressionUUID -> "5bfb7371-4a56-4ec7-85f8-35243e648204"],")."}],
"Text",ExpressionUUID -> "dad4775f-ab64-4639-a7b4-1deab21ca4a1"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"??","Subscript"}]],"Input",CellChangeTimes -> {3.5291359740941176`*^9},
CellLabel -> "In[80]:= ",ExpressionUUID -> "65281792-67b0-422e-a510-049258d7878d"],Cell[
BoxData[
InterpretationBox[StyleBox[FrameBox[DynamicModuleBox[{Set[System`InformationDump`open$$,
True],Set[System`InformationDump`mouseOver$$,False]},PaneSelectorBox[{True -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",BaseStyle -> None,
StripOnInput -> False],FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",
StripOnInput -> False],ItemBox[PaneBox[TooltipBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","InformationHelpIcon"]],True -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","InformationHelpIconHot"]]},Dynamic[CurrentValue[
"MouseOver"]]],ButtonData -> "http://reference.wolfram.com/language/ref/Subscript.html",
ButtonNote -> "http://reference.wolfram.com/language/ref/Subscript.html",BaseStyle -> "Link",
Appearance -> None],"\"http://reference.wolfram.com/language/ref/Subscript.html\""],
FrameMargins -> {{0,4},{0,2}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"\\!\\(\\*RowBox[{\\\"Subscript\\\", \\\"[\\\", RowBox[{StyleBox[\\\"x\\\", \\\"TI\\\"], \\\",\\\", StyleBox[\\\"y\\\", \\\"TI\\\"]}], \\\"]\\\"}]\\) is an object that formats as \\!\\(\\*SubscriptBox[StyleBox[\\\"x\\\", \\\"TI\\\"], StyleBox[\\\"y\\\", \\\"TI\\\"]]\\). \\n\\!\\(\\*RowBox[{\\\"Subscript\\\", \\\"[\\\", RowBox[{StyleBox[\\\"x\\\", \\\"TI\\\"], \\\",\\\", SubscriptBox[StyleBox[\\\"y\\\", \\\"TI\\\"], StyleBox[\\\"1\\\", \\\"TR\\\"]], \\\",\\\", SubscriptBox[StyleBox[\\\"y\\\", \\\"TI\\\"], StyleBox[\\\"2\\\", \\\"TR\\\"]], \\\",\\\", StyleBox[\\\"\[Ellipsis]\\\", \\\"TR\\\"]}], \\\"]\\\"}]\\) formats as \\!\\(\\*SubscriptBox[StyleBox[\\\"x\\\", \\\"TI\\\"], RowBox[{SubscriptBox[StyleBox[\\\"y\\\", \\\"TI\\\"], StyleBox[\\\"1\\\", \\\"TR\\\"]], \\\",\\\", SubscriptBox[StyleBox[\\\"y\\\", \\\"TI\\\"], StyleBox[\\\"2\\\", \\\"TR\\\"]], \\\",\\\", \\\"\[Ellipsis]\\\"}]]\\).\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{PaneBox[
TagBox[GridBox[{{StyleBox[TagBox[TooltipBox[StyleBox["\" SubValue Definitions\"",
"InformationRowLabel",StripOnInput -> False],"\"SubValues\"",TooltipStyle -> "TextStyling"],
Function[Annotation[Slot[1],"SubValues","Tooltip"]]],"DialogStyle",StripOnInput -> False]},{TemplateBox[
{"\"\[ThinSpace]\"",GridBox[{{RowBox[{RowBox[{SubscriptBox["x","1"],"[",RowBox[{"dt","+","t"}],"]"}],"=",RowBox[
{RowBox[{"dt"," ",SubscriptBox["\[Mu]","1"]}],"+",RowBox[{SubscriptBox["dB","1"]," ",SubscriptBox[
"\[Sigma]","11"]}],"+",RowBox[{SubscriptBox["dB","2"]," ",SubscriptBox["\[Sigma]",
"12"]}],"+",RowBox[{SubscriptBox["x","1"],"[","t","]"}]}]}]},{" "}},GridBoxAlignment -> {"Columns" -> {{Left}}},
DefaultBaseStyle -> "Column",GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}]},
"RowDefault"]}},GridBoxAlignment -> {"Columns" -> {{Left}}},DefaultBaseStyle -> "Column",
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}}],"Column"],
FrameMargins -> {{6,0},{3,6}}],"\"\""},{PaneBox[GridBox[{{DynamicModuleBox[{Set[System`InformationDump`open$$,
{False,False,False,False,False,False}]},StyleBox[GridBox[{{TagBox[TooltipBox[StyleBox[
"\" Documentation\"","InformationRowLabel",StripOnInput -> False],"\"Documentation\"",
TooltipStyle -> "TextStyling"],Function[Annotation[Slot[1],"Documentation","Tooltip"]]],TemplateBox[
{TemplateBox[{"\"Web \[RightGuillemet]\"",{URL["http://reference.wolfram.com/language/ref/Subscript.html"],None},"http://reference.wolfram.com/language/ref/Subscript.html","Hyperlink",{RGBColor[
0.9686274509803922`,0.4666666666666667`,0.`]},BaseStyle -> {RGBColor[0.0784313725490196`,
0.1568627450980392`,0.6`]}},"HyperlinkTemplate"]},"RowDefault"]},{TagBox[TooltipBox[
StyleBox["\" Attributes\"","InformationRowLabel",StripOnInput -> False],"\"Attributes\"",
TooltipStyle -> "TextStyling"],Function[Annotation[Slot[1],"Attributes","Tooltip"]]],RowBox[
{"{","NHoldRest","}"}]},{TagBox[TooltipBox[StyleBox["\" Full Name\"","InformationRowLabel",
StripOnInput -> False],"\"FullName\"",TooltipStyle -> "TextStyling"],Function[Annotation[
Slot[1],"FullName","Tooltip"]]],"\"System`Subscript\""}},AutoDelete -> False,GridBoxItemSize -> {"Columns" -> {Automatic,Automatic}},
GridBoxAlignment -> {"Columns" -> {Right,Left}},RowSpacings -> 2,GridBoxDividers -> None],
"DialogStyle",StripOnInput -> False],RuleDelayed[DynamicModuleValues,{}]]}},GridBoxAlignment -> {"Columns" -> {{Left}}},
DefaultBaseStyle -> "Column",GridBoxDividers -> {"Columns" -> {{False}},"Rows" -> {{False}}},
GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},RowSpacings -> 9],
FrameMargins -> {{6,6},{6,3}}],""},{ItemBox[TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[
FEPrivate`FrontEndResource["FEBitmaps","UpPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","UpPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],
RuleDelayed[ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,False]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"],False -> TagBox[
GridBox[{{ItemBox[PaneBox[StyleBox["\" Symbol\"","InformationTitleText",StripOnInput -> False],
FrameMargins -> {{4,0},{-1,1}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False],ItemBox[
PaneBox[TooltipBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","InformationHelpIcon"]],True -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","InformationHelpIconHot"]]},Dynamic[CurrentValue["MouseOver"]]],ButtonData -> "http://reference.wolfram.com/language/ref/Subscript.html",
ButtonNote -> "http://reference.wolfram.com/language/ref/Subscript.html",BaseStyle -> "Link",
Appearance -> None],"\"http://reference.wolfram.com/language/ref/Subscript.html\""],
FrameMargins -> {{0,4},{0,2}}],BaseStyle -> "InformationTitleBackground",StripOnInput -> False]},{ItemBox[
PaneBox[StyleBox["\"\\!\\(\\*RowBox[{\\\"Subscript\\\", \\\"[\\\", RowBox[{StyleBox[\\\"x\\\", \\\"TI\\\"], \\\",\\\", StyleBox[\\\"y\\\", \\\"TI\\\"]}], \\\"]\\\"}]\\) is an object that formats as \\!\\(\\*SubscriptBox[StyleBox[\\\"x\\\", \\\"TI\\\"], StyleBox[\\\"y\\\", \\\"TI\\\"]]\\). \\n\\!\\(\\*RowBox[{\\\"Subscript\\\", \\\"[\\\", RowBox[{StyleBox[\\\"x\\\", \\\"TI\\\"], \\\",\\\", SubscriptBox[StyleBox[\\\"y\\\", \\\"TI\\\"], StyleBox[\\\"1\\\", \\\"TR\\\"]], \\\",\\\", SubscriptBox[StyleBox[\\\"y\\\", \\\"TI\\\"], StyleBox[\\\"2\\\", \\\"TR\\\"]], \\\",\\\", StyleBox[\\\"\[Ellipsis]\\\", \\\"TR\\\"]}], \\\"]\\\"}]\\) formats as \\!\\(\\*SubscriptBox[StyleBox[\\\"x\\\", \\\"TI\\\"], RowBox[{SubscriptBox[StyleBox[\\\"y\\\", \\\"TI\\\"], StyleBox[\\\"1\\\", \\\"TR\\\"]], \\\",\\\", SubscriptBox[StyleBox[\\\"y\\\", \\\"TI\\\"], StyleBox[\\\"2\\\", \\\"TR\\\"]], \\\",\\\", \\\"\[Ellipsis]\\\"}]]\\).\"",
"InformationUsageText",LineSpacing -> {1.5`,1.5`,3.`},StripOnInput -> False],FrameMargins -> {{10,10},{8,10}}],
BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False],ItemBox[
"\"\"",BaseStyle -> "InformationUsageSubtitleBackground",StripOnInput -> False]},{ItemBox[
TagBox[ButtonBox[PaneSelectorBox[{False -> DynamicBox[FEPrivate`FrontEndResource[
"FEBitmaps","DownPointerOpener"]],True -> DynamicBox[FEPrivate`FrontEndResource["FEBitmaps",
"DownPointerOpenerHot"]]},Dynamic[System`InformationDump`mouseOver$$]],RuleDelayed[
ButtonFunction,FEPrivate`Set[System`InformationDump`open$$,True]],Alignment -> Left,
ImageSize -> Full,FrameMargins -> {{9,0},{0,0}},ImageMargins -> 0,Appearance -> {"Default" -> None},
Evaluator -> Automatic,Method -> "Preemptive"],EventHandlerTag[{RuleDelayed["MouseEntered",
FEPrivate`Set[System`InformationDump`mouseOver$$,True]],RuleDelayed["MouseExited",
FEPrivate`Set[System`InformationDump`mouseOver$$,False]],Method -> "Preemptive",PassEventsDown -> Automatic,PassEventsUp -> True}]],
BaseStyle -> "InformationTitleBackground",StripOnInput -> False],"\[SpanFromLeft]"}},
GridBoxAlignment -> {"Columns" -> {Left,Right},"Rows" -> {{Center}}},AutoDelete -> False,
GridBoxDividers -> {"Columns" -> {{None}},"Rows" -> {False,{True},False}},GridBoxItemSize -> {"Columns" -> {{Automatic}},"Rows" -> {{Automatic}}},
FrameStyle -> Directive[GrayLevel[0.8`],Thickness[Tiny]]],"Grid"]},Dynamic[System`InformationDump`open$$],
ImageSize -> Automatic,FrameMargins -> 0,BaselinePosition -> Baseline],RuleDelayed[
DynamicModuleValues,{}],ExpressionUUID -> "27ba0e10-0a93-4a01-ba48-95bb82272151"],
BaseStyle -> "InformationGridFrame",StripOnInput -> False],"InformationGridPlain",
StripOnInput -> False],InformationData[Association["ObjectType" -> "Symbol","Usage" -> "\!\(\*RowBox[{\"Subscript\", \"[\", RowBox[{StyleBox[\"x\", \"TI\"], \",\", StyleBox[\"y\", \"TI\"]}], \"]\"}]\) is an object that formats as \!\(\*SubscriptBox[StyleBox[\"x\", \"TI\"], StyleBox[\"y\", \"TI\"]]\). \n\!\(\*RowBox[{\"Subscript\", \"[\", RowBox[{StyleBox[\"x\", \"TI\"], \",\", SubscriptBox[StyleBox[\"y\", \"TI\"], StyleBox[\"1\", \"TR\"]], \",\", SubscriptBox[StyleBox[\"y\", \"TI\"], StyleBox[\"2\", \"TR\"]], \",\", StyleBox[\"\[Ellipsis]\", \"TR\"]}], \"]\"}]\) formats as \!\(\*SubscriptBox[StyleBox[\"x\", \"TI\"], RowBox[{SubscriptBox[StyleBox[\"y\", \"TI\"], StyleBox[\"1\", \"TR\"]], \",\", SubscriptBox[StyleBox[\"y\", \"TI\"], StyleBox[\"2\", \"TR\"]], \",\", \"\[Ellipsis]\"}]]\).",
"Documentation" -> Association["Web" -> "http://reference.wolfram.com/language/ref/Subscript.html"],
"OwnValues" -> None,"UpValues" -> None,"DownValues" -> None,"SubValues" -> Information`InformationValueForm[
SubValues,Subscript,{Subscript[x,1][Plus[dt,t]] -> Plus[Times[dt,Subscript[\[Mu],
1]],Times[Subscript[dB,1],Subscript[\[Sigma],11]],Times[Subscript[dB,2],Subscript[
\[Sigma],12]],Subscript[x,1][t]]}],"DefaultValues" -> None,"NValues" -> None,"FormatValues" -> None,
"Options" -> None,"Attributes" -> {NHoldRest},"FullName" -> "System`Subscript"],True]],
StandardForm],"Output",CellLabel -> "Out[80]= ",ExpressionUUID -> "08e8c212-91e1-4a7b-b9fd-f324ad7c6f9d"]},
Open],ExpressionUUID -> "8fc1f7ba-4611-49c1-920d-abc783aa3a32"],Cell[
BoxData[""],
"Input",CellLabel -> "In[81]:= ",ExpressionUUID -> "266f9d9e-d289-46b5-97c4-20f894f342e7"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoMake","[",RowBox[{RowBox[{SubscriptBox["x","2"],"[","t","]"}],","," ",SubscriptBox[
"\[Mu]","2"],","," ",RowBox[{"{",RowBox[{SubscriptBox["\[Sigma]","21"],","," ",SubscriptBox[
"\[Sigma]","22"]}],"}"}]}],"]"}]],"Input",CellLabel -> "In[82]:= ",ExpressionUUID -> "62734698-92fa-4b4e-8538-3e63027b1e64"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",SubscriptBox["\[Mu]","2"]}],"+",RowBox[{SubscriptBox["dB",
"1"]," ",SubscriptBox["\[Sigma]","21"]}],"+",RowBox[{SubscriptBox["dB","2"]," ",SubscriptBox[
"\[Sigma]","22"]}]}],StandardForm],"Output",CellLabel -> "Out[82]= ",ExpressionUUID -> "9cf76bf0-ad9c-4432-8745-84fdfa544edb"]},
Open],ExpressionUUID -> "951f846c-de93-457a-8645-3de6d4e64d6e"],Cell[
TextData[{"Alternatively one can use ",StyleBox[
"VectorItoMake",FontFamily -> "Courier",FontWeight -> "Bold"],", which applies ",StyleBox[
"ItoMake",FontFamily -> "Courier New",FontWeight -> "Bold"]," to a vector indexed with ",StyleBox[
"Subscripts",FontFamily -> "Courier New",FontWeight -> "Bold"],":"}],"Text",ExpressionUUID -> "30987aea-9bfd-40b9-8d74-3e3dd9c40762"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"VectorItoMake","[",RowBox[{RowBox[{"x","[","t","]"}],",","2"}],"]"}]],
"Input",CellLabel -> "In[83]:= ",ExpressionUUID -> "0d746bab-aceb-4869-85aa-7aba4a66fffa"],Cell[
BoxData[
RowBox[{"{",RowBox[{RowBox[{RowBox[{"dt"," ",RowBox[{"\[Mu]","[",SubscriptBox["x",
"1"],"]"}]}],"+",RowBox[{SubscriptBox["dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]",
"1"],"[",SubscriptBox["x","1"],"]"}]}],"+",RowBox[{SubscriptBox["dB","2"]," ",RowBox[
{SubscriptBox["\[Sigma]","2"],"[",SubscriptBox["x","1"],"]"}]}]}],",",RowBox[{RowBox[
{"dt"," ",RowBox[{"\[Mu]","[",SubscriptBox["x","2"],"]"}]}],"+",RowBox[{SubscriptBox[
"dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]","1"],"[",SubscriptBox["x","2"],"]"}]}],"+",RowBox[
{SubscriptBox["dB","2"]," ",RowBox[{SubscriptBox["\[Sigma]","2"],"[",SubscriptBox[
"x","2"],"]"}]}]}]}],"}"}],StandardForm],"Output",CellLabel -> "Out[83]= ",ExpressionUUID -> "bad813b9-4ffb-407a-8dbd-198f34ec633e"]},
Open],ExpressionUUID -> "10b01c19-a4fc-4488-a5f3-739f5c75103b"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoD","["," ",RowBox[{"f","[",RowBox[{RowBox[{SubscriptBox[
"x","1"],"[","t","]"}],",",RowBox[{SubscriptBox["x","2"],"[","t","]"}],",","t"}],"]"}]," ","]"}]],
"Input",CellLabel -> "In[84]:= ",ExpressionUUID -> "05a8f077-b0a3-436a-aaf8-c7fd8acf10de"],Cell[
BoxData[
RowBox[{RowBox[{SubscriptBox["dB","1"]," ",RowBox[{"(",RowBox[{RowBox[{RowBox[{SubscriptBox[
"\[Sigma]","1"],"[",SubscriptBox["x","2"],"]"}]," ",RowBox[{SuperscriptBox["f",TagBox[
RowBox[{"(",RowBox[{"0",",","1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{SubscriptBox["x","1"],",",SubscriptBox["x","2"],",","t"}],"]"}]}],"+",RowBox[{RowBox[
{SubscriptBox["\[Sigma]","1"],"[",SubscriptBox["x","1"],"]"}]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{SubscriptBox["x","1"],",",SubscriptBox["x","2"],",","t"}],"]"}]}]}],")"}]}],"+",RowBox[
{SubscriptBox["dB","2"]," ",RowBox[{"(",RowBox[{RowBox[{RowBox[{SubscriptBox["\[Sigma]",
"2"],"[",SubscriptBox["x","2"],"]"}]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[
{"(",RowBox[{"0",",","1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{SubscriptBox["x","1"],",",SubscriptBox["x","2"],",","t"}],"]"}]}],"+",RowBox[{RowBox[
{SubscriptBox["\[Sigma]","2"],"[",SubscriptBox["x","1"],"]"}]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{SubscriptBox["x","1"],",",SubscriptBox["x","2"],",","t"}],"]"}]}]}],")"}]}],"+",RowBox[
{"dt"," ",RowBox[{"(",RowBox[{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[
{"0",",","0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{SubscriptBox[
"x","1"],",",SubscriptBox["x","2"],",","t"}],"]"}],"+",RowBox[{RowBox[{"\[Mu]","[",SubscriptBox[
"x","2"],"]"}]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{SubscriptBox["x","1"],",",SubscriptBox[
"x","2"],",","t"}],"]"}]}],"+",RowBox[{FractionBox["1","2"]," ",SuperscriptBox[RowBox[
{SubscriptBox["\[Sigma]","1"],"[",SubscriptBox["x","2"],"]"}],"2"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"0",",","2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{SubscriptBox["x","1"],",",SubscriptBox["x","2"],",","t"}],"]"}]}],"+",RowBox[{FractionBox[
"1","2"]," ",SuperscriptBox[RowBox[{SubscriptBox["\[Sigma]","2"],"[",SubscriptBox[
"x","2"],"]"}],"2"]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","2",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{SubscriptBox["x","1"],",",SubscriptBox[
"x","2"],",","t"}],"]"}]}],"+",RowBox[{RowBox[{"\[Mu]","[",SubscriptBox["x","1"],"]"}]," ",RowBox[
{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0",",","0"}],")"}],Derivative],
MultilineFunction -> None],"[",RowBox[{SubscriptBox["x","1"],",",SubscriptBox["x",
"2"],",","t"}],"]"}]}],"+",RowBox[{RowBox[{SubscriptBox["\[Sigma]","1"],"[",SubscriptBox[
"x","1"],"]"}]," ",RowBox[{SubscriptBox["\[Sigma]","1"],"[",SubscriptBox["x","2"],"]"}]," ",RowBox[
{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","1",",","0"}],")"}],Derivative],
MultilineFunction -> None],"[",RowBox[{SubscriptBox["x","1"],",",SubscriptBox["x",
"2"],",","t"}],"]"}]}],"+",RowBox[{RowBox[{SubscriptBox["\[Sigma]","2"],"[",SubscriptBox[
"x","1"],"]"}]," ",RowBox[{SubscriptBox["\[Sigma]","2"],"[",SubscriptBox["x","2"],"]"}]," ",RowBox[
{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","1",",","0"}],")"}],Derivative],
MultilineFunction -> None],"[",RowBox[{SubscriptBox["x","1"],",",SubscriptBox["x",
"2"],",","t"}],"]"}]}],"+",RowBox[{FractionBox["1","2"]," ",SuperscriptBox[RowBox[
{SubscriptBox["\[Sigma]","1"],"[",SubscriptBox["x","1"],"]"}],"2"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"2",",","0",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{SubscriptBox["x","1"],",",SubscriptBox["x","2"],",","t"}],"]"}]}],"+",RowBox[{FractionBox[
"1","2"]," ",SuperscriptBox[RowBox[{SubscriptBox["\[Sigma]","2"],"[",SubscriptBox[
"x","1"],"]"}],"2"]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"2",",","0",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{SubscriptBox["x","1"],",",SubscriptBox[
"x","2"],",","t"}],"]"}]}]}],")"}]}]}],StandardForm],"Output",CellLabel -> "Out[84]= ",
ExpressionUUID -> "879f38f6-1de0-4853-ba59-f4d9312b186e"]},Open],ExpressionUUID -> "b4f3f80d-13b0-42aa-9e47-faa4e537b428"]},
Open],ExpressionUUID -> "5750a6a2-1ff0-43da-8721-238d526a2529"],Cell[
CellGroupData[
{Cell[
"\<A vector of Brownians; three examples from \[CapitalOSlash]ksendal\>","Subsection",
ExpressionUUID -> "458059d0-d5ff-4f03-a01b-12020a6a7794"],Cell[
CellGroupData[{Cell[
BoxData[
{RowBox[{"Clear","[","B","]"}],"\n",RowBox[{"VectorItoMake","[",RowBox[{RowBox[{"B","[","t","]"}],","," ","0",","," ","1",","," ","3"}],"]"}],"\n",RowBox[
{"Bvec"," ","="," ",RowBox[{"Array","[",RowBox[{RowBox[{RowBox[{SubscriptBox["B",
"#"],"[","t","]"}],"&"}],","," ","3"}],"]"}]}]}],"Input",CellLabel -> "In[85]:= ",
ExpressionUUID -> "ad46d1c1-064f-4fc5-bde4-0c33e546b1b5"],Cell[
BoxData[RowBox[{"{",RowBox[
{SubscriptBox["dB","1"],",",SubscriptBox["dB","2"],",",SubscriptBox["dB","3"]}],"}"}],
StandardForm],"Output",CellLabel -> "Out[86]= ",ExpressionUUID -> "0245b80c-aba3-4398-ad2a-e3509cc069c2"],Cell[
BoxData[
RowBox[{"{",RowBox[{RowBox[{SubscriptBox["B","1"],"[","t","]"}],",",RowBox[{SubscriptBox[
"B","2"],"[","t","]"}],",",RowBox[{SubscriptBox["B","3"],"[","t","]"}]}],"}"}],StandardForm],
"Output",CellLabel -> "Out[87]= ",ExpressionUUID -> "6e17a028-9842-4b51-9474-5329a63ac586"]},
Open],ExpressionUUID -> "df21dd45-ff20-4970-96b6-dcb944270956"],Cell[
CellGroupData[
{Cell[
"\<First example\>","Subsubsection",ExpressionUUID -> "ee9b4fe4-fab2-4ee6-967b-5ab955a94f16"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"R","=",RowBox[{"Sqrt","[",RowBox[{"Bvec",".","Bvec"}],"]"}]}]],
"Input",CellLabel -> "In[88]:= ",ExpressionUUID -> "7d0c5f8b-7318-4f14-a69c-6f38674d63ce"],Cell[
BoxData[
SqrtBox[RowBox[{SuperscriptBox[RowBox[{SubscriptBox["B","1"],"[","t","]"}],"2"],"+",SuperscriptBox[
RowBox[{SubscriptBox["B","2"],"[","t","]"}],"2"],"+",SuperscriptBox[RowBox[{SubscriptBox[
"B","3"],"[","t","]"}],"2"]}]],StandardForm],"Output",CellLabel -> "Out[88]= ",ExpressionUUID -> "daeb7235-cedf-40d9-990a-2878db8c56a7"]},
Open],ExpressionUUID -> "53737c43-2c72-4799-a713-a785cb273381"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"Simplify"," ","/@"," ",RowBox[{"ItoD","[","R","]"}]}]," "}]],
"Input",CellLabel -> "In[89]:= ",ExpressionUUID -> "7ea2e8ec-3439-4745-bccb-eceeed1a7e59"],Cell[
BoxData[
RowBox[{FractionBox["dt",SqrtBox[RowBox[{SubsuperscriptBox["B","1","2"],"+",SubsuperscriptBox[
"B","2","2"],"+",SubsuperscriptBox["B","3","2"]}]]],"+",FractionBox[RowBox[{SubscriptBox[
"B","1"]," ",SubscriptBox["dB","1"]}],SqrtBox[RowBox[{SubsuperscriptBox["B","1","2"],"+",SubsuperscriptBox[
"B","2","2"],"+",SubsuperscriptBox["B","3","2"]}]]],"+",FractionBox[RowBox[{SubscriptBox[
"B","2"]," ",SubscriptBox["dB","2"]}],SqrtBox[RowBox[{SubsuperscriptBox["B","1","2"],"+",SubsuperscriptBox[
"B","2","2"],"+",SubsuperscriptBox["B","3","2"]}]]],"+",FractionBox[RowBox[{SubscriptBox[
"B","3"]," ",SubscriptBox["dB","3"]}],SqrtBox[RowBox[{SubsuperscriptBox["B","1","2"],"+",SubsuperscriptBox[
"B","2","2"],"+",SubsuperscriptBox["B","3","2"]}]]]}],StandardForm],"Output",CellLabel -> "Out[89]= ",
ExpressionUUID -> "b1f2df0b-8e30-4c5f-9649-b9e1c9a5a3b9"]},Open],ExpressionUUID -> "8780e325-8d1c-43fb-951f-756ba4fc216e"]},
Open],ExpressionUUID -> "f0e627ab-97ba-4492-ac1f-7e51fe89dbf5"],Cell[
CellGroupData[
{Cell[
"\<Second example\>","Subsubsection",ExpressionUUID -> "77fa98b8-13ac-4a26-8533-a8a707d5760f"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"vec2"," ","="," ",RowBox[{"{",RowBox[{RowBox[{"Plus"," ","@@"," ","Bvec"}],","," ",RowBox[
{SuperscriptBox[RowBox[{SubscriptBox["B","2"],"[","t","]"}],"2"],"-"," ",RowBox[{RowBox[
{SubscriptBox["B","1"],"[","t","]"}],RowBox[{SubscriptBox["B","3"],"[","t","]"}]}]}]}],"}"}]}]],
"Input",CellLabel -> "In[90]:= ",ExpressionUUID -> "ce622e54-d98c-4845-8ffc-dde5921bed5c"],Cell[
BoxData[
RowBox[{"{",RowBox[{RowBox[{RowBox[{SubscriptBox["B","1"],"[","t","]"}],"+",RowBox[
{SubscriptBox["B","2"],"[","t","]"}],"+",RowBox[{SubscriptBox["B","3"],"[","t","]"}]}],",",RowBox[
{SuperscriptBox[RowBox[{SubscriptBox["B","2"],"[","t","]"}],"2"],"-",RowBox[{RowBox[
{SubscriptBox["B","1"],"[","t","]"}]," ",RowBox[{SubscriptBox["B","3"],"[","t","]"}]}]}]}],"}"}],
StandardForm],"Output",CellLabel -> "Out[90]= ",ExpressionUUID -> "156723ee-bdcd-460c-8d0f-12ec6e3b04f2"]},
Open],ExpressionUUID -> "432b8b97-8d59-478b-8a91-19b4cd30e574"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"ItoD","[","vec2","]"}],"//","MatrixForm"}]],"Input",
CellLabel -> "In[91]:= ",ExpressionUUID -> "14840512-9a93-4fcc-8e2b-b7f54100232f"],Cell[
BoxData[
TagBox[RowBox[{"(","\[NoBreak]",TagBox[GridBox[{{RowBox[{SubscriptBox["dB","1"],"+",SubscriptBox[
"dB","2"],"+",SubscriptBox["dB","3"]}]},{RowBox[{"dt","-",RowBox[{SubscriptBox["B",
"3"]," ",SubscriptBox["dB","1"]}],"+",RowBox[{"2"," ",SubscriptBox["B","2"]," ",SubscriptBox[
"dB","2"]}],"-",RowBox[{SubscriptBox["B","1"]," ",SubscriptBox["dB","3"]}]}]}},RowSpacings -> 1,
ColumnAlignments -> Center,ColumnAlignments -> Left],Column],"\[NoBreak]",")"}],Function[
BoxForm`e$,MatrixForm[BoxForm`e$]]],StandardForm],"Output",CellLabel -> "Out[91]//MatrixForm= ",
ExpressionUUID -> "d0d51907-50f9-4854-b331-20ca1c0ef9b7"]},Open],ExpressionUUID -> "f7997db7-cade-4817-a7fa-c676ca7bb0df"]},
Open],ExpressionUUID -> "61147c37-e133-43a7-be81-3df51fc658b1"],Cell[
CellGroupData[
{Cell[
"\<Third example\>","Subsubsection",ExpressionUUID -> "d91482b2-c8c4-4c85-8fcb-1abb3af3c819"],Cell[

"\<Show that the following have zero drifts\>","Text",ExpressionUUID -> "44dd0ee8-6892-4132-b7f3-5121a1c3a42e"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"vec3","=",RowBox[{"{",RowBox[{RowBox[{SuperscriptBox["E",
RowBox[{"t","/","2"}]]," ",RowBox[{"Cos","[",RowBox[{SubscriptBox["B","1"],"[","t","]"}],"]"}]}],",",RowBox[
{SuperscriptBox["E",RowBox[{"t","/","2"}]]," ",RowBox[{"Sin","[",RowBox[{SubscriptBox[
"B","1"],"[","t","]"}],"]"}]}],","," ",RowBox[{RowBox[{"(",RowBox[{RowBox[{SubscriptBox[
"B","1"],"[","t","]"}]," ","+"," ","t"}],")"}],RowBox[{"Exp","[",RowBox[{RowBox[{"-",RowBox[
{SubscriptBox["B","1"],"[","t","]"}]}],"-",RowBox[{"t","/","2"}]}],"]"}]}]}],"}"}]}]],
"Input",CellLabel -> "In[92]:= ",ExpressionUUID -> "88b228e2-9ee4-491e-b971-15d63a578f24"],Cell[
BoxData[
RowBox[{"{",RowBox[{RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{"t","/","2"}]]," ",RowBox[
{"Cos","[",RowBox[{SubscriptBox["B","1"],"[","t","]"}],"]"}]}],",",RowBox[{SuperscriptBox[
"\[ExponentialE]",RowBox[{"t","/","2"}]]," ",RowBox[{"Sin","[",RowBox[{SubscriptBox[
"B","1"],"[","t","]"}],"]"}]}],",",RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[
{RowBox[{"-",FractionBox["t","2"]}],"-",RowBox[{SubscriptBox["B","1"],"[","t","]"}]}]]," ",RowBox[
{"(",RowBox[{"t","+",RowBox[{SubscriptBox["B","1"],"[","t","]"}]}],")"}]}]}],"}"}],
StandardForm],"Output",CellLabel -> "Out[92]= ",ExpressionUUID -> "8d665ac5-b65a-4e0e-b0ae-51ced9a89883"]},
Open],ExpressionUUID -> "f69752f9-34fb-4710-b625-b1b80d2662ba"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{RowBox[{"ItoD","[","vec3","]"}],"//","Drift"}],"//","Simplify"}]],
"Input",CellLabel -> "In[93]:= ",ExpressionUUID -> "6c313579-b4a1-4c9b-b337-121f26378681"],Cell[
BoxData[
RowBox[{"{",RowBox[{"0",",","0",",","0"}],"}"}],StandardForm],"Output",CellLabel -> "Out[93]= ",
ExpressionUUID -> "43ced9ec-9101-43b5-83b7-c5da6ea25103"]},Open],ExpressionUUID -> "32f74872-a4b5-44a0-994e-218566970e6c"]},
Open],ExpressionUUID -> "45314381-a00a-424a-aff6-11fe0d3f6c69"]},Open],ExpressionUUID -> "d9f03eb3-32da-4f96-b3de-fa890de7ffb7"]},
Open],ExpressionUUID -> "671a1e89-32a0-4cfd-a7c3-122a92d718d3"],Cell[
CellGroupData[
{Cell[
"\<Examples from finance\>","Section",ExpressionUUID -> "95653649-7ed4-46b6-9a1d-b7036dac3546"],Cell[
CellGroupData[
{Cell[
"\<Forward rates and bond prices\>","Subsection",ShowGroupOpener -> False,
ExpressionUUID -> "1582da3e-a5e6-442f-962a-cea3ca14bbd6"],Cell[
CellGroupData[{Cell[

"\<Forward rates\>","Subsubsection",ExpressionUUID -> "4a370c26-b2b1-47b5-a026-81d374b91a6c"],Cell[
TextData[
{"Start with Ito process for forward rates, ",Cell[
BoxData[FormBox[RowBox[{"f","[",RowBox[
{"t",",","T"}],"]"}],TraditionalForm]],ExpressionUUID -> "3404cea4-880b-48c8-94a3-c19b3acc6ddb"],", where ",Cell[
BoxData[
FormBox[RowBox[{"T","-","t"}],TraditionalForm]],ExpressionUUID -> "68d0266f-3344-412c-a6aa-8ae42418c4ea"]," is the maturity of the forward rate and ",Cell[
BoxData[
FormBox["T",TraditionalForm]],ExpressionUUID -> "eb46fccc-c4e1-4cab-be1a-d22ae9fbdbbd"]," is a fixed time in the future."}],
"Text",ExpressionUUID -> "ba7e102e-8566-4211-b6d5-34b4bffe7477"],Cell[
CellGroupData[
{Cell[
BoxData[{RowBox[{"Clear","[","f","]"}],"\n",RowBox[{"ItoMake","[",RowBox[{RowBox[
{"f","[",RowBox[{"t",",","T"}],"]"}],","," ",RowBox[{SubscriptBox["\[Mu]","f"],"[",RowBox[
{"t",",","T"}],"]"}],","," ",RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[{"t",",","T"}],"]"}]}],"]"}]}],
"Input",CellLabel -> "In[94]:= ",ExpressionUUID -> "86924c11-460c-4ca2-98fd-0bf85b7d9392"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",RowBox[{SubscriptBox["\[Mu]","f"],"[",RowBox[{"t",",","T"}],"]"}]}],"+",RowBox[
{SubscriptBox["dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[{"t",",","T"}],"]"}]}]}],
StandardForm],"Output",CellLabel -> "Out[95]= ",ExpressionUUID -> "f75f15f7-24ae-4936-bbb1-653d316c33e8"]},
Open],ExpressionUUID -> "2d4cbc5c-13e2-4089-bb73-c29d9c3732c2"]},Open],ExpressionUUID -> "33bf93df-8bda-4824-9b4b-982c8b351b43"],Cell[
CellGroupData[
{Cell[
TextData[{"The interest rate as ",Cell[
BoxData[FormBox[RowBox[{"f","[",RowBox[
{"t",",","t"}],"]"}],TraditionalForm]],ExpressionUUID -> "3a324f88-3c51-4131-bfbc-f871231e83fe"]}],
"Subsubsection",ExpressionUUID -> "3fbc9f5c-9b51-406f-9411-fcadba6471f7"],Cell[
TextData[
{"The instantaneous forward rate is the interest rate: ",Cell[
BoxData[FormBox[RowBox[
{RowBox[{"r","[","t","]"}]," ","="," ",RowBox[{"f","[",RowBox[{"t",",","t"}],"]"}]}],
TraditionalForm]],ExpressionUUID -> "8f41d509-b319-4f6b-bd7b-8d52c45433fb"],". In this case, however, the second argument is no longer fixed."}],
"Text",ExpressionUUID -> "82262aee-aa3b-4c5d-84ff-6e70154cc8d0"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoD","[",RowBox[{"f","[",RowBox[{"t",",","t"}],"]"}],"]"}]],
"Input",CellLabel -> "In[96]:= ",ExpressionUUID -> "d86e88f1-d289-48f9-afc9-c9dfeb2bef0b"],Cell[
BoxData[
RowBox[{RowBox[{SubscriptBox["dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[
{"t",",","t"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[{RowBox[{SubscriptBox[
"\[Mu]","f"],"[",RowBox[{"t",",","t"}],"]"}],"+",RowBox[{SuperscriptBox["f",TagBox[
RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","t"}],"]"}]}],")"}]}]}],StandardForm],"Output",CellLabel -> "Out[96]= ",
ExpressionUUID -> "bf4de7a7-f93b-4be7-b48b-63dfcb8d6492"]},Open],ExpressionUUID -> "1b0a1e28-6765-4417-a553-99916622e227"],Cell[
TextData[
{"The preceding result is formally correct if we interpret ",Cell[
BoxData[FormBox[
RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],
MultilineFunction -> None],"[",RowBox[{"t",",","t"}],"]"}],TraditionalForm]],ExpressionUUID -> "cb09bd31-d478-456a-8f2e-f3be23d345ef"]," as follows:"}],
"Text",TextAlignment -> Left,ExpressionUUID -> "a867ddd9-014c-47ed-abb6-79d4e93dfdbe",
TextJustification -> 0],Cell[
TextData[{" ",Cell[
BoxData[FormBox[RowBox[{RowBox[
{FormBox[RowBox[{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"(",RowBox[{"t",",","t"}],")"}]," ","="," ",RowBox[
{RowBox[{SuperscriptBox["f",RowBox[{"(",RowBox[{"0",",","1"}],")"}]],"(",RowBox[{"0",",","t"}],")"}]," ","+"," ",SubsuperscriptBox[
"\[Integral]","0","t"]}]}],TraditionalForm],FractionBox["\[PartialD]",RowBox[{"\[PartialD]","\[InvisibleSpace]","t"}]],RowBox[
{SubscriptBox["\[Mu]","f"],"(",RowBox[{"s",",","t"}],")"}],RowBox[{"\[DifferentialD]","s"}]}]," ","+"," ",RowBox[
{SubsuperscriptBox["\[Integral]","0","t"],RowBox[{RowBox[{FractionBox["\[PartialD]",
RowBox[{"\[PartialD]","\[InvisibleSpace]","t"}]],RowBox[{SubscriptBox["\[Sigma]",
"f"],"(",RowBox[{"s",",","t"}],")"}]}],RowBox[{RowBox[{"\[DifferentialD]",RowBox[
{"W","(","s",")"}]}],"."}]}]}]}],TraditionalForm]],TextAlignment -> Left,TextJustification -> 0,
ExpressionUUID -> "57999697-9f3a-4790-a652-77d0c728e286"]}],"Text",TextAlignment -> Center,
ExpressionUUID -> "76200faa-9254-4ef4-be8a-0d05d1a9558c",TextJustification -> 0]},
Open],ExpressionUUID -> "33f6fb10-c855-4d1d-b432-1ccd7085a2a8"],Cell[
CellGroupData[
{Cell[
"\<From forward rates to bond prices and back again\>","Subsubsection",ExpressionUUID -> "05110a7c-7c3f-4d2e-8c3c-8218f6ce7920"],Cell[
TextData[
{"Bond prices: ",Cell[
BoxData[FormBox[RowBox[{RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}]," ","="," ",SuperscriptBox[
"\[ExponentialE]",RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[
{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]}],
TraditionalForm]],ExpressionUUID -> "f7bd922b-d8ff-4644-89d4-ee98c6e484f1"],"."}],
"Text",ExpressionUUID -> "b29842b3-5949-44e4-9f4e-75724b682048"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dp"," ","=",RowBox[{"ItoD","[",SuperscriptBox["\[ExponentialE]",
RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[
{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]],"]"}]}]],"Input",CellLabel -> "In[97]:= ",
ExpressionUUID -> "5e65f904-d7de-4036-b2ea-8aaaaa9efd2e"],Cell[
BoxData[RowBox[{RowBox[
{"dt"," ",RowBox[{"(",RowBox[{RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"(",RowBox[{RowBox[{"f","[",RowBox[{"t",",","t"}],"]"}],"-",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox["\[Mu]","f"],"[",RowBox[
{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}],")"}]}],"+",RowBox[{FractionBox[
"1","2"]," ",SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",SuperscriptBox[RowBox[{"(",RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}],")"}],"2"]}]}],")"}]}],"-",RowBox[{SuperscriptBox["\[ExponentialE]",
RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[
{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"(",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox["\[Sigma]",
"f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}]," ",SubscriptBox[
"dB","1"]}]}],StandardForm],"Output",CellLabel -> "Out[97]= ",ExpressionUUID -> "277f90c5-fb54-422b-9e6b-a9b956272635"]},
Open],ExpressionUUID -> "29fb8361-9749-4800-a02f-3f2523a0663b"],Cell[
BoxData[RowBox[
{"Clear","[","p","]"}]],"Input",CellLabel -> "In[98]:= ",ExpressionUUID -> "ea3cd6a6-29db-4cd6-8cb2-2620e7aa5edf"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoMakeFromItoD","[",RowBox[{RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],",","dp"}],"]"}]],
"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[99]:= ",ExpressionUUID -> "8aa80fea-ecf0-4766-8e52-086bbb132785"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",RowBox[{"(",RowBox[{RowBox[{SuperscriptBox["\[ExponentialE]",
RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[
{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"(",RowBox[
{RowBox[{"f","[",RowBox[{"t",",","t"}],"]"}],"-",RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{SubscriptBox["\[Mu]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}],")"}]}],"+",RowBox[{FractionBox["1","2"]," ",SuperscriptBox[
"\[ExponentialE]",RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[
{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]," ",SuperscriptBox[
RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox[
"\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}],
"2"]}]}],")"}]}],"-",RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}],")"}]," ",SubscriptBox["dB","1"]}]}],StandardForm],
"Output",CellLabel -> "Out[99]= ",ExpressionUUID -> "76932ab0-09b9-492b-bf26-3181e1e0a221"]},
Open],ExpressionUUID -> "27f7986a-0b4b-4489-9a06-1b991000d50f"],Cell[
TextData[{"The Ito process for forward rates: ",Cell[
BoxData[
FormBox[RowBox[{RowBox[{"d","\[InvisibleSpace]",RowBox[{"f","[",RowBox[{"t",",","T"}],"]"}]}]," ","="," ",RowBox[
{RowBox[{"-",FractionBox["\[PartialD]",RowBox[{"\[PartialD]","T"}]]}],"d","\[InvisibleSpace]",RowBox[
{"log","(",RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],")"}]}]}],TraditionalForm]],
ExpressionUUID -> "26dd20af-a36f-4746-b2c1-116d81f874d2"],"."}],"Text",ExpressionUUID -> "a75b7a3d-6454-4348-ac9d-9a5ac2293107"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"df"," ","="," ",RowBox[{"-",RowBox[{"D","[",RowBox[{RowBox[
{"ItoD","[",RowBox[{"Log","[",RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],"]"}],"]"}],",","T"}],"]"}]}]}]],
"Input",CellLabel -> "In[100]:= ",ExpressionUUID -> "22db25de-c776-459f-85d0-173aa83bcd90"],Cell[
BoxData[
RowBox[{RowBox[{"-",FractionBox[RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"f","[",RowBox[{"t",",","T"}],"]"}]," ",RowBox[
{"(",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox[
"\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}]," ",SubscriptBox[
"dB","1"]}],RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}]]}],"+",FractionBox[RowBox[
{SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]," ",SubscriptBox[
"dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[{"t",",","T"}],"]"}]}],
RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}]],"-",FractionBox[RowBox[{SuperscriptBox[
"\[ExponentialE]",RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[
{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[
{"(",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox[
"\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}]," ",SubscriptBox[
"dB","1"]," ",RowBox[{SuperscriptBox["p",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","T"}],"]"}]}],SuperscriptBox[
RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],"2"]],"-",RowBox[{"dt"," ",RowBox[{"(",RowBox[
{FractionBox[RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{RowBox[{"-","2"}]," ",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"f","[",RowBox[{"t",",","T"}],"]"}]," ",SuperscriptBox[
RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox[
"\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}],
"2"]}],SuperscriptBox[RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],"2"]],"-",FractionBox[
RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{RowBox[{"-","2"}]," ",RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}],")"}]," ",RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[
{"t",",","T"}],"]"}]}],SuperscriptBox[RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],
"2"]],"+",FractionBox[RowBox[{RowBox[{RowBox[{"-",SuperscriptBox["\[ExponentialE]",
RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[
{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]}]," ",RowBox[{"f","[",RowBox[
{"t",",","T"}],"]"}]," ",RowBox[{"(",RowBox[{RowBox[{"f","[",RowBox[{"t",",","t"}],"]"}],"-",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox["\[Mu]","f"],"[",RowBox[
{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}],")"}]}],"-",RowBox[{FractionBox[
"1","2"]," ",SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"f","[",RowBox[{"t",",","T"}],"]"}]," ",SuperscriptBox[
RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox[
"\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}],
"2"]}],"-",RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{SubscriptBox["\[Mu]","f"],"[",RowBox[
{"t",",","T"}],"]"}]}],"+",RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}],")"}]," ",RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[
{"t",",","T"}],"]"}]}]}],RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}]],"+",FractionBox[
RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{RowBox[{"-","2"}]," ",RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}]]," ",SuperscriptBox[RowBox[{"(",RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}],")"}],"2"]," ",RowBox[{SuperscriptBox["p",TagBox[RowBox[
{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","T"}],"]"}]}],SuperscriptBox[RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],
"3"]],"-",FractionBox[RowBox[{RowBox[{"(",RowBox[{RowBox[{SuperscriptBox["\[ExponentialE]",
RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[
{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]," ",RowBox[{"(",RowBox[
{RowBox[{"f","[",RowBox[{"t",",","t"}],"]"}],"-",RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{SubscriptBox["\[Mu]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}],")"}]}],"+",RowBox[{FractionBox["1","2"]," ",SuperscriptBox[
"\[ExponentialE]",RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[
{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]," ",SuperscriptBox[
RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SubscriptBox[
"\[Sigma]","f"],"[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}],
"2"]}]}],")"}]," ",RowBox[{SuperscriptBox["p",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","T"}],"]"}]}],SuperscriptBox[
RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],"2"]]}],")"}]}]}],StandardForm],"Output",
CellLabel -> "Out[100]= ",ExpressionUUID -> "d4cf0e31-88de-4873-8707-98fce2937294"]},
Open],ExpressionUUID -> "ab778155-b646-4975-bc72-de132aee14c7"],Cell[
"\<The preceding expression looks somewhat messy. We can simplify it a bit:\>",
"Text",ExpressionUUID -> "7ba3fa24-93fb-472f-89a7-beb313f6ae56"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"df","/.",RowBox[{"p","->",RowBox[{"Function","[",RowBox[
{RowBox[{"{",RowBox[{"t",",","T"}],"}"}],","," ",SuperscriptBox["\[ExponentialE]",
RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"f","[",RowBox[
{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]]}],"]"}]}]}],"//","Simplify"}]],
"Input",CellLabel -> "In[101]:= ",ExpressionUUID -> "1a8bf53d-f0be-4aba-8563-327103933b0e"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",RowBox[{SubscriptBox["\[Mu]","f"],"[",RowBox[{"t",",","T"}],"]"}]}],"+",RowBox[
{SubscriptBox["dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]","f"],"[",RowBox[{"t",",","T"}],"]"}]}]}],
StandardForm],"Output",CellLabel -> "Out[101]= ",ExpressionUUID -> "631fbab6-1562-4cca-9e5a-c7449a754df2"]},
Open],ExpressionUUID -> "9f2bc2d4-b855-427d-87df-41b92eebe403"]},Open],ExpressionUUID -> "94c18bb3-180f-4d4c-9589-33ff633863a0"],Cell[
CellGroupData[
{Cell[
"\<From bond prices to forward rates and back again\>","Subsubsection",ExpressionUUID -> "84d7a706-ba10-47a3-903b-1f348a3e070c"],Cell[

"\<Start with the Ito process for bond prices\>","Text",ExpressionUUID -> "b7d664e0-80e3-47cc-8fce-48f6aadf0273"],Cell[
CellGroupData[
{Cell[
BoxData[{RowBox[{"Clear","[","p","]"}],"\n",RowBox[{"RelativeItoMake","[",RowBox[
{RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],",",RowBox[{SubscriptBox["\[Mu]","p"],"[",RowBox[
{"t",",","T"}],"]"}],",",RowBox[{SubscriptBox["\[Sigma]","p"],"[",RowBox[{"t",",","T"}],"]"}]}],"]"}]}],
"Input",CellLabel -> "In[102]:= ",ExpressionUUID -> "82400d89-b404-401e-b480-4cad456a56da"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}]," ",RowBox[{SubscriptBox[
"\[Mu]","p"],"[",RowBox[{"t",",","T"}],"]"}]}],"+",RowBox[{RowBox[{"p","[",RowBox[
{"t",",","T"}],"]"}]," ",SubscriptBox["dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]",
"p"],"[",RowBox[{"t",",","T"}],"]"}]}]}],StandardForm],"Output",CellLabel -> "Out[103]= ",
ExpressionUUID -> "8b26e2e1-c27d-49ff-9132-042acc7cbfe1"]},Open],ExpressionUUID -> "36a52d7f-d8d0-4377-8145-a7aa7e3d70c0"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dp1"," ","="," ",RowBox[{"RelativeItoD","[",RowBox[{"p","[",RowBox[
{"t",",","T"}],"]"}],"]"}]}]],"Input",CellLabel -> "In[104]:= ",ExpressionUUID -> "db7f1f27-2826-4ffa-a777-b8238fa79eb8"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",RowBox[{SubscriptBox["\[Mu]","p"],"[",RowBox[{"t",",","T"}],"]"}]}],"+",RowBox[
{SubscriptBox["dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]","p"],"[",RowBox[{"t",",","T"}],"]"}]}]}],
StandardForm],"Output",CellLabel -> "Out[104]= ",ExpressionUUID -> "0d8fbb0c-453d-4215-893d-45fef00cffbf"]},
Open],ExpressionUUID -> "383aa6d9-7868-4848-bbfb-54ab123f78a7"],Cell[
TextData[{"Again, the Ito process for forward rates: ",Cell[
BoxData[
FormBox[RowBox[{RowBox[{"d","\[InvisibleSpace]",RowBox[{"f","[",RowBox[{"t",",","T"}],"]"}]}]," ","="," ",RowBox[
{RowBox[{"-",FractionBox["\[PartialD]",RowBox[{"\[PartialD]","T"}]]}],"d","\[InvisibleSpace]",RowBox[
{"log","(",RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],")"}]}]}],TraditionalForm]],
ExpressionUUID -> "0673ed85-b1f1-4a80-b01d-a3d60852eacb"],"."}],"Text",ExpressionUUID -> "c2ebbfd2-508b-44b1-85e4-84b3cc4edbf6"],Cell[
BoxData[
RowBox[{"Clear","[","f","]"}]],"Input",CellLabel -> "In[105]:= ",ExpressionUUID -> "6a640908-89cb-4fb7-9c31-7a7479eb85ed"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"df"," ","=",RowBox[{"ItoMakeFromItoD","[",RowBox[{RowBox[
{"f","[",RowBox[{"t",",","T"}],"]"}],",",RowBox[{"-",RowBox[{"D","[",RowBox[{RowBox[
{"ItoD","[",RowBox[{"Log","[",RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],"]"}],"]"}],",","T"}],"]"}]}]}],"]"}]}]],
"Input",CellLabel -> "In[106]:= ",ExpressionUUID -> "247c2030-4c30-4158-b293-bf25e0a791e8"],Cell[
BoxData[
RowBox[{RowBox[{RowBox[{"-",SubscriptBox["dB","1"]}]," ",RowBox[{SuperscriptBox[SubscriptBox[
"\[Sigma]","p"],TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","T"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[{RowBox[{"-",RowBox[
{SuperscriptBox[SubscriptBox["\[Mu]","p"],TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","T"}],"]"}]}],"+",RowBox[
{RowBox[{SubscriptBox["\[Sigma]","p"],"[",RowBox[{"t",",","T"}],"]"}]," ",RowBox[
{SuperscriptBox[SubscriptBox["\[Sigma]","p"],TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","T"}],"]"}]}]}],")"}]}]}],
StandardForm],"Output",CellLabel -> "Out[106]= ",ExpressionUUID -> "e53b4703-7ce2-4c57-b2f0-9ccbf3a0d9b8"]},
Open],ExpressionUUID -> "955f9837-492e-44aa-9e98-1a02db686757"],Cell[
"\<An aside: The arbitrage-free drift of forward rates\>",
"Text",ExpressionUUID -> "3ede9c24-d783-40cb-b94c-c4bf23c1ae3f"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{RowBox[{"Drift","[","df","]"}]," ","/.","  ",RowBox[
{SubscriptBox["\[Mu]","p"],"->",RowBox[{"Function","[",RowBox[{RowBox[{"{",RowBox[
{"t",",","T"}],"}"}],","," ",RowBox[{RowBox[{"r","[","t","]"}],"+",RowBox[{RowBox[
{SubscriptBox["\[Sigma]","p"],"[",RowBox[{"t",",","T"}],"]"}],RowBox[{"\[Lambda]","[","t","]"}]}]}]}]," ","]"}]}]}],"//","Simplify"}]],
"Input",CellLabel -> "In[107]:= ",ExpressionUUID -> "1ec3ec48-8102-4e6b-9d20-df2517113d2e"],Cell[
BoxData[
RowBox[{RowBox[{"(",RowBox[{RowBox[{"-",RowBox[{"\[Lambda]","[","t","]"}]}],"+",RowBox[
{SubscriptBox["\[Sigma]","p"],"[",RowBox[{"t",",","T"}],"]"}]}],")"}]," ",RowBox[
{SuperscriptBox[SubscriptBox["\[Sigma]","p"],TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","T"}],"]"}]}],StandardForm],
"Output",CellLabel -> "Out[107]= ",ExpressionUUID -> "36174473-3ab0-4886-a1f0-55372ce839ed"]},
Open],ExpressionUUID -> "df1a3608-576c-42ad-b343-5870ac9fbb20"],Cell[
"\<Use Ito's lemma to compute the Ito process for bond prices given the derived process for forward rates:\>",
"Text",ExpressionUUID -> "3a5249c5-078f-4f5f-b2e8-7d7931d6c6ef"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dp2"," ","="," ",RowBox[{"RelativeItoD","[",SuperscriptBox[
"\[ExponentialE]",RowBox[{"-",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[
{RowBox[{"f","[",RowBox[{"t",",","v"}],"]"}],RowBox[{"\[DifferentialD]","v"}]}]}]}]],"]"}]}]],
"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[108]:= ",ExpressionUUID -> "7e258a26-b17d-4f83-8e94-fba0439e3ed6"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",RowBox[{"(",RowBox[{RowBox[{"f","[",RowBox[{"t",",","t"}],"]"}],"+",RowBox[
{FractionBox["1","2"]," ",SuperscriptBox[RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{"-",RowBox[{SuperscriptBox[SubscriptBox["\[Sigma]","p"],
TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","v"}],"]"}]}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}],"2"]}],"-",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"(",RowBox[{RowBox[{"-",RowBox[
{SuperscriptBox[SubscriptBox["\[Mu]","p"],TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","v"}],"]"}]}],"+",RowBox[
{RowBox[{SubscriptBox["\[Sigma]","p"],"[",RowBox[{"t",",","v"}],"]"}]," ",RowBox[
{SuperscriptBox[SubscriptBox["\[Sigma]","p"],TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","v"}],"]"}]}]}],")"}],RowBox[
{"\[DifferentialD]","v"}]}]}]}],")"}]}],"-",RowBox[{RowBox[{"(",RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{RowBox[{"-",RowBox[{SuperscriptBox[SubscriptBox["\[Sigma]",
"p"],TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"t",",","v"}],"]"}]}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}]," ",SubscriptBox[
"dB","1"]}]}],StandardForm],"Output",CellLabel -> "Out[108]= ",ExpressionUUID -> "455c35f1-d729-465d-aaee-94f34c5be0b6"]},
Open],ExpressionUUID -> "68909951-41be-4aac-9bf8-3293d6c85fcb"],Cell[
TextData[{"What is the difference between ",StyleBox[
"dp1",FontFamily -> "Courier",FontWeight -> "Bold"]," and ",StyleBox["dp2",FontFamily -> "Courier",
FontWeight -> "Bold"],"?"}],"Text",ExpressionUUID -> "f3454dfa-3792-4a02-9b9e-6f85d5978b7c"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"diff"," ","="," ",RowBox[{"{",RowBox[{RowBox[{RowBox[{RowBox[
{"Diffusion","[","dp1","]"}],"-",RowBox[{"Diffusion","[","dp2","]"}]}]," ","=="," ","0"}],",",RowBox[
{RowBox[{RowBox[{"Drift","[","dp1","]"}],"-",RowBox[{"Drift","[","dp2","]"}]}],"==","0"}]}],"}"}]}]],
"Input",CellLabel -> "In[109]:= ",ExpressionUUID -> "40d6cf66-8465-43f5-9eb2-359de4ee17ff"],Cell[
BoxData[
RowBox[{"{",RowBox[{RowBox[{RowBox[{RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[
{RowBox[{"-",RowBox[{SuperscriptBox[SubscriptBox["\[Sigma]","p"],TagBox[RowBox[{"(",RowBox[
{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","v"}],"]"}]}],RowBox[
{"\[DifferentialD]","v"}]}]}],"+",RowBox[{SubscriptBox["\[Sigma]","p"],"[",RowBox[
{"t",",","T"}],"]"}]}],"\[Equal]","0"}],",",RowBox[{RowBox[{RowBox[{"-",RowBox[{"f","[",RowBox[
{"t",",","t"}],"]"}]}],"-",RowBox[{FractionBox["1","2"]," ",SuperscriptBox[RowBox[
{"(",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"-",RowBox[
{SuperscriptBox[SubscriptBox["\[Sigma]","p"],TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","v"}],"]"}]}],RowBox[{"\[DifferentialD]","v"}]}]}],")"}],
"2"]}],"+",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{"(",RowBox[
{RowBox[{"-",RowBox[{SuperscriptBox[SubscriptBox["\[Mu]","p"],TagBox[RowBox[{"(",RowBox[
{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","v"}],"]"}]}],"+",RowBox[
{RowBox[{SubscriptBox["\[Sigma]","p"],"[",RowBox[{"t",",","v"}],"]"}]," ",RowBox[
{SuperscriptBox[SubscriptBox["\[Sigma]","p"],TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"t",",","v"}],"]"}]}]}],")"}],RowBox[
{"\[DifferentialD]","v"}]}]}],"+",RowBox[{SubscriptBox["\[Mu]","p"],"[",RowBox[{"t",",","T"}],"]"}]}],"\[Equal]","0"}]}],"}"}],
StandardForm],"Output",CellLabel -> "Out[109]= ",ExpressionUUID -> "f627b5ba-cc9b-47c2-872c-8b5f2fa89def"]},
Open],ExpressionUUID -> "98954c10-1937-470a-86e8-f6184be5b607"],Cell[
"\<What conditions must be identically true?\>",
"Text",ExpressionUUID -> "244ef93c-027d-44e0-9cd0-d568e9e1a69e"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"SolveAlways","[",RowBox[{"diff",","," ",RowBox[{SubscriptBox[
"\[Sigma]","p"],"[",RowBox[{"t",",","T"}],"]"}]}],"]"}]],"Input",CellLabel -> "In[110]:= ",
ExpressionUUID -> "edccd1aa-cf03-4c2c-8239-ac28b9f27e21"],Cell[
BoxData[RowBox[{"{","}"}],
StandardForm],"Output",CellLabel -> "Out[110]= ",ExpressionUUID -> "67872e30-5a21-49f8-a529-efb4f01016d0"]},
Open],ExpressionUUID -> "109be0ea-20a9-4454-a546-618a581bf873"]},Open],ExpressionUUID -> "e77cb61e-dc02-4ef7-9417-e3079b976e60"],Cell[
CellGroupData[
{Cell[
"\<An annuity\>","Subsubsection",ExpressionUUID -> "aeb30311-d91e-4e06-9303-0b918ab791d0"],Cell[
CellGroupData[
{Cell[
BoxData[{RowBox[{"Clear","[","p","]"}],"\n",RowBox[{"RelativeItoMake","[",RowBox[
{RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}],",",RowBox[{SubscriptBox["\[Mu]","p"],"[",RowBox[
{"t",",","T"}],"]"}],",",RowBox[{SubscriptBox["\[Sigma]","p"],"[",RowBox[{"t",",","T"}],"]"}]}],"]"}]}],
"Input",CellLabel -> "In[111]:= ",ExpressionUUID -> "3ecbdfa2-0c90-4e99-8052-84727c1bc16f"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",RowBox[{"p","[",RowBox[{"t",",","T"}],"]"}]," ",RowBox[{SubscriptBox[
"\[Mu]","p"],"[",RowBox[{"t",",","T"}],"]"}]}],"+",RowBox[{RowBox[{"p","[",RowBox[
{"t",",","T"}],"]"}]," ",SubscriptBox["dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]",
"p"],"[",RowBox[{"t",",","T"}],"]"}]}]}],StandardForm],"Output",CellLabel -> "Out[112]= ",
ExpressionUUID -> "693c34f2-bb6f-4412-bbe7-62bef1affc00"]},Open],ExpressionUUID -> "afb8f166-6cd1-4913-a478-be40702e4469"],Cell[

"\<Compute the process for an annuity (using the fact that a zero-coupon bond is worth one at maturity).\>",
"Text",ExpressionUUID -> "350bdaf8-8c67-49a8-a836-6720426516b1"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"ItoD","[",RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{"p","[",RowBox[{"t",",","s"}],"]"}],RowBox[{"\[DifferentialD]","s"}]}]}],"]"}],"/."," ",RowBox[
{RowBox[{"p","[",RowBox[{"T_",",","T_"}],"]"}],"->","1"}]}]],"Input",CellLabel -> "In[113]:= ",
ExpressionUUID -> "ab5908ab-bb74-42fa-aa46-45e4fc008e24"],Cell[
BoxData[RowBox[{RowBox[
{"dt"," ",RowBox[{"(",RowBox[{RowBox[{"-","1"}],"+",RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{RowBox[{"p","[",RowBox[{"t",",","s"}],"]"}]," ",RowBox[{SubscriptBox[
"\[Mu]","p"],"[",RowBox[{"t",",","s"}],"]"}]}],RowBox[{"\[DifferentialD]","s"}]}]}]}],")"}]}],"+",RowBox[
{RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{RowBox[
{"p","[",RowBox[{"t",",","s"}],"]"}]," ",RowBox[{SubscriptBox["\[Sigma]","p"],"[",RowBox[
{"t",",","s"}],"]"}]}],RowBox[{"\[DifferentialD]","s"}]}]}],")"}]," ",SubscriptBox[
"dB","1"]}]}],StandardForm],"Output",CellLabel -> "Out[113]= ",ExpressionUUID -> "dafc936d-7032-4105-900b-36924a0a40c4"]},
Open],ExpressionUUID -> "8ad118b6-485f-4dd2-bcbe-f7109fcf2864"]},Open],ExpressionUUID -> "adc2c96e-4e28-44f8-990a-466fee4202ff"]},
Open],ExpressionUUID -> "fc679bcf-81df-4b08-8cf5-1bd737967f10"],Cell[
CellGroupData[
{Cell[
"\<Exponential diffusions\>","Subsection",ShowGroupOpener -> False,ExpressionUUID -> "733bcc7e-7a7c-4d13-82db-96d6d10ebca8"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ExponentialItoMake","[",RowBox[{"v","[","t","]"}],"]"}]],
"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[114]:= ",ExpressionUUID -> "429e73c4-beb4-476b-a7c6-1475dc5719b3"],Cell[
BoxData[
RowBox[{RowBox[{SubscriptBox["dB","1"]," ",SubscriptBox["\[Sigma]","v"]," ",RowBox[
{"v","[","t","]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[{FractionBox[SubsuperscriptBox[
"\[Sigma]","v","2"],"2"],"+",SubscriptBox[RowBox[{"Global`OverTilde","[","\[Mu]","]"}],
"v"]}],")"}]," ",RowBox[{"v","[","t","]"}]}]}],StandardForm],"Output",CellLabel -> "Out[114]= ",
ExpressionUUID -> "a53cc7e0-2f93-40f6-89a8-c2e3ca97ab66"]},Open],ExpressionUUID -> "6e0c4876-13fb-4775-8da3-656acdc9bf2a"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoD","[",RowBox[{"Log","[",RowBox[{"v","[","t","]"}],"]"}],"]"}]],
"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[115]:= ",ExpressionUUID -> "2d5a9776-1f5c-488f-858e-8f17ecf89d14"],Cell[
BoxData[
RowBox[{RowBox[{SubscriptBox["dB","1"]," ",SubscriptBox["\[Sigma]","v"]}],"+",RowBox[
{"dt"," ",SubscriptBox[RowBox[{"Global`OverTilde","[","\[Mu]","]"}],"v"]}]}],StandardForm],
"Output",CellLabel -> "Out[115]= ",ExpressionUUID -> "2d4b5eba-e895-4597-a093-6ef032d37fbf"]},
Open],ExpressionUUID -> "a0bcb9a3-90e9-4ddd-95c0-3afd413cc85d"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"RelativeItoD","[",RowBox[{"v","[","t","]"}],"]"}]],"Input",
CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[116]:= ",ExpressionUUID -> "f04f564c-abc7-45d3-890a-a6aacfb57ba4"],Cell[
BoxData[
RowBox[{RowBox[{SubscriptBox["dB","1"]," ",SubscriptBox["\[Sigma]","v"]}],"+",RowBox[
{"dt"," ",RowBox[{"(",RowBox[{FractionBox[SubsuperscriptBox["\[Sigma]","v","2"],"2"],"+",SubscriptBox[
RowBox[{"Global`OverTilde","[","\[Mu]","]"}],"v"]}],")"}]}]}],StandardForm],"Output",
CellLabel -> "Out[116]= ",ExpressionUUID -> "b392f640-c45f-4360-a1b0-6659bc38181e"]},
Open],ExpressionUUID -> "34d10a9d-1603-4f84-8dec-4bf8886975f4"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ExponentialItoMake","[",RowBox[{RowBox[{"\[Psi]","[","t","]"}],",",OverscriptBox[
"\[Mu]","~"],","," ","\[Sigma]",",","2"}],"]"}]],"Input",CellDingbat -> None,ShowGroupOpener -> False,
CellLabel -> "In[117]:= ",ExpressionUUID -> "edd923ef-baeb-414f-a630-b2d72b8a70e9"],Cell[
BoxData[
RowBox[{RowBox[{SubscriptBox["dB","1"]," ",RowBox[{"\[Psi]","[","t","]"}]," ",RowBox[
{SubscriptBox["\[Sigma]","1"],"[","\[Psi]","]"}]}],"+",RowBox[{SubscriptBox["dB",
"2"]," ",RowBox[{"\[Psi]","[","t","]"}]," ",RowBox[{SubscriptBox["\[Sigma]","2"],"[","\[Psi]","]"}]}],"+",RowBox[
{"dt"," ",RowBox[{"\[Psi]","[","t","]"}]," ",RowBox[{"(",RowBox[{RowBox[{OverscriptBox[
"\[Mu]","~"],"[","\[Psi]","]"}],"+",RowBox[{FractionBox["1","2"]," ",RowBox[{"(",RowBox[
{SuperscriptBox[RowBox[{SubscriptBox["\[Sigma]","1"],"[","\[Psi]","]"}],"2"],"+",SuperscriptBox[
RowBox[{SubscriptBox["\[Sigma]","2"],"[","\[Psi]","]"}],"2"]}],")"}]}]}],")"}]}]}],
StandardForm],"Output",CellLabel -> "Out[117]= ",ExpressionUUID -> "630d3133-3ef2-4c69-8ac1-28cc3696cd9d"]},
Open],ExpressionUUID -> "2284865e-d05a-460c-9d26-c358592d9f63"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Simplify","/@",RowBox[{"ItoD","[",RowBox[{"Log","[",RowBox[
{"\[Psi]","[","t","]"}],"]"}],"]"}]}]],"Input",CellDingbat -> None,ShowGroupOpener -> False,
CellLabel -> "In[118]:= ",ExpressionUUID -> "c5aa3a7d-d5eb-40be-bb20-e695d9f7227c"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ",RowBox[{OverscriptBox["\[Mu]","~"],"[","\[Psi]","]"}]}],"+",RowBox[
{SubscriptBox["dB","1"]," ",RowBox[{SubscriptBox["\[Sigma]","1"],"[","\[Psi]","]"}]}],"+",RowBox[
{SubscriptBox["dB","2"]," ",RowBox[{SubscriptBox["\[Sigma]","2"],"[","\[Psi]","]"}]}]}],
StandardForm],"Output",CellLabel -> "Out[118]= ",ExpressionUUID -> "187cf0fd-30d1-4561-9e9a-794b1c48141d"]},
Open],ExpressionUUID -> "cc292531-2a3a-4dd0-97a8-2e92809ca4d8"]},Open],ExpressionUUID -> "d2d4de78-b374-4844-94ac-75d56f990ac4"],Cell[
CellGroupData[
{Cell[
"\<State-price deflator and money-market account\>","Subsection",ShowGroupOpener -> False,
ExpressionUUID -> "476da608-9681-4162-a246-75901bf977f9"],Cell[
BoxData[RowBox[{"Clear","[",RowBox[
{"m",",","\[Beta]",",","\[Zeta]",",","n",","," ","r",","," ","\[Lambda]",","," ","R",","," ","\[CapitalLambda]"}],"]"}]],
"Input",CellLabel -> "In[119]:= ",ExpressionUUID -> "41eedadc-9f1a-42f7-b949-a89454809e6d"],Cell[

"\<State-price deflator\>","Text",ExpressionUUID -> "72cd5e58-906f-4eed-82bc-13bc45f163e3"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"RelativeItoMake","[",RowBox[{RowBox[{"m","[","t","]"}],",",RowBox[
{"-","r"}],",",RowBox[{"-","\[Lambda]"}]}],"]"}]],"Input",CellDingbat -> None,ShowGroupOpener -> False,
CellLabel -> "In[120]:= ",ExpressionUUID -> "6037f710-9509-4fdc-9f8d-4a4503bd0971"],Cell[
BoxData[
RowBox[{RowBox[{RowBox[{"-","dt"}]," ","r"," ",RowBox[{"m","[","t","]"}]}],"-",RowBox[
{"\[Lambda]"," ",RowBox[{"m","[","t","]"}]," ",SubscriptBox["dB","1"]}]}],StandardForm],
"Output",CellLabel -> "Out[120]= ",ExpressionUUID -> "b8fc7401-bdf7-45f2-893b-d08ac2cde85a"]},
Open],ExpressionUUID -> "d8a672a9-c6ec-4415-acd1-aecf7ac71921"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"RelativeItoD","[",RowBox[{"m","[","t","]"}],"]"}]],"Input",
CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[121]:= ",ExpressionUUID -> "b7b0ad32-ec36-4b81-b44e-88a857d5227b"],Cell[
BoxData[
RowBox[{RowBox[{RowBox[{"-","dt"}]," ","r"}],"-",RowBox[{"\[Lambda]"," ",SubscriptBox[
"dB","1"]}]}],StandardForm],"Output",CellLabel -> "Out[121]= ",ExpressionUUID -> "644b3917-92b9-4fa2-ba37-b9f651a1eb9d"]},
Open],ExpressionUUID -> "c12d172f-183c-4cd7-9042-4328ec11259c"],Cell[
"\<Money-market account\>",
"Text",CellDingbat -> None,ShowGroupOpener -> False,ExpressionUUID -> "d403d39b-c8b9-4c2f-884d-c850b2c7177b"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"RelativeItoMake","[",RowBox[{RowBox[{"\[Beta]","[","t","]"}],",","r",",","0"}],"]"}]],
"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[122]:= ",ExpressionUUID -> "439ddae6-9fc2-4924-8294-276ab092b8bf"],Cell[
BoxData[
RowBox[{"dt"," ","r"," ",RowBox[{"\[Beta]","[","t","]"}]}],StandardForm],"Output",
CellLabel -> "Out[122]= ",ExpressionUUID -> "31367e1e-e24e-4425-aff7-c0e2d9ba5b28"]},
Open],ExpressionUUID -> "1953203e-bfdf-484b-b581-cddd4a4dc68a"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"RelativeItoD","[",RowBox[{"\[Beta]","[","t","]"}],"]"}]],
"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[123]:= ",ExpressionUUID -> "e4c55541-93c1-4691-8168-3be56f48fbb0"],Cell[
BoxData[
RowBox[{"dt"," ","r"}],StandardForm],"Output",CellLabel -> "Out[123]= ",ExpressionUUID -> "533cefbe-f52a-46cd-9cbe-264af7438abd"]},
Open],ExpressionUUID -> "b9c296b8-4ba7-4193-bef8-667ac4448b3d"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"RelativeItoMake","[",RowBox[{RowBox[{"\[Zeta]","[","t","]"}],","," ","0",","," ",RowBox[
{"-","\[Lambda]"}]}],"]"}]],"Input",CellLabel -> "In[124]:= ",ExpressionUUID -> "16f5a262-4d77-4465-9640-8a3d0465900e"],Cell[
BoxData[
RowBox[{RowBox[{"-","\[Lambda]"}]," ",SubscriptBox["dB","1"]," ",RowBox[{"\[Zeta]","[","t","]"}]}],
StandardForm],"Output",CellLabel -> "Out[124]= ",ExpressionUUID -> "e2b98643-1c58-4ef6-be2c-00e1386c6e77"]},
Open],ExpressionUUID -> "41ddabaf-5f9b-4f03-ad19-97fb8f008da2"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"RelativeItoD","[",RowBox[{RowBox[{"\[Zeta]","[","t","]"}],"/",RowBox[
{"\[Beta]","[","t","]"}]}],"]"}]],"Input",CellLabel -> "In[125]:= ",ExpressionUUID -> "53b67b4e-8cd4-4faf-8e9a-c9967aaa3224"],Cell[
BoxData[
RowBox[{RowBox[{RowBox[{"-","dt"}]," ","r"}],"-",RowBox[{"\[Lambda]"," ",SubscriptBox[
"dB","1"]}]}],StandardForm],"Output",CellLabel -> "Out[125]= ",ExpressionUUID -> "9b99577b-71a4-4ecb-80a2-c21cfe605981"]},
Open],ExpressionUUID -> "6b988629-53c6-4c24-ae60-6e4cf7645215"],Cell[
"\<Two state-price deflators\>",
"Text",ExpressionUUID -> "d245f7df-ab4c-4003-b220-4ebbfb469018"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"RelativeItoMake","[",RowBox[{RowBox[{"n","[","t","]"}],","," ",RowBox[
{"-","R"}],","," ",RowBox[{"-","\[CapitalLambda]"}]}],"]"}]],"Input",CellLabel -> "In[126]:= ",
ExpressionUUID -> "4984fc5c-6584-42f3-90f8-ccaeb400455b"],Cell[
BoxData[RowBox[{RowBox[
{RowBox[{"-","dt"}]," ","R"," ",RowBox[{"n","[","t","]"}]}],"-",RowBox[{"\[CapitalLambda]"," ",RowBox[
{"n","[","t","]"}]," ",SubscriptBox["dB","1"]}]}],StandardForm],"Output",CellLabel -> "Out[126]= ",
ExpressionUUID -> "37473bf8-55cc-4e67-984a-9011c879c193"]},Open],ExpressionUUID -> "50962f93-f89a-4873-875d-94e8fdb0b02c"],Cell[

"\<The Ito process for the log of the exchange rate\>","Text",ExpressionUUID -> "56d90893-747d-4328-8239-629fd95191f8"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dX"," ","="," ",RowBox[{RowBox[{"ItoD","[",RowBox[{"Log","[",RowBox[
{RowBox[{"m","[","t","]"}],"/",RowBox[{"n","[","t","]"}]}],"]"}],"]"}],"//","Simplify"}]}]],
"Input",CellLabel -> "In[127]:= ",ExpressionUUID -> "1e1df1e0-ad3a-42ff-805f-78cfb0a2c3c2"],Cell[
BoxData[
RowBox[{RowBox[{FractionBox["1","2"]," ","dt"," ",RowBox[{"(",RowBox[{RowBox[{RowBox[
{"-","2"}]," ","r"}],"+",RowBox[{"2"," ","R"}],"-",SuperscriptBox["\[Lambda]","2"],"+",SuperscriptBox[
"\[CapitalLambda]","2"]}],")"}]}],"+",RowBox[{RowBox[{"(",RowBox[{RowBox[{"-","\[Lambda]"}],"+","\[CapitalLambda]"}],")"}]," ",SubscriptBox[
"dB","1"]}]}],StandardForm],"Output",CellLabel -> "Out[127]= ",ExpressionUUID -> "9bf98fbe-f35c-4698-97d5-adf9cf77d174"]},
Open],ExpressionUUID -> "41dd56f6-3439-4e60-a205-00a7a792f31c"],Cell[
"\<Expected exchange rate depreciation\>",
"Text",ExpressionUUID -> "61765c0f-996d-4de3-867b-423532c18ce2"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"Drift","[","dX","]"}],"//","Expand"}]],"Input",CellLabel -> "In[128]:= ",
ExpressionUUID -> "2ae79bd6-aef7-46f5-b248-ef78c22136a2"],Cell[
BoxData[RowBox[{RowBox[
{"-","r"}],"+","R","-",FractionBox[SuperscriptBox["\[Lambda]","2"],"2"],"+",FractionBox[
SuperscriptBox["\[CapitalLambda]","2"],"2"]}],StandardForm],"Output",CellLabel -> "Out[128]= ",
ExpressionUUID -> "8f7f5b27-fd84-46ed-b36b-cc028e84c10c"]},Open],ExpressionUUID -> "dbd9667e-96b5-4762-973c-04be01e24bef"]},
Open],ExpressionUUID -> "5da4ca0a-d858-4077-9abd-03c8ba37bae8"],Cell[
CellGroupData[
{Cell[
"\<Exponentially-weighted forecast\>","Subsection",ExpressionUUID -> "9b857ebc-2153-4b98-bf57-aaa604201978"],Cell[
TextData[
{"Exponentially-weighted forecast, where ",Cell[
BoxData[FormBox[RowBox[{RowBox[{"z","[",RowBox[
{"t",",","s"}],"]"}]," ",":="," ",RowBox[{SubscriptBox["E","t"],"[",RowBox[{"z","[","s","]"}],"]"}]}],
TraditionalForm]],ExpressionUUID -> "f4d9b313-7948-49c1-953b-87cff2bdd7b7"],"."}],
"Text",ExpressionUUID -> "65211dd1-c91e-40c1-a9e2-278b4676751d"],Cell[
BoxData[RowBox[
{"Clear","[",RowBox[{"z",",","V"}],"]"}]],"Input",CellLabel -> "In[129]:= ",ExpressionUUID -> "99dcdd25-b2ee-4f02-9c22-c9215f8d263d"],Cell[
BoxData[
RowBox[{RowBox[{"SetOptions","[",RowBox[{"Integrate",","," ",RowBox[{"GenerateConditions","->","False"}]}],"]"}],";"}]],
"Input",CellLabel -> "In[130]:= ",ExpressionUUID -> "ae0fcd51-53c6-4f2d-aa90-4eb1d4139b8d"],Cell[

"\<Conditional expectations are martingales:\>","Text",ExpressionUUID -> "3bee1085-af74-4648-bdd3-521196b0fab9"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"ItoMake","[",RowBox[{RowBox[{"z","[",RowBox[{"t",",","s"}],"]"}],",","0",",",RowBox[
{"sigZ","[",RowBox[{"t",",","s"}],"]"}]}],"]"}]],"Input",CellDingbat -> None,ShowGroupOpener -> False,
CellLabel -> "In[131]:= ",ExpressionUUID -> "0f2bad7b-d8dc-4841-b299-d308e6c3181c"],Cell[
BoxData[
RowBox[{RowBox[{"sigZ","[",RowBox[{"t",",","s"}],"]"}]," ",SubscriptBox["dB","1"]}],
StandardForm],"Output",CellLabel -> "Out[131]= ",ExpressionUUID -> "d259a10b-07ae-4024-b525-70cfaf086429"]},
Open],ExpressionUUID -> "89fe7137-ffb7-443d-a4fe-ce3648b51ecd"],Cell[
"\<Define the weighted forecast,\>",
"Text",ExpressionUUID -> "699e0f3e-5321-413a-8052-32e1ac8bdf23"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"V","[","t_","]"}]," ","="," ",RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{"\[Theta]"," ",SuperscriptBox["\[ExponentialE]",RowBox[
{RowBox[{"-","\[Theta]"}],RowBox[{"(",RowBox[{"s","-","t"}],")"}]}]],RowBox[{"z","[",RowBox[
{"t",",","s"}],"]"}],RowBox[{"\[DifferentialD]","s"}]}]}]}]],"Input",CellLabel -> "In[132]:= ",
ExpressionUUID -> "0cfd7260-06c5-4941-ae6d-b6506903fca8"],Cell[
BoxData[RowBox[{SubsuperscriptBox[
"\[Integral]","t","T"],RowBox[{RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[
{"(",RowBox[{RowBox[{"(",RowBox[{"s","-","t"}],")"}]," ","\[Theta]"}],")"}]}]]," ","\[Theta]"," ",RowBox[
{"z","[",RowBox[{"t",",","s"}],"]"}]}],RowBox[{"\[DifferentialD]","s"}]}]}],StandardForm],
"Output",CellLabel -> "Out[132]= ",ExpressionUUID -> "78fa1ccc-7d61-4873-b3db-4fc960c56200"]},
Open],ExpressionUUID -> "7c945470-3ebf-4043-9a8d-558141d98ba1"],Cell[
"\<where\>",
"Text",ExpressionUUID -> "78dca55a-fa94-478d-b9e0-d899d09fb1d5"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{" ",RowBox[{RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[
{"\[Theta]"," ",SuperscriptBox["\[ExponentialE]",RowBox[{RowBox[{"-","\[Theta]"}],RowBox[
{"(",RowBox[{"s","-","t"}],")"}]}]],RowBox[{"\[DifferentialD]","s"}]}]}],"//","Simplify"}]}]],
"Input",CellLabel -> "In[133]:= ",ExpressionUUID -> "390a37d1-15f6-4e9d-8969-a8ca37197a85"],Cell[
BoxData[
RowBox[{"1","-",SuperscriptBox["\[ExponentialE]",RowBox[{RowBox[{"(",RowBox[{"t","-","T"}],")"}]," ","\[Theta]"}]]}],
StandardForm],"Output",CellLabel -> "Out[133]= ",ExpressionUUID -> "fc32ffa3-430c-4853-a798-a78719f6e137"]},
Open],ExpressionUUID -> "76e013f5-884d-484d-9f1f-67988162b4d8"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dV","  ","=",RowBox[{"ItoD","[",RowBox[{"V","[","t","]"}],"]"}]}]],
"Input",CellDingbat -> None,ShowGroupOpener -> False,CellLabel -> "In[134]:= ",ExpressionUUID -> "359a663c-add6-46ee-b28b-5abe5e95fb44"],Cell[
BoxData[
RowBox[{RowBox[{RowBox[{"(",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[
{RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[{"(",RowBox[{RowBox[
{"(",RowBox[{"s","-","t"}],")"}]," ","\[Theta]"}],")"}]}]]," ","\[Theta]"," ",RowBox[
{"sigZ","[",RowBox[{"t",",","s"}],"]"}]}],RowBox[{"\[DifferentialD]","s"}]}]}],")"}]," ",SubscriptBox[
"dB","1"]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[{RowBox[{SubsuperscriptBox["\[Integral]",
"t","T"],RowBox[{RowBox[{SuperscriptBox["\[ExponentialE]",RowBox[{"-",RowBox[{"(",RowBox[
{RowBox[{"(",RowBox[{"s","-","t"}],")"}]," ","\[Theta]"}],")"}]}]]," ",SuperscriptBox[
"\[Theta]","2"]," ",RowBox[{"z","[",RowBox[{"t",",","s"}],"]"}]}],RowBox[{"\[DifferentialD]","s"}]}]}],"-",RowBox[
{"\[Theta]"," ",RowBox[{"z","[",RowBox[{"t",",","t"}],"]"}]}]}],")"}]}]}],StandardForm],
"Output",CellLabel -> "Out[134]= ",ExpressionUUID -> "cbbe207e-eed0-411b-80a1-e13270045b2c"]},
Open],ExpressionUUID -> "08a128a1-e648-4362-be82-6ed56d0845d7"],Cell[
TextData[{"Note the drift of ",Cell[
BoxData[
FormBox["V",TraditionalForm]],ExpressionUUID -> "abd85fb7-691c-4d60-923f-fc3accde9f28"]," is ",Cell[
BoxData[
FormBox[RowBox[{"\[Theta]"," ",RowBox[{"(",RowBox[{RowBox[{"V","[","t","]"}]," ","-",RowBox[
{"z","[",RowBox[{"t",",","t"}],"]"}]}],")"}]}],TraditionalForm]],ExpressionUUID -> "6a2bcc45-b22c-4f7c-92e5-0b2a4d6e54f0"],"."}],
"Text",ExpressionUUID -> "1397a757-2c9f-407f-a4e4-9cab9cf61771"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{RowBox[{"Drift","[","dV","]"}]," ","=="," ",RowBox[
{"\[Theta]"," ",RowBox[{"(",RowBox[{RowBox[{"V","[","t","]"}],"-",RowBox[{"z","[",RowBox[
{"t",",","t"}],"]"}]}],")"}]}]}],"//","Simplify"}]],"Input",CellLabel -> "In[135]:= ",
ExpressionUUID -> "51ed6cbd-f33d-4f16-a194-a8ba91d0158d"],Cell[
BoxData[RowBox[{RowBox[
{"\[Theta]"," ",RowBox[{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SuperscriptBox[
"\[ExponentialE]",RowBox[{RowBox[{"(",RowBox[{RowBox[{"-","s"}],"+","t"}],")"}]," ","\[Theta]"}]]," ","\[Theta]"," ",RowBox[
{"z","[",RowBox[{"t",",","s"}],"]"}]}],RowBox[{"\[DifferentialD]","s"}]}]}]}],"\[Equal]",RowBox[
{SubsuperscriptBox["\[Integral]","t","T"],RowBox[{RowBox[{SuperscriptBox["\[ExponentialE]",
RowBox[{RowBox[{"(",RowBox[{RowBox[{"-","s"}],"+","t"}],")"}]," ","\[Theta]"}]]," ",SuperscriptBox[
"\[Theta]","2"]," ",RowBox[{"z","[",RowBox[{"t",",","s"}],"]"}]}],RowBox[{"\[DifferentialD]","s"}]}]}]}],
StandardForm],"Output",CellLabel -> "Out[135]= ",ExpressionUUID -> "9b8c80bb-fad2-4158-834b-275a03870059"]},
Open],ExpressionUUID -> "2ce201a9-19c3-4620-87f4-07cb1e1e6a5d"]},Open],ExpressionUUID -> "617075c3-3273-473b-931d-1d9d155d91aa"]},
Open],ExpressionUUID -> "3ac59746-976e-41dd-ba9a-43f7f74a7173"],Cell[
CellGroupData[
{Cell[
"\<Deriving the Black-Scholes PDE using a replicating, self-financing trading strategy\>",
"Section",ExpressionUUID -> "305a50a2-2f71-4a6c-bb70-aa106be68c36"],Cell[
"\<In this section, we use ItosLemma to derive the Black-Scholes PDE in two separate ways.\>",
"Text",ExpressionUUID -> "381d6e8d-4e5f-475b-b15a-68b663b3c8c9"],Cell[
CellGroupData[
{Cell[
"\<Setup\>","Subsection",ExpressionUUID -> "f10268e8-8f06-4246-86e9-1d5c0c0a9e6d"],Cell[
BoxData[
RowBox[{RowBox[{"SetOptions","[",RowBox[{"ItoD",",",RowBox[{"SuppressTime","\[Rule]","False"}]}],"]"}],";"}]],
"Input",CellLabel -> "In[136]:= ",ExpressionUUID -> "9fff3a31-37d4-49a6-814f-17995ff92fbb"]},
Open],ExpressionUUID -> "ffa82984-0784-426c-b726-a55f58dfd24c"],Cell[
CellGroupData[
{Cell[
"\<First Derivation\>","Subsection",ExpressionUUID -> "7eb0cdcb-8de1-415f-962f-3eb1ee9d33d3"],Cell[
TextData[
{"This derivation follows that given by Darrell Duffie in chapter 5 of ",StyleBox[
"Dynamic Asset Pricing Theory",FontSlant -> "Italic"],"."}],"Text",ExpressionUUID -> "d15e23b4-4987-4486-aa1b-8437d7217962"],Cell[
BoxData[
RowBox[{"Clear","[",RowBox[{"s",",","\[Beta]",",","f",",","\[Mu]",",","\[Sigma]"}],"]"}]],
"Input",CellLabel -> "In[137]:= ",ExpressionUUID -> "efa3b78e-aeb5-4b67-a97c-a97daffa73f7"],Cell[

"\<The diffusions for the stock and the money-market account:\>","Text",ExpressionUUID -> "71f5d3cd-a97b-42d4-b685-b284fd5496b4"],Cell[
BoxData[
FormBox[RowBox[{FractionBox[RowBox[{"d","\[InvisibleSpace]",RowBox[{"s","(","t",")"}]}],
RowBox[{"s","(","t",")"}]],"="," ",RowBox[{RowBox[{RowBox[{"\[Mu]"," \[InvisibleSpace]","dt"}],"+",RowBox[
{"\[Sigma]","\[InvisibleSpace] ",SubscriptBox["dB","1"],"    ","and","   ",FractionBox[
RowBox[{"d","\[InvisibleSpace]",RowBox[{"\[Beta]","(","t",")"}]}],RowBox[{"\[Beta]","(","t",")"}]]}]}],"="," ",RowBox[
{"r"," \[InvisibleSpace]",RowBox[{"dt","."}]}]}]}],TraditionalForm]],"DisplayFormula",
ExpressionUUID -> "d3e4fd28-fac0-4408-9d5d-7a6daf2690b1"],Cell[
CellGroupData[{Cell[
BoxData[
{RowBox[{"RelativeItoMake","[",RowBox[{RowBox[{"s","[","t","]"}],",","\[Mu]",","," ","\[Sigma]"}],"]"}],"\[IndentingNewLine]",RowBox[
{"RelativeItoMake","[",RowBox[{RowBox[{"\[Beta]","[","t","]"}],",","r",","," ","0"}],"]"}]}],
"Input",CellLabel -> "In[138]:= ",ExpressionUUID -> "02f5d569-f27f-4fc5-8d58-02fe9967119c"],Cell[
BoxData[
RowBox[{RowBox[{"dt"," ","\[Mu]"," ",RowBox[{"s","[","t","]"}]}],"+",RowBox[{"\[Sigma]"," ",RowBox[
{"s","[","t","]"}]," ",SubscriptBox["dB","1"]}]}],StandardForm],"Output",CellLabel -> "Out[138]= ",
ExpressionUUID -> "c4d8bf70-103f-4f38-9d16-9244f21198dc"],Cell[
BoxData[RowBox[{"dt"," ","r"," ",RowBox[
{"\[Beta]","[","t","]"}]}],StandardForm],"Output",CellLabel -> "Out[139]= ",ExpressionUUID -> "e87d93cf-7781-42aa-834c-861a4c13e65b"]},
Open],ExpressionUUID -> "7e276857-308d-487b-91f4-6be8f1415c16"],Cell[
TextData[{"Consider the function of ",Cell[
BoxData[
FormBox[RowBox[{"f","(",RowBox[{RowBox[{"s","(","t",")"}],",","t"}],")"}],TraditionalForm]],
ExpressionUUID -> "2c87ff73-beb4-4f53-93b0-96582d9884db"],". Its dynamics are given as follows:"}],
"Text",ExpressionUUID -> "dbf38ff6-9944-4f4a-b77c-49b2e16d437f"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"df","=",RowBox[{"ItoD","[",RowBox[{"f","[",RowBox[{RowBox[
{"s","[","t","]"}],",","t"}],"]"}],"]"}]}]],"Input",CellLabel -> "In[140]:= ",ExpressionUUID -> "16d11330-b030-43bb-9b18-c5f390eef353"],Cell[
BoxData[
RowBox[{RowBox[{"\[Sigma]"," ",RowBox[{"s","[","t","]"}]," ",SubscriptBox["dB","1"]," ",RowBox[
{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[
{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],
MultilineFunction -> None],"[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}],"+",RowBox[
{"\[Mu]"," ",RowBox[{"s","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[
{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[{FractionBox["1","2"]," ",SuperscriptBox[
"\[Sigma]","2"]," ",SuperscriptBox[RowBox[{"s","[","t","]"}],"2"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}]}],")"}]}]}],StandardForm],"Output",CellLabel -> "Out[140]= ",
ExpressionUUID -> "d46f688b-eade-4144-bba9-699d8499115d"]},Open],ExpressionUUID -> "c282abdd-e19b-4439-b499-b83281bb7639"],Cell[
TextData[
{"Suppose the function can be replicated by a self-financing trading strategy with portfolio weights ",Cell[
BoxData[
FormBox[RowBox[{"a","(","t",")"}],TraditionalForm]],ExpressionUUID -> "5f165f32-34df-4616-8306-e522dd16886e"]," and ",Cell[
BoxData[
FormBox[RowBox[{"b","(","t",")"}],TraditionalForm]],ExpressionUUID -> "d992fbf5-5a9c-4e38-b17a-4ac62f034fbb"],":"}],
"Text",ExpressionUUID -> "5a791361-1dbb-4f56-98f0-333d569837ec"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"self"," ","="," ",RowBox[{RowBox[{RowBox[{"a","[","t","]"}],RowBox[
{"s","[","t","]"}]}],"+",RowBox[{RowBox[{"b","[","t","]"}],RowBox[{"\[Beta]","[","t","]"}]}]}]}]],
"Input",CellLabel -> "In[141]:= ",ExpressionUUID -> "69bfb8bd-a783-44b3-b7f5-e468b1e971b9"],Cell[
BoxData[
RowBox[{RowBox[{RowBox[{"a","[","t","]"}]," ",RowBox[{"s","[","t","]"}]}],"+",RowBox[
{RowBox[{"b","[","t","]"}]," ",RowBox[{"\[Beta]","[","t","]"}]}]}],StandardForm],
"Output",CellLabel -> "Out[141]= ",ExpressionUUID -> "d7266e8d-7340-4877-ad7f-85e910054001"]},
Open],ExpressionUUID -> "10f392a8-a489-4f08-9518-ff890276d143"],Cell[
"\<By definition, the dynamics of a self-financing trading strategy are given by:\>",
"Text",ExpressionUUID -> "451b4152-8706-4b8f-902b-5b6125aaaffe"],Cell[
BoxData[FormBox[
RowBox[{RowBox[{RowBox[{"(","\[Dagger]",")"}],"          ",RowBox[{"d","(",RowBox[
{RowBox[{RowBox[{"a","(","t",")"}],RowBox[{"s","(","t",")"}]}],"+",RowBox[{RowBox[
{"b","(","t",")"}],RowBox[{"\[Beta]","(","t",")"}]}]}],")"}]}]," ","="," ",RowBox[
{RowBox[{RowBox[{"a","(","t",")"}],"d","\[InvisibleSpace]",RowBox[{"s","(","t",")"}]}],"+",RowBox[
{RowBox[{"b","(","t",")"}],"d","\[InvisibleSpace]",RowBox[{"\[Beta]","(","t",")"}]}]}]}],
TraditionalForm]],"DisplayFormula",ExpressionUUID -> "03e17bfc-932b-44a4-acc7-59718f83f820"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"dself","=",RowBox[{"Collect","[","\[IndentingNewLine]",RowBox[
{RowBox[{RowBox[{RowBox[{"a","[","t","]"}]," ",RowBox[{"ItoD","[",RowBox[{"s","[","t","]"}],"]"}]}],"+",RowBox[
{RowBox[{"b","[","t","]"}]," ",RowBox[{"ItoD","[",RowBox[{"\[Beta]","[","t","]"}],"]"}]}]}],",","\[IndentingNewLine]",RowBox[
{"{",RowBox[{"dt",","," ",SubscriptBox["dB","1"]}],"}"}]}],"]"}]}]],"Input",CellLabel -> "In[142]:= ",
ExpressionUUID -> "8dd356ad-90c5-454d-9393-f267fb1ad27f"],Cell[
BoxData[RowBox[{RowBox[
{"\[Sigma]"," ",RowBox[{"a","[","t","]"}]," ",RowBox[{"s","[","t","]"}]," ",SubscriptBox[
"dB","1"]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[{RowBox[{"\[Mu]"," ",RowBox[{"a","[","t","]"}]," ",RowBox[
{"s","[","t","]"}]}],"+",RowBox[{"r"," ",RowBox[{"b","[","t","]"}]," ",RowBox[{"\[Beta]","[","t","]"}]}]}],")"}]}]}],
StandardForm],"Output",CellLabel -> "Out[142]= ",ExpressionUUID -> "81402a82-772f-47c1-a77c-80627d91f8d2"]},
Open],ExpressionUUID -> "f13fff79-984b-4ef2-8608-da553e1f1f4e"],Cell[
"\<If the self-financing trading strategy replicates the function, then the drift and diffusion of the self-financing trading strategy will equal the drift and diffusion of the function:\>",
"Text",ExpressionUUID -> "71f00be9-8f32-4174-a66e-40bf093c8687"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"equations","=",RowBox[{"{","\[IndentingNewLine]",RowBox[{RowBox[
{"self","\[Equal]",RowBox[{"f","[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],",","\[IndentingNewLine]",RowBox[
{RowBox[{"Drift","[","dself","]"}],"\[Equal]",RowBox[{"Drift","[","df","]"}]}],","," ",RowBox[
{RowBox[{"Diffusion","[","dself","]"}],"\[Equal]",RowBox[{"Diffusion","[","df","]"}]}]}],"\[IndentingNewLine]","\t","}"}]}]],
"Input",CellLabel -> "In[143]:= ",ExpressionUUID -> "329f1ab6-097e-460c-b965-6c7ac030bae7"],Cell[
BoxData[
RowBox[{"{",RowBox[{RowBox[{RowBox[{RowBox[{RowBox[{"a","[","t","]"}]," ",RowBox[
{"s","[","t","]"}]}],"+",RowBox[{RowBox[{"b","[","t","]"}]," ",RowBox[{"\[Beta]","[","t","]"}]}]}],"\[Equal]",RowBox[
{"f","[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],",",RowBox[{RowBox[{RowBox[
{"\[Mu]"," ",RowBox[{"a","[","t","]"}]," ",RowBox[{"s","[","t","]"}]}],"+",RowBox[
{"r"," ",RowBox[{"b","[","t","]"}]," ",RowBox[{"\[Beta]","[","t","]"}]}]}],"\[Equal]",RowBox[
{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],
MultilineFunction -> None],"[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}],"+",RowBox[
{"\[Mu]"," ",RowBox[{"s","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[
{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[{FractionBox["1","2"]," ",SuperscriptBox[
"\[Sigma]","2"]," ",SuperscriptBox[RowBox[{"s","[","t","]"}],"2"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}]}]}],",",RowBox[{RowBox[{"\[Sigma]"," ",RowBox[
{"a","[","t","]"}]," ",RowBox[{"s","[","t","]"}]}],"\[Equal]",RowBox[{"\[Sigma]"," ",RowBox[
{"s","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}]}]}],"}"}],
StandardForm],"Output",CellLabel -> "Out[143]= ",ExpressionUUID -> "98d73528-29de-457c-bd9d-12a4f03acf76"]},
Open],ExpressionUUID -> "02c78202-9a8f-415a-8d3b-ef86a8bb5e16"],Cell[
"\<We can obtain the PDE by eliminating the weights from the equations:\>",
"Text",ExpressionUUID -> "bb098d54-6014-430d-9a22-30097a27f98c"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"pde1"," ","="," ",RowBox[{RowBox[{"Eliminate","[",RowBox[
{"equations",","," ",RowBox[{"{",RowBox[{RowBox[{"a","[","t","]"}],","," ",RowBox[
{"b","[","t","]"}]}],"}"}]}],"]"}],"/.",RowBox[{RowBox[{"s","[","t","]"}],"\[Rule]","x"}]}]}]],
"Input",CellLabel -> "In[144]:= ",ExpressionUUID -> "44099c8c-9e79-471e-ba66-88013dba178b"],Cell[
BoxData[
RowBox[{RowBox[{"\[Sigma]"," ",RowBox[{"(",RowBox[{RowBox[{"2"," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}],"+",RowBox[{"2"," ","r"," ","x"," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}],"+",RowBox[{SuperscriptBox["x","2"]," ",SuperscriptBox["\[Sigma]",
"2"]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","t"}],"]"}]}]}],")"}]}],"\[Equal]",RowBox[
{"2"," ","r"," ","\[Sigma]"," ",RowBox[{"f","[",RowBox[{"x",",","t"}],"]"}]}]}],StandardForm],
"Output",CellLabel -> "Out[144]= ",ExpressionUUID -> "ced01b67-7aea-4c36-8932-a55c1e791832"]},
Open],ExpressionUUID -> "9368af4e-f31c-4b96-aec1-061554e475fa"],Cell[
CellGroupData[
{Cell[
"\<Is the trading strategy really self-financing?\>","Subsubsection",ExpressionUUID -> "28eaf804-6b0f-4b26-9c2f-928896a3a2ed"],Cell[

"\<We can solve for the portfolio weights using the equality of the function with the portfolio and the equality of the diffusions:\>",
"Text",ExpressionUUID -> "ed245c32-a0f0-4c92-b07a-20afeece0500"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"weights"," ","="," ",RowBox[{"First"," ","@"," ",RowBox[{"Solve","[",RowBox[
{RowBox[{"equations","[",RowBox[{"[",RowBox[{"{",RowBox[{"1",",","3"}],"}"}],"]"}],"]"}],",",RowBox[
{"{",RowBox[{RowBox[{"a","[","t","]"}],","," ",RowBox[{"b","[","t","]"}]}],"}"}]}],"]"}]}]}]],
"Input",CellLabel -> "In[145]:= ",ExpressionUUID -> "9ace3101-563c-4f8f-8033-c54c10a1a55e"],Cell[
BoxData[
RowBox[{"{",RowBox[{RowBox[{RowBox[{"a","[","t","]"}],"\[Rule]",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],",",RowBox[{RowBox[{"b","[","t","]"}],"\[Rule]",RowBox[
{"-",FractionBox[RowBox[{RowBox[{"-",RowBox[{"f","[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[
{RowBox[{"s","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[
{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}]}],
RowBox[{"\[Beta]","[","t","]"}]]}]}]}],"}"}],StandardForm],"Output",CellLabel -> "Out[145]= ",
ExpressionUUID -> "55c8653d-7aa9-4abd-8400-74771895dddc"]},Open],ExpressionUUID -> "a4146797-95b4-4acf-a1d2-b925667c0b9f"],Cell[
TextData[
{"Is the trading strategy really self-financing? We can check ",Cell[
BoxData[FormBox[
RowBox[{"(","\[Dagger]",")"}],TraditionalForm]],ExpressionUUID -> "5c7c0514-2ac7-4633-a271-bde2316de443"],"."}],
"Text",ExpressionUUID -> "c4ae923e-6301-40b4-97a1-b5738b245aae"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"firstway"," ","="," ",RowBox[{"ItoD","[",RowBox[{"self","/.","weights"}],"]"}]}]],
"Input",CellLabel -> "In[146]:= ",ExpressionUUID -> "eb7a60eb-33f6-40b6-befe-9f72ff65a589"],Cell[
BoxData[
RowBox[{RowBox[{"\[Sigma]"," ",RowBox[{"s","[","t","]"}]," ",SubscriptBox["dB","1"]," ",RowBox[
{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[
{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],
MultilineFunction -> None],"[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}],"+",RowBox[
{"\[Mu]"," ",RowBox[{"s","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[
{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[{FractionBox["1","2"]," ",SuperscriptBox[
"\[Sigma]","2"]," ",SuperscriptBox[RowBox[{"s","[","t","]"}],"2"]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}]}],")"}]}]}],StandardForm],"Output",CellLabel -> "Out[146]= ",
ExpressionUUID -> "326c945a-9606-49bc-ab28-7b50b3b05276"]},Open],ExpressionUUID -> "706795ea-5c3a-44db-b3dc-18eced61f072"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"secondway","=",RowBox[{"dself","/.","weights"}]}]],"Input",
CellLabel -> "In[147]:= ",ExpressionUUID -> "1705c0a2-b658-46af-84a7-e3af4283a3b2"],Cell[
BoxData[
RowBox[{RowBox[{"\[Sigma]"," ",RowBox[{"s","[","t","]"}]," ",SubscriptBox["dB","1"]," ",RowBox[
{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[{"dt"," ",RowBox[{"(",RowBox[
{RowBox[{"\[Mu]"," ",RowBox[{"s","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[
RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"-",RowBox[{"r"," ",RowBox[{"(",RowBox[
{RowBox[{"-",RowBox[{"f","[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[
{RowBox[{"s","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[
{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}]}],")"}]}]}],")"}]}]}],
StandardForm],"Output",CellLabel -> "Out[147]= ",ExpressionUUID -> "b194a129-15aa-47a1-a7d5-881fa9640508"]},
Open],ExpressionUUID -> "b53406ba-f354-4f9a-9a96-415429f797fa"],Cell[
"\<The diffusions are equal:\>",
"Text",ExpressionUUID -> "6434fdb8-fc7e-47f3-b614-819984c211ec"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{RowBox[{"Diffusion","[","firstway","]"}],"\[Equal]",RowBox[
{"Diffusion","[","secondway","]"}]}],"//","Simplify"}]],"Input",CellLabel -> "In[148]:= ",
ExpressionUUID -> "d190fcae-df1a-4b30-8d8b-0bd16e9bf744"],Cell[
BoxData["True",StandardForm],
"Output",CellLabel -> "Out[148]= ",ExpressionUUID -> "3d4c370c-5736-4bdd-b739-a346c0313917"]},
Open],ExpressionUUID -> "0782ab9d-4250-4be0-abbd-7f06141bfcf5"],Cell[
"\<The drifts are equal if and only if the PDE is satisfied. In other words, the trading strategy is self-financing if and only if it replicates.\>",
"Text",ExpressionUUID -> "8ab98fe9-cb2d-435f-b71d-ea2d18213512"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"pde2"," ","="," ",RowBox[{RowBox[{RowBox[{"Drift","[","firstway","]"}],"==",RowBox[
{"Drift","[","secondway","]"}]}],"/.",RowBox[{RowBox[{"s","[","t","]"}],"\[Rule]","x"}]}]}]],
"Input",CellLabel -> "In[149]:= ",ExpressionUUID -> "57de112e-e047-4fc7-bd77-874d8d934ec8"],Cell[
BoxData[
RowBox[{RowBox[{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","t"}],"]"}],"+",RowBox[
{"x"," ","\[Mu]"," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","t"}],"]"}]}],"+",RowBox[
{FractionBox["1","2"]," ",SuperscriptBox["x","2"]," ",SuperscriptBox["\[Sigma]","2"]," ",RowBox[
{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}]}],"\[Equal]",RowBox[{RowBox[{"x"," ","\[Mu]"," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}],"-",RowBox[{"r"," ",RowBox[{"(",RowBox[{RowBox[{"-",RowBox[
{"f","[",RowBox[{"x",",","t"}],"]"}]}],"+",RowBox[{"x"," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}]}],")"}]}]}]}],StandardForm],"Output",CellLabel -> "Out[149]= ",
ExpressionUUID -> "5da12a85-94a6-4ddd-88a8-dc14bda8dd16"]},Open],ExpressionUUID -> "f92fac72-11c4-463c-9e5d-5220f30fba4c"],Cell[
TextData[
{"We can check that the two PDEs are the same by eliminating the parameter ",Cell[
BoxData[
FormBox["r",TraditionalForm]],ExpressionUUID -> "d438c08e-547b-4305-b10c-7b0ae0189291"]," from the two:"}],
"Text",ExpressionUUID -> "a5578cc6-4244-4dcc-8b5a-ea587ff5c11d"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Eliminate","[",RowBox[{RowBox[{"{",RowBox[{"pde1",",","pde2"}],"}"}],",","r"}],"]"}]],
"Input",CellLabel -> "In[150]:= ",ExpressionUUID -> "242f2501-0b1f-4358-afea-4b21f32ae845"],Cell[
BoxData[
"True",StandardForm],"Output",CellLabel -> "Out[150]= ",ExpressionUUID -> "dd1e74a7-9c7e-444d-967e-50bcabfc6966"]},
Open],ExpressionUUID -> "d1fec129-4a4b-44a3-96b5-7a1f761d4519"]},Open],ExpressionUUID -> "1c040895-56a8-47dd-b795-886ea3c86c92"]},
Open],ExpressionUUID -> "de4e1649-185f-476b-a453-4188538c88a7"],Cell[
CellGroupData[
{Cell[
"\<Second derivation\>","Subsection",ExpressionUUID -> "6d561cbb-4e37-4f5b-9b85-b2cef09b7462"],Cell[
TextData[
{"The absence of arbitrage requires that any self-financing trading strategy deflated by the state-price deflator must be a martingale. In other words, the drift of the deflated trading strategy must be zero. The dynamics of the state-price deflator ",Cell[
BoxData[
FormBox[RowBox[{"\[DoubledPi]","(","t",")"}],TraditionalForm]],ExpressionUUID -> "705a0ec5-63ed-4624-9b5f-77411d424a52"]," can be expressed in terms of the risk-free rate and the price of risk ",Cell[
BoxData[
FormBox["\[Lambda]",TraditionalForm]],ExpressionUUID -> "56aea0ae-ff60-4ad1-96f7-9be54ad9ac0d"],":"}],
"Text",ExpressionUUID -> "7a63537d-6b4b-40f1-b506-cf6522595dac"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"RelativeItoMake","[",RowBox[{RowBox[{"\[DoubledPi]","[","t","]"}],","," ",RowBox[
{"-","r"}],","," ",RowBox[{"-","\[Lambda]"}]}],"]"}]],"Input",CellLabel -> "In[151]:= ",
ExpressionUUID -> "a0e9e88e-34cf-44a8-b493-184103a62383"],Cell[
BoxData[RowBox[{RowBox[
{RowBox[{"-","dt"}]," ","r"," ",RowBox[{"\[DoubledPi]","[","t","]"}]}],"-",RowBox[
{"\[Lambda]"," ",SubscriptBox["dB","1"]," ",RowBox[{"\[DoubledPi]","[","t","]"}]}]}],
StandardForm],"Output",CellLabel -> "Out[151]= ",ExpressionUUID -> "fcfb84a1-736e-4f5f-9068-a6ae8f9bfe28"]},
Open],ExpressionUUID -> "46605233-da12-4144-8c1c-3fa1157a7e60"],Cell[
"\<The simplest trading strategy is to buy and hold an asset that pays no dividends. For the stock we have:\>",
"Text",ExpressionUUID -> "13fa0261-6142-49fe-8e3d-dd3538b9190b"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"noarb1"," ","=",RowBox[{RowBox[{"Drift"," ","@"," ",RowBox[
{"ItoD","[",RowBox[{RowBox[{"s","[","t","]"}],RowBox[{"\[DoubledPi]","[","t","]"}]}],"]"}]}],"\[Equal]","0"}]}]],
"Input",CellLabel -> "In[152]:= ",ExpressionUUID -> "a5bb82d6-d3fb-42e7-a50a-3809ad4eff16"],Cell[
BoxData[
RowBox[{RowBox[{RowBox[{RowBox[{"-","r"}]," ",RowBox[{"s","[","t","]"}]," ",RowBox[
{"\[DoubledPi]","[","t","]"}]}],"+",RowBox[{"\[Mu]"," ",RowBox[{"s","[","t","]"}]," ",RowBox[
{"\[DoubledPi]","[","t","]"}]}],"-",RowBox[{"\[Lambda]"," ","\[Sigma]"," ",RowBox[
{"s","[","t","]"}]," ",RowBox[{"\[DoubledPi]","[","t","]"}]}]}],"\[Equal]","0"}],
StandardForm],"Output",CellLabel -> "Out[152]= ",ExpressionUUID -> "f3c6c4b2-5845-4507-860c-24d19ac294ae"]},
Open],ExpressionUUID -> "0b9d5b83-7e4a-4a31-bfa5-3e42d1879e32"],Cell[
"\<In this case, the martingale property implies the expected return equals the risk-free rate plus a risk premium that is the product of the relative volatility and the price of risk:\>",
"Text",ExpressionUUID -> "cf6eff3e-a998-41a5-b876-60791187e37c"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Solve","[",RowBox[{"noarb1",","," ","\[Mu]"}],"]"}]],"Input",
CellLabel -> "In[153]:= ",ExpressionUUID -> "4160b93a-2fde-4f64-81c6-cefc5ac96c4c"],Cell[
BoxData[
RowBox[{"{",RowBox[{"{",RowBox[{"\[Mu]","\[Rule]",RowBox[{"r","+",RowBox[{"\[Lambda]"," ","\[Sigma]"}]}]}],"}"}],"}"}],
StandardForm],"Output",CellLabel -> "Out[153]= ",ExpressionUUID -> "e4702f95-92b0-47ab-8df5-ef1ff9ae7f6b"]},
Open],ExpressionUUID -> "c6a82adb-2031-4921-a92d-592cd7ad5677"],Cell[
"\<For the derivative security we have:\>",
"Text",ExpressionUUID -> "ad7d626c-5172-4bdf-8ff4-3250d0dca065"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"noarb2"," ","="," ",RowBox[{RowBox[{"Drift"," ","@"," ",RowBox[
{"ItoD","[",RowBox[{RowBox[{"f","[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}],RowBox[
{"\[DoubledPi]","[","t","]"}]}],"]"}]}],"\[Equal]","0"}]}]],"Input",CellLabel -> "In[154]:= ",
ExpressionUUID -> "992cfc75-f386-4023-be7c-512b264c87c3"],Cell[
BoxData[RowBox[{RowBox[
{RowBox[{RowBox[{"-","r"}]," ",RowBox[{"f","[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}]," ",RowBox[
{"\[DoubledPi]","[","t","]"}]}],"-",RowBox[{"\[Lambda]"," ","\[Sigma]"," ",RowBox[
{"s","[","t","]"}]," ",RowBox[{"\[DoubledPi]","[","t","]"}]," ",RowBox[{SuperscriptBox[
"f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}],"+",RowBox[{RowBox[{"\[DoubledPi]","[","t","]"}]," ",RowBox[
{"(",RowBox[{RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"0",",","1"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{RowBox[{"s","[","t","]"}],",","t"}],"]"}],"+",RowBox[
{"\[Mu]"," ",RowBox[{"s","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[
{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}]}],")"}]}],"+",RowBox[{FractionBox["1",
"2"]," ",SuperscriptBox["\[Sigma]","2"]," ",SuperscriptBox[RowBox[{"s","[","t","]"}],
"2"]," ",RowBox[{"\[DoubledPi]","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[
RowBox[{"(",RowBox[{"2",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{RowBox[{"s","[","t","]"}],",","t"}],"]"}]}]}],"\[Equal]","0"}],StandardForm],"Output",
CellLabel -> "Out[154]= ",ExpressionUUID -> "92a4441a-f044-4d4c-b764-0a6bfb05ef0a"]},
Open],ExpressionUUID -> "f7de4fed-0fef-4f42-a06c-6e37afe133ec"],Cell[
TextData[{"We can obtain the PDE by eliminating the price of risk ",Cell[
BoxData[
FormBox["\[Lambda]",TraditionalForm]],ExpressionUUID -> "110b8921-3e03-4084-8900-ea77775ab4b7"]," from the two absence-of-arbitrage conditions:"}],
"Text",ExpressionUUID -> "7015c685-4f6b-4973-8cec-da1dacb7c87e"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"pde3","=",RowBox[{RowBox[{"Eliminate","[",RowBox[{RowBox[
{"{",RowBox[{"noarb1",","," ","noarb2"}],"}"}],","," ","\[Lambda]"}],"]"}],"/.",RowBox[
{RowBox[{"s","[","t","]"}],"\[Rule]","x"}]}]}]],"Input",CellLabel -> "In[155]:= ",
ExpressionUUID -> "61ef7fae-c9bf-429f-adcc-6c417b09d62b"],Cell[
BoxData[RowBox[{RowBox[
{RowBox[{"\[DoubledPi]","[","t","]"}]," ",RowBox[{"(",RowBox[{RowBox[{"2"," ","r"," ",RowBox[
{"f","[",RowBox[{"x",",","t"}],"]"}]}],"-",RowBox[{"2"," ","r"," ","x"," ",RowBox[
{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"1",",","0"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}],"-",RowBox[{SuperscriptBox["x","2"]," ",SuperscriptBox["\[Sigma]",
"2"]," ",RowBox[{SuperscriptBox["f",TagBox[RowBox[{"(",RowBox[{"2",",","0"}],")"}],
Derivative],MultilineFunction -> None],"[",RowBox[{"x",",","t"}],"]"}]}]}],")"}]}],"\[Equal]",RowBox[
{"2"," ",RowBox[{"\[DoubledPi]","[","t","]"}]," ",RowBox[{SuperscriptBox["f",TagBox[
RowBox[{"(",RowBox[{"0",",","1"}],")"}],Derivative],MultilineFunction -> None],"[",RowBox[
{"x",",","t"}],"]"}]}]}],StandardForm],"Output",CellLabel -> "Out[155]= ",ExpressionUUID -> "ccecef59-9635-4d21-8482-edbac24c5499"]},
Open],ExpressionUUID -> "c4933a6b-7ce1-4273-87da-ca04ccf01ff3"],Cell[
"\<We can check that this PDE is the same as the one derived above:\>",
"Text",ExpressionUUID -> "a56d1ced-28fb-41d9-a726-92b8ae46e87c"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{"Eliminate","[",RowBox[{RowBox[{"{",RowBox[{"pde1",",","pde3"}],"}"}],","," ","r"}],"]"}]],
"Input",CellLabel -> "In[156]:= ",ExpressionUUID -> "0c518fa4-4dc4-4965-8a26-9c4f0f766203"],Cell[
BoxData[
"True",StandardForm],"Output",CellLabel -> "Out[156]= ",ExpressionUUID -> "a825a962-5733-4e51-a407-b3bfb13078f2"]},
Open],ExpressionUUID -> "49142e54-e9a0-4590-9ffc-a1cd104346da"],Cell[
BoxData[RowBox[
{RowBox[{"SetOptions","[",RowBox[{"ItoD",",",RowBox[{"SuppressTime","\[Rule]","True"}]}],"]"}],";"}]],
"Input",CellLabel -> "In[157]:= ",ExpressionUUID -> "f5dd1f51-55b8-49ea-aae2-d428c2cff407"]},
Open],ExpressionUUID -> "69002df3-7280-4cd5-a77d-85318f438200"],Cell[
CellGroupData[
{Cell[
"\<FYI: Black-Scholes solution to the PDE for price of a call option\>","Subsection",
ExpressionUUID -> "0f5d4a75-2f8d-4a4e-9559-bdb1b8576eaf"],Cell[
TextData[{"European call option pays ",Cell[
BoxData[
FormBox[RowBox[{"max","(",RowBox[{RowBox[{"x","-","k"}],",","0"}],")"}],TraditionalForm]],
ExpressionUUID -> "ea98ce10-f929-435b-af12-8437ef1474d9"]," on expiration date ",Cell[
BoxData[
FormBox[RowBox[{"T",">","t"}],TraditionalForm]],ExpressionUUID -> "ff1cc696-d7db-416a-915e-4b29e0931e4f"],"."}],
"Text",ExpressionUUID -> "ffa20997-8e72-4dfc-b106-cc9c571ad6c1"],Cell[
BoxData[{RowBox[
{"Clear","[",RowBox[{"V",",","\[CapitalPhi]"}],"]"}],"\[IndentingNewLine]",RowBox[
{RowBox[{RowBox[{"\[CapitalPhi]","[","z_","]"}],"=",RowBox[{"CDF","[",RowBox[{RowBox[
{"NormalDistribution","[",RowBox[{"0",",","1"}],"]"}],",","z"}],"]"}]}],";"}],"\[IndentingNewLine]",RowBox[
{RowBox[{"V","[",RowBox[{"x_",",","t_"}],"]"}]," ",":="," ",RowBox[{RowBox[{"With","[",RowBox[
{RowBox[{"{",RowBox[{"a","=",FractionBox[RowBox[{RowBox[{"Log","[",RowBox[{"x","/","k"}],"]"}],"+",RowBox[
{RowBox[{"(",RowBox[{"r","+",RowBox[{SuperscriptBox["\[Sigma]","2"],"/","2"}]}],")"}],RowBox[
{"(",RowBox[{"T","-","t"}],")"}]}]}],RowBox[{"\[Sigma]"," ",RowBox[{"Sqrt","[",RowBox[
{"T","-","t"}],"]"}]}]]}],"}"}],",",RowBox[{RowBox[{"x"," ",RowBox[{"\[CapitalPhi]","[","a","]"}]}],"-",RowBox[
{"k"," ",RowBox[{"Exp","[",RowBox[{RowBox[{"-","r"}],RowBox[{"(",RowBox[{"T","-","t"}],")"}]}],"]"}],RowBox[
{"\[CapitalPhi]","[",RowBox[{"a","-",RowBox[{"\[Sigma]"," ",RowBox[{"Sqrt","[",RowBox[
{"T","-","t"}],"]"}]}]}],"]"}]}]}]}],"\[IndentingNewLine]","]"}],"//","Evaluate"}]}]}],
"Input",CellLabel -> "In[158]:= ",ExpressionUUID -> "6d530c6d-f50e-4154-9565-16b328a610af"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"V","[",RowBox[{"x",",","t"}],"]"}],"//","TraditionalForm"}]],
"Input",CellLabel -> "In[161]:= ",ExpressionUUID -> "9c65dac2-855b-4118-a9f1-c5ede7021d11"],Cell[
BoxData[
FormBox[RowBox[{RowBox[{FractionBox["1","2"]," ","x"," ",RowBox[{"erfc","(",RowBox[
{"-",FractionBox[RowBox[{RowBox[{"log","(",FractionBox["x","k"],")"}],"+",RowBox[
{RowBox[{"(",RowBox[{"r","+",FractionBox[SuperscriptBox["\[Sigma]","2"],"2"]}],")"}]," ",RowBox[
{"(",RowBox[{"T","-","t"}],")"}]}]}],RowBox[{SqrtBox["2"]," ","\[Sigma]"," ",SqrtBox[
RowBox[{"T","-","t"}]]}]]}],")"}]}],"-",RowBox[{FractionBox["1","2"]," ","k"," ",SuperscriptBox[
"\[ExponentialE]",RowBox[{RowBox[{"-","r"}]," ",RowBox[{"(",RowBox[{"T","-","t"}],")"}]}]]," ",RowBox[
{"erfc","(",RowBox[{"-",FractionBox[RowBox[{FractionBox[RowBox[{RowBox[{"log","(",FractionBox[
"x","k"],")"}],"+",RowBox[{RowBox[{"(",RowBox[{"r","+",FractionBox[SuperscriptBox[
"\[Sigma]","2"],"2"]}],")"}]," ",RowBox[{"(",RowBox[{"T","-","t"}],")"}]}]}],RowBox[
{"\[Sigma]"," ",SqrtBox[RowBox[{"T","-","t"}]]}]],"-",RowBox[{"\[Sigma]"," ",SqrtBox[
RowBox[{"T","-","t"}]]}]}],SqrtBox["2"]]}],")"}]}]}],TraditionalForm],StandardForm],
"Output",CellLabel -> "Out[161]//TraditionalForm= ",ExpressionUUID -> "06eab098-115a-440a-9742-f5069fa99d89"]},
Open],ExpressionUUID -> "242d6be6-807c-4b54-a970-4e505ca7f701"],Cell[
CellGroupData[
{Cell[
BoxData[RowBox[{RowBox[{"pde1","/.",RowBox[{"f","\[Rule]","V"}]}],"//","Simplify"}]],
"Input",CellLabel -> "In[162]:= ",ExpressionUUID -> "d55af1e3-8a2f-4527-bef9-8dfc3046a0f9"],Cell[
BoxData[
"True",StandardForm],"Output",CellLabel -> "Out[162]= ",ExpressionUUID -> "9ee96187-c88b-40a6-9366-1c2727410d0e"]},
Open],ExpressionUUID -> "e9578dcd-c32c-4441-87d0-681a19b9f7a6"]},Open],ExpressionUUID -> "4365f72a-01e8-4791-8dd1-18754124fd01"]},
Open],ExpressionUUID -> "630dcf2a-850e-4545-82af-8e96950509af"]},Open],ExpressionUUID -> "2ebd5b32-33d1-4cef-94a8-2ac45479b4e0"]},
StyleDefinitions -> "Default.nb",PrintingCopies -> 1,WindowSize -> {922,800},WindowMargins -> {{327,Automatic},{Automatic,37}},
FrontEndVersion -> "13.2 for Wolfram Cloud 1.64.3 (March 13, 2023)",PrintingPageRange -> {Automatic,Automatic},
Magnification -> 1.5`,TaggingRules -> {"TryRealOnly" -> False}]